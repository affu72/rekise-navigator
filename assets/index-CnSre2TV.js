var c1=Object.defineProperty;var h1=(r,e,t)=>e in r?c1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var k_=(r,e,t)=>h1(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function d1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ih={exports:{}},Mo={},rh={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function f1(){if(A_)return Se;A_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),m=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=m&&T[m]||T["@@iterator"],typeof T=="function"?T:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function C(T,N,re){this.props=T,this.context=N,this.refs=w,this.updater=re||x}C.prototype.isReactComponent={},C.prototype.setState=function(T,N){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,N,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function I(){}I.prototype=C.prototype;function R(T,N,re){this.props=T,this.context=N,this.refs=w,this.updater=re||x}var D=R.prototype=new I;D.constructor=R,E(D,C.prototype),D.isPureReactComponent=!0;var P=Array.isArray,k=Object.prototype.hasOwnProperty,W={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function j(T,N,re){var z,ue={},he=null,me=null;if(N!=null)for(z in N.ref!==void 0&&(me=N.ref),N.key!==void 0&&(he=""+N.key),N)k.call(N,z)&&!Z.hasOwnProperty(z)&&(ue[z]=N[z]);var xe=arguments.length-2;if(xe===1)ue.children=re;else if(1<xe){for(var Te=Array(xe),Ge=0;Ge<xe;Ge++)Te[Ge]=arguments[Ge+2];ue.children=Te}if(T&&T.defaultProps)for(z in xe=T.defaultProps,xe)ue[z]===void 0&&(ue[z]=xe[z]);return{$$typeof:r,type:T,key:he,ref:me,props:ue,_owner:W.current}}function b(T,N){return{$$typeof:r,type:T.type,key:N,ref:T.ref,props:T.props,_owner:T._owner}}function B(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function ie(T){var N={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(re){return N[re]})}var $=/\/+/g;function te(T,N){return typeof T=="object"&&T!==null&&T.key!=null?ie(""+T.key):N.toString(36)}function J(T,N,re,z,ue){var he=typeof T;(he==="undefined"||he==="boolean")&&(T=null);var me=!1;if(T===null)me=!0;else switch(he){case"string":case"number":me=!0;break;case"object":switch(T.$$typeof){case r:case e:me=!0}}if(me)return me=T,ue=ue(me),T=z===""?"."+te(me,0):z,P(ue)?(re="",T!=null&&(re=T.replace($,"$&/")+"/"),J(ue,N,re,"",function(Ge){return Ge})):ue!=null&&(B(ue)&&(ue=b(ue,re+(!ue.key||me&&me.key===ue.key?"":(""+ue.key).replace($,"$&/")+"/")+T)),N.push(ue)),1;if(me=0,z=z===""?".":z+":",P(T))for(var xe=0;xe<T.length;xe++){he=T[xe];var Te=z+te(he,xe);me+=J(he,N,re,Te,ue)}else if(Te=y(T),typeof Te=="function")for(T=Te.call(T),xe=0;!(he=T.next()).done;)he=he.value,Te=z+te(he,xe++),me+=J(he,N,re,Te,ue);else if(he==="object")throw N=String(T),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return me}function ee(T,N,re){if(T==null)return T;var z=[],ue=0;return J(T,z,"","",function(he){return N.call(re,he,ue++)}),z}function ne(T){if(T._status===-1){var N=T._result;N=N(),N.then(function(re){(T._status===0||T._status===-1)&&(T._status=1,T._result=re)},function(re){(T._status===0||T._status===-1)&&(T._status=2,T._result=re)}),T._status===-1&&(T._status=0,T._result=N)}if(T._status===1)return T._result.default;throw T._result}var K={current:null},U={transition:null},q={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:U,ReactCurrentOwner:W};function G(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:ee,forEach:function(T,N,re){ee(T,function(){N.apply(this,arguments)},re)},count:function(T){var N=0;return ee(T,function(){N++}),N},toArray:function(T){return ee(T,function(N){return N})||[]},only:function(T){if(!B(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Se.Component=C,Se.Fragment=t,Se.Profiler=s,Se.PureComponent=R,Se.StrictMode=n,Se.Suspense=h,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Se.act=G,Se.cloneElement=function(T,N,re){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var z=E({},T.props),ue=T.key,he=T.ref,me=T._owner;if(N!=null){if(N.ref!==void 0&&(he=N.ref,me=W.current),N.key!==void 0&&(ue=""+N.key),T.type&&T.type.defaultProps)var xe=T.type.defaultProps;for(Te in N)k.call(N,Te)&&!Z.hasOwnProperty(Te)&&(z[Te]=N[Te]===void 0&&xe!==void 0?xe[Te]:N[Te])}var Te=arguments.length-2;if(Te===1)z.children=re;else if(1<Te){xe=Array(Te);for(var Ge=0;Ge<Te;Ge++)xe[Ge]=arguments[Ge+2];z.children=xe}return{$$typeof:r,type:T.type,key:ue,ref:he,props:z,_owner:me}},Se.createContext=function(T){return T={$$typeof:a,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:l,_context:T},T.Consumer=T},Se.createElement=j,Se.createFactory=function(T){var N=j.bind(null,T);return N.type=T,N},Se.createRef=function(){return{current:null}},Se.forwardRef=function(T){return{$$typeof:c,render:T}},Se.isValidElement=B,Se.lazy=function(T){return{$$typeof:_,_payload:{_status:-1,_result:T},_init:ne}},Se.memo=function(T,N){return{$$typeof:g,type:T,compare:N===void 0?null:N}},Se.startTransition=function(T){var N=U.transition;U.transition={};try{T()}finally{U.transition=N}},Se.unstable_act=G,Se.useCallback=function(T,N){return K.current.useCallback(T,N)},Se.useContext=function(T){return K.current.useContext(T)},Se.useDebugValue=function(){},Se.useDeferredValue=function(T){return K.current.useDeferredValue(T)},Se.useEffect=function(T,N){return K.current.useEffect(T,N)},Se.useId=function(){return K.current.useId()},Se.useImperativeHandle=function(T,N,re){return K.current.useImperativeHandle(T,N,re)},Se.useInsertionEffect=function(T,N){return K.current.useInsertionEffect(T,N)},Se.useLayoutEffect=function(T,N){return K.current.useLayoutEffect(T,N)},Se.useMemo=function(T,N){return K.current.useMemo(T,N)},Se.useReducer=function(T,N,re){return K.current.useReducer(T,N,re)},Se.useRef=function(T){return K.current.useRef(T)},Se.useState=function(T){return K.current.useState(T)},Se.useSyncExternalStore=function(T,N,re){return K.current.useSyncExternalStore(T,N,re)},Se.useTransition=function(){return K.current.useTransition()},Se.version="18.3.1",Se}var D_;function id(){return D_||(D_=1,rh.exports=f1()),rh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function g1(){if(F_)return Mo;F_=1;var r=id(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,h,g){var _,m={},y=null,x=null;g!==void 0&&(y=""+g),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(x=h.ref);for(_ in h)n.call(h,_)&&!l.hasOwnProperty(_)&&(m[_]=h[_]);if(c&&c.defaultProps)for(_ in h=c.defaultProps,h)m[_]===void 0&&(m[_]=h[_]);return{$$typeof:e,type:c,key:y,ref:x,props:m,_owner:s.current}}return Mo.Fragment=t,Mo.jsx=a,Mo.jsxs=a,Mo}var O_;function _1(){return O_||(O_=1,ih.exports=g1()),ih.exports}var fe=_1(),Ye=id();const Ar=d1(Ye);var ma={},sh={exports:{}},jt={},oh={exports:{}},lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function p1(){return N_||(N_=1,function(r){function e(U,q){var G=U.length;U.push(q);e:for(;0<G;){var T=G-1>>>1,N=U[T];if(0<s(N,q))U[T]=q,U[G]=N,G=T;else break e}}function t(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var q=U[0],G=U.pop();if(G!==q){U[0]=G;e:for(var T=0,N=U.length,re=N>>>1;T<re;){var z=2*(T+1)-1,ue=U[z],he=z+1,me=U[he];if(0>s(ue,G))he<N&&0>s(me,ue)?(U[T]=me,U[he]=G,T=he):(U[T]=ue,U[z]=G,T=z);else if(he<N&&0>s(me,G))U[T]=me,U[he]=G,T=he;else break e}}return q}function s(U,q){var G=U.sortIndex-q.sortIndex;return G!==0?G:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();r.unstable_now=function(){return a.now()-c}}var h=[],g=[],_=1,m=null,y=3,x=!1,E=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(U){for(var q=t(g);q!==null;){if(q.callback===null)n(g);else if(q.startTime<=U)n(g),q.sortIndex=q.expirationTime,e(h,q);else break;q=t(g)}}function P(U){if(w=!1,D(U),!E)if(t(h)!==null)E=!0,ne(k);else{var q=t(g);q!==null&&K(P,q.startTime-U)}}function k(U,q){E=!1,w&&(w=!1,I(j),j=-1),x=!0;var G=y;try{for(D(q),m=t(h);m!==null&&(!(m.expirationTime>q)||U&&!ie());){var T=m.callback;if(typeof T=="function"){m.callback=null,y=m.priorityLevel;var N=T(m.expirationTime<=q);q=r.unstable_now(),typeof N=="function"?m.callback=N:m===t(h)&&n(h),D(q)}else n(h);m=t(h)}if(m!==null)var re=!0;else{var z=t(g);z!==null&&K(P,z.startTime-q),re=!1}return re}finally{m=null,y=G,x=!1}}var W=!1,Z=null,j=-1,b=5,B=-1;function ie(){return!(r.unstable_now()-B<b)}function $(){if(Z!==null){var U=r.unstable_now();B=U;var q=!0;try{q=Z(!0,U)}finally{q?te():(W=!1,Z=null)}}else W=!1}var te;if(typeof R=="function")te=function(){R($)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ee=J.port2;J.port1.onmessage=$,te=function(){ee.postMessage(null)}}else te=function(){C($,0)};function ne(U){Z=U,W||(W=!0,te())}function K(U,q){j=C(function(){U(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_continueExecution=function(){E||x||(E=!0,ne(k))},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(U){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var G=y;y=q;try{return U()}finally{y=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=y;y=U;try{return q()}finally{y=G}},r.unstable_scheduleCallback=function(U,q,G){var T=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?T+G:T):G=T,U){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=G+N,U={id:_++,callback:q,priorityLevel:U,startTime:G,expirationTime:N,sortIndex:-1},G>T?(U.sortIndex=G,e(g,U),t(h)===null&&U===t(g)&&(w?(I(j),j=-1):w=!0,K(P,G-T))):(U.sortIndex=N,e(h,U),E||x||(E=!0,ne(k))),U},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(U){var q=y;return function(){var G=y;y=q;try{return U.apply(this,arguments)}finally{y=G}}}}(lh)),lh}var z_;function m1(){return z_||(z_=1,oh.exports=p1()),oh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function y1(){if(G_)return jt;G_=1;var r=id(),e=m1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},m={};function y(i){return h.call(m,i)?!0:h.call(_,i)?!1:g.test(i)?m[i]=!0:(_[i]=!0,!1)}function x(i,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,o,u,d){if(o===null||typeof o>"u"||x(i,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function w(i,o,u,d,f,p,v){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=p,this.removeEmptyString=v}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new w(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new w(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new w(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new w(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new w(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new w(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new w(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new w(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new w(i,5,!1,i.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new w(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new w(i,1,!1,i.toLowerCase(),null,!0,!0)});function D(i,o,u,d){var f=C.hasOwnProperty(o)?C[o]:null;(f!==null?f.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(E(o,u,f,d)&&(u=null),d||f===null?y(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):f.mustUseProperty?i[f.propertyName]=u===null?f.type===3?!1:"":u:(o=f.attributeName,d=f.attributeNamespace,u===null?i.removeAttribute(o):(f=f.type,u=f===3||f===4&&u===!0?"":""+u,d?i.setAttributeNS(d,o,u):i.setAttribute(o,u))))}var P=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),W=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),ie=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),U=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,T;function N(i){if(T===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);T=o&&o[1]||""}return`
`+T+i}var re=!1;function z(i,o){if(!i||re)return"";re=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(O){var d=O}Reflect.construct(i,[],o)}else{try{o.call()}catch(O){d=O}i.call(o.prototype)}else{try{throw Error()}catch(O){d=O}i()}}catch(O){if(O&&d&&typeof O.stack=="string"){for(var f=O.stack.split(`
`),p=d.stack.split(`
`),v=f.length-1,S=p.length-1;1<=v&&0<=S&&f[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(f[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||f[v]!==p[S]){var L=`
`+f[v].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=v&&0<=S);break}}}finally{re=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?N(i):""}function ue(i){switch(i.tag){case 5:return N(i.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return i=z(i.type,!1),i;case 11:return i=z(i.type.render,!1),i;case 1:return i=z(i.type,!0),i;default:return""}}function he(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Z:return"Fragment";case W:return"Portal";case b:return"Profiler";case j:return"StrictMode";case te:return"Suspense";case J:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ie:return(i.displayName||"Context")+".Consumer";case B:return(i._context.displayName||"Context")+".Provider";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ee:return o=i.displayName||null,o!==null?o:he(i.type)||"Memo";case ne:o=i._payload,i=i._init;try{return he(i(o))}catch{}}return null}function me(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(o);case 8:return o===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function xe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Te(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ge(i){var o=Te(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return f.call(this)},set:function(v){d=""+v,p.call(this,v)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(v){d=""+v},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Tt(i){i._valueTracker||(i._valueTracker=Ge(i))}function Dn(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=Te(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function gn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Hn(i,o){var u=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Fn(i,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=xe(o.value!=null?o.value:u),i._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Jt(i,o){o=o.checked,o!=null&&D(i,"checked",o,!1)}function pt(i,o){Jt(i,o);var u=xe(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?On(i,o.type,u):o.hasOwnProperty("defaultValue")&&On(i,o.type,xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Vt(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function On(i,o,u){(o!=="number"||gn(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var en=Array.isArray;function tn(i,o,u,d){if(i=i.options,o){o={};for(var f=0;f<u.length;f++)o["$"+u[f]]=!0;for(u=0;u<i.length;u++)f=o.hasOwnProperty("$"+i[u].value),i[u].selected!==f&&(i[u].selected=f),f&&d&&(i[u].defaultSelected=!0)}else{for(u=""+xe(u),o=null,f=0;f<i.length;f++){if(i[f].value===u){i[f].selected=!0,d&&(i[f].defaultSelected=!0);return}o!==null||i[f].disabled||(o=i[f])}o!==null&&(o.selected=!0)}}function _n(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function $n(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(en(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:xe(u)}}function qn(i,o){var u=xe(o.value),d=xe(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),d!=null&&(i.defaultValue=""+d)}function $e(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Gr(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lr(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Gr(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Qn,ar=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,f){MSApp.execUnsafeLocalFunction(function(){return i(o,u,d,f)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Qn=Qn||document.createElement("div"),Qn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Qn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ur(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cl=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(i){cl.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),xi[o]=xi[i]})});function jr(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||xi.hasOwnProperty(i)&&xi[i]?(""+o).trim():o+"px"}function hl(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,f=jr(u,o[u],d);u==="float"&&(u="cssFloat"),d?i.setProperty(u,f):i[u]=f}}var wu=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ur(i,o){if(o){if(wu[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Xr(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function Wr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Vs=null,Nn=null,nn=null;function wi(i){if(i=_o(i)){if(typeof Vs!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Al(o),Vs(i.stateNode,i.type,o))}}function Ci(i){Nn?nn?nn.push(i):nn=[i]:Nn=i}function Ks(){if(Nn){var i=Nn,o=nn;if(nn=Nn=null,wi(i),o)for(i=0;i<o.length;i++)wi(o[i])}}function Zs(i,o){return i(o)}function Rt(){}var pn=!1;function It(i,o,u){if(pn)return i(o,u);pn=!0;try{return Zs(i,o,u)}finally{pn=!1,(Nn!==null||nn!==null)&&(Rt(),Ks())}}function mt(i,o){var u=i.stateNode;if(u===null)return null;var d=Al(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var yt=!1;if(c)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){yt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{yt=!1}function mn(i,o,u,d,f,p,v,S,L){var O=Array.prototype.slice.call(arguments,3);try{o.apply(u,O)}catch(V){this.onError(V)}}var je=!1,Je=null,Dt=!1,Hs=null,y0={onError:function(i){je=!0,Je=i}};function E0(i,o,u,d,f,p,v,S,L){je=!1,Je=null,mn.apply(y0,arguments)}function v0(i,o,u,d,f,p,v,S,L){if(E0.apply(this,arguments),je){if(je){var O=Je;je=!1,Je=null}else throw Error(t(198));Dt||(Dt=!0,Hs=O)}}function hr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Jd(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function ef(i){if(hr(i)!==i)throw Error(t(188))}function x0(i){var o=i.alternate;if(!o){if(o=hr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,d=o;;){var f=u.return;if(f===null)break;var p=f.alternate;if(p===null){if(d=f.return,d!==null){u=d;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===u)return ef(f),i;if(p===d)return ef(f),o;p=p.sibling}throw Error(t(188))}if(u.return!==d.return)u=f,d=p;else{for(var v=!1,S=f.child;S;){if(S===u){v=!0,u=f,d=p;break}if(S===d){v=!0,d=f,u=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===u){v=!0,u=p,d=f;break}if(S===d){v=!0,d=p,u=f;break}S=S.sibling}if(!v)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function tf(i){return i=x0(i),i!==null?nf(i):null}function nf(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=nf(i);if(o!==null)return o;i=i.sibling}return null}var rf=e.unstable_scheduleCallback,sf=e.unstable_cancelCallback,w0=e.unstable_shouldYield,C0=e.unstable_requestPaint,qe=e.unstable_now,S0=e.unstable_getCurrentPriorityLevel,Cu=e.unstable_ImmediatePriority,of=e.unstable_UserBlockingPriority,dl=e.unstable_NormalPriority,T0=e.unstable_LowPriority,lf=e.unstable_IdlePriority,fl=null,zn=null;function R0(i){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(fl,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:P0,I0=Math.log,L0=Math.LN2;function P0(i){return i>>>=0,i===0?32:31-(I0(i)/L0|0)|0}var gl=64,_l=4194304;function $s(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function pl(i,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,f=i.suspendedLanes,p=i.pingedLanes,v=u&268435455;if(v!==0){var S=v&~f;S!==0?d=$s(S):(p&=v,p!==0&&(d=$s(p)))}else v=u&~f,v!==0?d=$s(v):p!==0&&(d=$s(p));if(d===0)return 0;if(o!==0&&o!==d&&!(o&f)&&(f=d&-d,p=o&-o,f>=p||f===16&&(p&4194240)!==0))return o;if(d&4&&(d|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)u=31-yn(o),f=1<<u,d|=i[u],o&=~f;return d}function M0(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k0(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes;0<p;){var v=31-yn(p),S=1<<v,L=f[v];L===-1?(!(S&u)||S&d)&&(f[v]=M0(S,o)):L<=o&&(i.expiredLanes|=S),p&=~S}}function Su(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function af(){var i=gl;return gl<<=1,!(gl&4194240)&&(gl=64),i}function Tu(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function qs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-yn(o),i[o]=u}function A0(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<u;){var f=31-yn(u),p=1<<f;o[f]=0,d[f]=-1,i[f]=-1,u&=~p}}function Ru(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-yn(u),f=1<<d;f&o|i[d]&o&&(i[d]|=o),u&=~f}}var Ne=0;function uf(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var cf,Iu,hf,df,ff,Lu=!1,ml=[],Si=null,Ti=null,Ri=null,Qs=new Map,Js=new Map,Ii=[],D0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gf(i,o){switch(i){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Qs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Js.delete(o.pointerId)}}function eo(i,o,u,d,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:p,targetContainers:[f]},o!==null&&(o=_o(o),o!==null&&Iu(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,f!==null&&o.indexOf(f)===-1&&o.push(f),i)}function F0(i,o,u,d,f){switch(o){case"focusin":return Si=eo(Si,i,o,u,d,f),!0;case"dragenter":return Ti=eo(Ti,i,o,u,d,f),!0;case"mouseover":return Ri=eo(Ri,i,o,u,d,f),!0;case"pointerover":var p=f.pointerId;return Qs.set(p,eo(Qs.get(p)||null,i,o,u,d,f)),!0;case"gotpointercapture":return p=f.pointerId,Js.set(p,eo(Js.get(p)||null,i,o,u,d,f)),!0}return!1}function _f(i){var o=dr(i.target);if(o!==null){var u=hr(o);if(u!==null){if(o=u.tag,o===13){if(o=Jd(u),o!==null){i.blockedOn=o,ff(i.priority,function(){hf(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Mu(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);cr=d,u.target.dispatchEvent(d),cr=null}else return o=_o(u),o!==null&&Iu(o),i.blockedOn=u,!1;o.shift()}return!0}function pf(i,o,u){yl(i)&&u.delete(o)}function O0(){Lu=!1,Si!==null&&yl(Si)&&(Si=null),Ti!==null&&yl(Ti)&&(Ti=null),Ri!==null&&yl(Ri)&&(Ri=null),Qs.forEach(pf),Js.forEach(pf)}function to(i,o){i.blockedOn===o&&(i.blockedOn=null,Lu||(Lu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,O0)))}function no(i){function o(f){return to(f,i)}if(0<ml.length){to(ml[0],i);for(var u=1;u<ml.length;u++){var d=ml[u];d.blockedOn===i&&(d.blockedOn=null)}}for(Si!==null&&to(Si,i),Ti!==null&&to(Ti,i),Ri!==null&&to(Ri,i),Qs.forEach(o),Js.forEach(o),u=0;u<Ii.length;u++)d=Ii[u],d.blockedOn===i&&(d.blockedOn=null);for(;0<Ii.length&&(u=Ii[0],u.blockedOn===null);)_f(u),u.blockedOn===null&&Ii.shift()}var br=P.ReactCurrentBatchConfig,El=!0;function N0(i,o,u,d){var f=Ne,p=br.transition;br.transition=null;try{Ne=1,Pu(i,o,u,d)}finally{Ne=f,br.transition=p}}function z0(i,o,u,d){var f=Ne,p=br.transition;br.transition=null;try{Ne=4,Pu(i,o,u,d)}finally{Ne=f,br.transition=p}}function Pu(i,o,u,d){if(El){var f=Mu(i,o,u,d);if(f===null)Ku(i,o,d,vl,u),gf(i,d);else if(F0(f,i,o,u,d))d.stopPropagation();else if(gf(i,d),o&4&&-1<D0.indexOf(i)){for(;f!==null;){var p=_o(f);if(p!==null&&cf(p),p=Mu(i,o,u,d),p===null&&Ku(i,o,d,vl,u),p===f)break;f=p}f!==null&&d.stopPropagation()}else Ku(i,o,d,null,u)}}var vl=null;function Mu(i,o,u,d){if(vl=null,i=Wr(d),i=dr(i),i!==null)if(o=hr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Jd(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return vl=i,null}function mf(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S0()){case Cu:return 1;case of:return 4;case dl:case T0:return 16;case lf:return 536870912;default:return 16}default:return 16}}var Li=null,ku=null,xl=null;function yf(){if(xl)return xl;var i,o=ku,u=o.length,d,f="value"in Li?Li.value:Li.textContent,p=f.length;for(i=0;i<u&&o[i]===f[i];i++);var v=u-i;for(d=1;d<=v&&o[u-d]===f[p-d];d++);return xl=f.slice(i,1<d?1-d:void 0)}function wl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Cl(){return!0}function Ef(){return!1}function Kt(i){function o(u,d,f,p,v){this._reactName=u,this._targetInst=f,this.type=d,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(u=i[S],this[S]=u?u(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Cl:Ef,this.isPropagationStopped=Ef,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),o}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Au=Kt(Br),io=G({},Br,{view:0,detail:0}),G0=Kt(io),Du,Fu,ro,Sl=G({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ro&&(ro&&i.type==="mousemove"?(Du=i.screenX-ro.screenX,Fu=i.screenY-ro.screenY):Fu=Du=0,ro=i),Du)},movementY:function(i){return"movementY"in i?i.movementY:Fu}}),vf=Kt(Sl),j0=G({},Sl,{dataTransfer:0}),U0=Kt(j0),X0=G({},io,{relatedTarget:0}),Ou=Kt(X0),W0=G({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),b0=Kt(W0),B0=G({},Br,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Y0=Kt(B0),V0=G({},Br,{data:0}),xf=Kt(V0),K0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $0(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=H0[i])?!!o[i]:!1}function Nu(){return $0}var q0=G({},io,{key:function(i){if(i.key){var o=K0[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=wl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Z0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nu,charCode:function(i){return i.type==="keypress"?wl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Q0=Kt(q0),J0=G({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wf=Kt(J0),ey=G({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nu}),ty=Kt(ey),ny=G({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),iy=Kt(ny),ry=G({},Sl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),sy=Kt(ry),oy=[9,13,27,32],zu=c&&"CompositionEvent"in window,so=null;c&&"documentMode"in document&&(so=document.documentMode);var ly=c&&"TextEvent"in window&&!so,Cf=c&&(!zu||so&&8<so&&11>=so),Sf=" ",Tf=!1;function Rf(i,o){switch(i){case"keyup":return oy.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function If(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Yr=!1;function ay(i,o){switch(i){case"compositionend":return If(o);case"keypress":return o.which!==32?null:(Tf=!0,Sf);case"textInput":return i=o.data,i===Sf&&Tf?null:i;default:return null}}function uy(i,o){if(Yr)return i==="compositionend"||!zu&&Rf(i,o)?(i=yf(),xl=ku=Li=null,Yr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Cf&&o.locale!=="ko"?null:o.data;default:return null}}var cy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!cy[i.type]:o==="textarea"}function Pf(i,o,u,d){Ci(d),o=Pl(o,"onChange"),0<o.length&&(u=new Au("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var oo=null,lo=null;function hy(i){Kf(i,0)}function Tl(i){var o=$r(i);if(Dn(o))return i}function dy(i,o){if(i==="change")return o}var Mf=!1;if(c){var Gu;if(c){var ju="oninput"in document;if(!ju){var kf=document.createElement("div");kf.setAttribute("oninput","return;"),ju=typeof kf.oninput=="function"}Gu=ju}else Gu=!1;Mf=Gu&&(!document.documentMode||9<document.documentMode)}function Af(){oo&&(oo.detachEvent("onpropertychange",Df),lo=oo=null)}function Df(i){if(i.propertyName==="value"&&Tl(lo)){var o=[];Pf(o,lo,i,Wr(i)),It(hy,o)}}function fy(i,o,u){i==="focusin"?(Af(),oo=o,lo=u,oo.attachEvent("onpropertychange",Df)):i==="focusout"&&Af()}function gy(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Tl(lo)}function _y(i,o){if(i==="click")return Tl(o)}function py(i,o){if(i==="input"||i==="change")return Tl(o)}function my(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var En=typeof Object.is=="function"?Object.is:my;function ao(i,o){if(En(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var f=u[d];if(!h.call(o,f)||!En(i[f],o[f]))return!1}return!0}function Ff(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Of(i,o){var u=Ff(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ff(u)}}function Nf(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Nf(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function zf(){for(var i=window,o=gn();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=gn(i.document)}return o}function Uu(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function yy(i){var o=zf(),u=i.focusedElem,d=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Nf(u.ownerDocument.documentElement,u)){if(d!==null&&Uu(u)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var f=u.textContent.length,p=Math.min(d.start,f);d=d.end===void 0?p:Math.min(d.end,f),!i.extend&&p>d&&(f=d,d=p,p=f),f=Of(u,p);var v=Of(u,d);f&&v&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==v.node||i.focusOffset!==v.offset)&&(o=o.createRange(),o.setStart(f.node,f.offset),i.removeAllRanges(),p>d?(i.addRange(o),i.extend(v.node,v.offset)):(o.setEnd(v.node,v.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Ey=c&&"documentMode"in document&&11>=document.documentMode,Vr=null,Xu=null,uo=null,Wu=!1;function Gf(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Wu||Vr==null||Vr!==gn(d)||(d=Vr,"selectionStart"in d&&Uu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),uo&&ao(uo,d)||(uo=d,d=Pl(Xu,"onSelect"),0<d.length&&(o=new Au("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=Vr)))}function Rl(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Kr={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},bu={},jf={};c&&(jf=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function Il(i){if(bu[i])return bu[i];if(!Kr[i])return i;var o=Kr[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in jf)return bu[i]=o[u];return i}var Uf=Il("animationend"),Xf=Il("animationiteration"),Wf=Il("animationstart"),bf=Il("transitionend"),Bf=new Map,Yf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(i,o){Bf.set(i,o),l(o,[i])}for(var Bu=0;Bu<Yf.length;Bu++){var Yu=Yf[Bu],vy=Yu.toLowerCase(),xy=Yu[0].toUpperCase()+Yu.slice(1);Pi(vy,"on"+xy)}Pi(Uf,"onAnimationEnd"),Pi(Xf,"onAnimationIteration"),Pi(Wf,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(bf,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wy=new Set("cancel close invalid load scroll toggle".split(" ").concat(co));function Vf(i,o,u){var d=i.type||"unknown-event";i.currentTarget=u,v0(d,o,void 0,i),i.currentTarget=null}function Kf(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],f=d.event;d=d.listeners;e:{var p=void 0;if(o)for(var v=d.length-1;0<=v;v--){var S=d[v],L=S.instance,O=S.currentTarget;if(S=S.listener,L!==p&&f.isPropagationStopped())break e;Vf(f,S,O),p=L}else for(v=0;v<d.length;v++){if(S=d[v],L=S.instance,O=S.currentTarget,S=S.listener,L!==p&&f.isPropagationStopped())break e;Vf(f,S,O),p=L}}}if(Dt)throw i=Hs,Dt=!1,Hs=null,i}function We(i,o){var u=o[Ju];u===void 0&&(u=o[Ju]=new Set);var d=i+"__bubble";u.has(d)||(Zf(o,i,2,!1),u.add(d))}function Vu(i,o,u){var d=0;o&&(d|=4),Zf(u,i,d,o)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function ho(i){if(!i[Ll]){i[Ll]=!0,n.forEach(function(u){u!=="selectionchange"&&(wy.has(u)||Vu(u,!1,i),Vu(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ll]||(o[Ll]=!0,Vu("selectionchange",!1,o))}}function Zf(i,o,u,d){switch(mf(o)){case 1:var f=N0;break;case 4:f=z0;break;default:f=Pu}u=f.bind(null,o,u,i),f=void 0,!yt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(f=!0),d?f!==void 0?i.addEventListener(o,u,{capture:!0,passive:f}):i.addEventListener(o,u,!0):f!==void 0?i.addEventListener(o,u,{passive:f}):i.addEventListener(o,u,!1)}function Ku(i,o,u,d,f){var p=d;if(!(o&1)&&!(o&2)&&d!==null)e:for(;;){if(d===null)return;var v=d.tag;if(v===3||v===4){var S=d.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(v===4)for(v=d.return;v!==null;){var L=v.tag;if((L===3||L===4)&&(L=v.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;v=v.return}for(;S!==null;){if(v=dr(S),v===null)return;if(L=v.tag,L===5||L===6){d=p=v;continue e}S=S.parentNode}}d=d.return}It(function(){var O=p,V=Wr(u),H=[];e:{var Y=Bf.get(i);if(Y!==void 0){var se=Au,ae=i;switch(i){case"keypress":if(wl(u)===0)break e;case"keydown":case"keyup":se=Q0;break;case"focusin":ae="focus",se=Ou;break;case"focusout":ae="blur",se=Ou;break;case"beforeblur":case"afterblur":se=Ou;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=U0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=ty;break;case Uf:case Xf:case Wf:se=b0;break;case bf:se=iy;break;case"scroll":se=G0;break;case"wheel":se=sy;break;case"copy":case"cut":case"paste":se=Y0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=wf}var ce=(o&4)!==0,Qe=!ce&&i==="scroll",A=ce?Y!==null?Y+"Capture":null:Y;ce=[];for(var M=O,F;M!==null;){F=M;var Q=F.stateNode;if(F.tag===5&&Q!==null&&(F=Q,A!==null&&(Q=mt(M,A),Q!=null&&ce.push(fo(M,Q,F)))),Qe)break;M=M.return}0<ce.length&&(Y=new se(Y,ae,null,u,V),H.push({event:Y,listeners:ce}))}}if(!(o&7)){e:{if(Y=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",Y&&u!==cr&&(ae=u.relatedTarget||u.fromElement)&&(dr(ae)||ae[Jn]))break e;if((se||Y)&&(Y=V.window===V?V:(Y=V.ownerDocument)?Y.defaultView||Y.parentWindow:window,se?(ae=u.relatedTarget||u.toElement,se=O,ae=ae?dr(ae):null,ae!==null&&(Qe=hr(ae),ae!==Qe||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(se=null,ae=O),se!==ae)){if(ce=vf,Q="onMouseLeave",A="onMouseEnter",M="mouse",(i==="pointerout"||i==="pointerover")&&(ce=wf,Q="onPointerLeave",A="onPointerEnter",M="pointer"),Qe=se==null?Y:$r(se),F=ae==null?Y:$r(ae),Y=new ce(Q,M+"leave",se,u,V),Y.target=Qe,Y.relatedTarget=F,Q=null,dr(V)===O&&(ce=new ce(A,M+"enter",ae,u,V),ce.target=F,ce.relatedTarget=Qe,Q=ce),Qe=Q,se&&ae)t:{for(ce=se,A=ae,M=0,F=ce;F;F=Zr(F))M++;for(F=0,Q=A;Q;Q=Zr(Q))F++;for(;0<M-F;)ce=Zr(ce),M--;for(;0<F-M;)A=Zr(A),F--;for(;M--;){if(ce===A||A!==null&&ce===A.alternate)break t;ce=Zr(ce),A=Zr(A)}ce=null}else ce=null;se!==null&&Hf(H,Y,se,ce,!1),ae!==null&&Qe!==null&&Hf(H,Qe,ae,ce,!0)}}e:{if(Y=O?$r(O):window,se=Y.nodeName&&Y.nodeName.toLowerCase(),se==="select"||se==="input"&&Y.type==="file")var de=dy;else if(Lf(Y))if(Mf)de=py;else{de=gy;var _e=fy}else(se=Y.nodeName)&&se.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(de=_y);if(de&&(de=de(i,O))){Pf(H,de,u,V);break e}_e&&_e(i,Y,O),i==="focusout"&&(_e=Y._wrapperState)&&_e.controlled&&Y.type==="number"&&On(Y,"number",Y.value)}switch(_e=O?$r(O):window,i){case"focusin":(Lf(_e)||_e.contentEditable==="true")&&(Vr=_e,Xu=O,uo=null);break;case"focusout":uo=Xu=Vr=null;break;case"mousedown":Wu=!0;break;case"contextmenu":case"mouseup":case"dragend":Wu=!1,Gf(H,u,V);break;case"selectionchange":if(Ey)break;case"keydown":case"keyup":Gf(H,u,V)}var pe;if(zu)e:{switch(i){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Yr?Rf(i,u)&&(ye="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(ye="onCompositionStart");ye&&(Cf&&u.locale!=="ko"&&(Yr||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Yr&&(pe=yf()):(Li=V,ku="value"in Li?Li.value:Li.textContent,Yr=!0)),_e=Pl(O,ye),0<_e.length&&(ye=new xf(ye,i,null,u,V),H.push({event:ye,listeners:_e}),pe?ye.data=pe:(pe=If(u),pe!==null&&(ye.data=pe)))),(pe=ly?ay(i,u):uy(i,u))&&(O=Pl(O,"onBeforeInput"),0<O.length&&(V=new xf("onBeforeInput","beforeinput",null,u,V),H.push({event:V,listeners:O}),V.data=pe))}Kf(H,o)})}function fo(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Pl(i,o){for(var u=o+"Capture",d=[];i!==null;){var f=i,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=mt(i,u),p!=null&&d.unshift(fo(i,p,f)),p=mt(i,o),p!=null&&d.push(fo(i,p,f))),i=i.return}return d}function Zr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Hf(i,o,u,d,f){for(var p=o._reactName,v=[];u!==null&&u!==d;){var S=u,L=S.alternate,O=S.stateNode;if(L!==null&&L===d)break;S.tag===5&&O!==null&&(S=O,f?(L=mt(u,p),L!=null&&v.unshift(fo(u,L,S))):f||(L=mt(u,p),L!=null&&v.push(fo(u,L,S)))),u=u.return}v.length!==0&&i.push({event:o,listeners:v})}var Cy=/\r\n?/g,Sy=/\u0000|\uFFFD/g;function $f(i){return(typeof i=="string"?i:""+i).replace(Cy,`
`).replace(Sy,"")}function Ml(i,o,u){if(o=$f(o),$f(i)!==o&&u)throw Error(t(425))}function kl(){}var Zu=null,Hu=null;function $u(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var qu=typeof setTimeout=="function"?setTimeout:void 0,Ty=typeof clearTimeout=="function"?clearTimeout:void 0,qf=typeof Promise=="function"?Promise:void 0,Ry=typeof queueMicrotask=="function"?queueMicrotask:typeof qf<"u"?function(i){return qf.resolve(null).then(i).catch(Iy)}:qu;function Iy(i){setTimeout(function(){throw i})}function Qu(i,o){var u=o,d=0;do{var f=u.nextSibling;if(i.removeChild(u),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(d===0){i.removeChild(f),no(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=f}while(u);no(o)}function Mi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Qf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Hr,go="__reactProps$"+Hr,Jn="__reactContainer$"+Hr,Ju="__reactEvents$"+Hr,Ly="__reactListeners$"+Hr,Py="__reactHandles$"+Hr;function dr(i){var o=i[Gn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Jn]||u[Gn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Qf(i);i!==null;){if(u=i[Gn])return u;i=Qf(i)}return o}i=u,u=i.parentNode}return null}function _o(i){return i=i[Gn]||i[Jn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function $r(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Al(i){return i[go]||null}var ec=[],qr=-1;function ki(i){return{current:i}}function be(i){0>qr||(i.current=ec[qr],ec[qr]=null,qr--)}function Xe(i,o){qr++,ec[qr]=i.current,i.current=o}var Ai={},Et=ki(Ai),Ft=ki(!1),fr=Ai;function Qr(i,o){var u=i.type.contextTypes;if(!u)return Ai;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in u)f[p]=o[p];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=f),f}function Ot(i){return i=i.childContextTypes,i!=null}function Dl(){be(Ft),be(Et)}function Jf(i,o,u){if(Et.current!==Ai)throw Error(t(168));Xe(Et,o),Xe(Ft,u)}function eg(i,o,u){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var f in d)if(!(f in o))throw Error(t(108,me(i)||"Unknown",f));return G({},u,d)}function Fl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ai,fr=Et.current,Xe(Et,i),Xe(Ft,Ft.current),!0}function tg(i,o,u){var d=i.stateNode;if(!d)throw Error(t(169));u?(i=eg(i,o,fr),d.__reactInternalMemoizedMergedChildContext=i,be(Ft),be(Et),Xe(Et,i)):be(Ft),Xe(Ft,u)}var ei=null,Ol=!1,tc=!1;function ng(i){ei===null?ei=[i]:ei.push(i)}function My(i){Ol=!0,ng(i)}function Di(){if(!tc&&ei!==null){tc=!0;var i=0,o=Ne;try{var u=ei;for(Ne=1;i<u.length;i++){var d=u[i];do d=d(!0);while(d!==null)}ei=null,Ol=!1}catch(f){throw ei!==null&&(ei=ei.slice(i+1)),rf(Cu,Di),f}finally{Ne=o,tc=!1}}return null}var Jr=[],es=0,Nl=null,zl=0,rn=[],sn=0,gr=null,ti=1,ni="";function _r(i,o){Jr[es++]=zl,Jr[es++]=Nl,Nl=i,zl=o}function ig(i,o,u){rn[sn++]=ti,rn[sn++]=ni,rn[sn++]=gr,gr=i;var d=ti;i=ni;var f=32-yn(d)-1;d&=~(1<<f),u+=1;var p=32-yn(o)+f;if(30<p){var v=f-f%5;p=(d&(1<<v)-1).toString(32),d>>=v,f-=v,ti=1<<32-yn(o)+f|u<<f|d,ni=p+i}else ti=1<<p|u<<f|d,ni=i}function nc(i){i.return!==null&&(_r(i,1),ig(i,1,0))}function ic(i){for(;i===Nl;)Nl=Jr[--es],Jr[es]=null,zl=Jr[--es],Jr[es]=null;for(;i===gr;)gr=rn[--sn],rn[sn]=null,ni=rn[--sn],rn[sn]=null,ti=rn[--sn],rn[sn]=null}var Zt=null,Ht=null,Be=!1,vn=null;function rg(i,o){var u=un(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function sg(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Zt=i,Ht=Mi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Zt=i,Ht=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=gr!==null?{id:ti,overflow:ni}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=un(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Zt=i,Ht=null,!0):!1;default:return!1}}function rc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function sc(i){if(Be){var o=Ht;if(o){var u=o;if(!sg(i,o)){if(rc(i))throw Error(t(418));o=Mi(u.nextSibling);var d=Zt;o&&sg(i,o)?rg(d,u):(i.flags=i.flags&-4097|2,Be=!1,Zt=i)}}else{if(rc(i))throw Error(t(418));i.flags=i.flags&-4097|2,Be=!1,Zt=i}}}function og(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Zt=i}function Gl(i){if(i!==Zt)return!1;if(!Be)return og(i),Be=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!$u(i.type,i.memoizedProps)),o&&(o=Ht)){if(rc(i))throw lg(),Error(t(418));for(;o;)rg(i,o),o=Mi(o.nextSibling)}if(og(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Ht=Mi(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Ht=null}}else Ht=Zt?Mi(i.stateNode.nextSibling):null;return!0}function lg(){for(var i=Ht;i;)i=Mi(i.nextSibling)}function ts(){Ht=Zt=null,Be=!1}function oc(i){vn===null?vn=[i]:vn.push(i)}var ky=P.ReactCurrentBatchConfig;function po(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,i));var f=d,p=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===p?o.ref:(o=function(v){var S=f.refs;v===null?delete S[p]:S[p]=v},o._stringRef=p,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function jl(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function ag(i){var o=i._init;return o(i._payload)}function ug(i){function o(A,M){if(i){var F=A.deletions;F===null?(A.deletions=[M],A.flags|=16):F.push(M)}}function u(A,M){if(!i)return null;for(;M!==null;)o(A,M),M=M.sibling;return null}function d(A,M){for(A=new Map;M!==null;)M.key!==null?A.set(M.key,M):A.set(M.index,M),M=M.sibling;return A}function f(A,M){return A=Xi(A,M),A.index=0,A.sibling=null,A}function p(A,M,F){return A.index=F,i?(F=A.alternate,F!==null?(F=F.index,F<M?(A.flags|=2,M):F):(A.flags|=2,M)):(A.flags|=1048576,M)}function v(A){return i&&A.alternate===null&&(A.flags|=2),A}function S(A,M,F,Q){return M===null||M.tag!==6?(M=qc(F,A.mode,Q),M.return=A,M):(M=f(M,F),M.return=A,M)}function L(A,M,F,Q){var de=F.type;return de===Z?V(A,M,F.props.children,Q,F.key):M!==null&&(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ne&&ag(de)===M.type)?(Q=f(M,F.props),Q.ref=po(A,M,F),Q.return=A,Q):(Q=ua(F.type,F.key,F.props,null,A.mode,Q),Q.ref=po(A,M,F),Q.return=A,Q)}function O(A,M,F,Q){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=Qc(F,A.mode,Q),M.return=A,M):(M=f(M,F.children||[]),M.return=A,M)}function V(A,M,F,Q,de){return M===null||M.tag!==7?(M=Cr(F,A.mode,Q,de),M.return=A,M):(M=f(M,F),M.return=A,M)}function H(A,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return M=qc(""+M,A.mode,F),M.return=A,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case k:return F=ua(M.type,M.key,M.props,null,A.mode,F),F.ref=po(A,null,M),F.return=A,F;case W:return M=Qc(M,A.mode,F),M.return=A,M;case ne:var Q=M._init;return H(A,Q(M._payload),F)}if(en(M)||q(M))return M=Cr(M,A.mode,F,null),M.return=A,M;jl(A,M)}return null}function Y(A,M,F,Q){var de=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return de!==null?null:S(A,M,""+F,Q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case k:return F.key===de?L(A,M,F,Q):null;case W:return F.key===de?O(A,M,F,Q):null;case ne:return de=F._init,Y(A,M,de(F._payload),Q)}if(en(F)||q(F))return de!==null?null:V(A,M,F,Q,null);jl(A,F)}return null}function se(A,M,F,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return A=A.get(F)||null,S(M,A,""+Q,de);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case k:return A=A.get(Q.key===null?F:Q.key)||null,L(M,A,Q,de);case W:return A=A.get(Q.key===null?F:Q.key)||null,O(M,A,Q,de);case ne:var _e=Q._init;return se(A,M,F,_e(Q._payload),de)}if(en(Q)||q(Q))return A=A.get(F)||null,V(M,A,Q,de,null);jl(M,Q)}return null}function ae(A,M,F,Q){for(var de=null,_e=null,pe=M,ye=M=0,at=null;pe!==null&&ye<F.length;ye++){pe.index>ye?(at=pe,pe=null):at=pe.sibling;var Me=Y(A,pe,F[ye],Q);if(Me===null){pe===null&&(pe=at);break}i&&pe&&Me.alternate===null&&o(A,pe),M=p(Me,M,ye),_e===null?de=Me:_e.sibling=Me,_e=Me,pe=at}if(ye===F.length)return u(A,pe),Be&&_r(A,ye),de;if(pe===null){for(;ye<F.length;ye++)pe=H(A,F[ye],Q),pe!==null&&(M=p(pe,M,ye),_e===null?de=pe:_e.sibling=pe,_e=pe);return Be&&_r(A,ye),de}for(pe=d(A,pe);ye<F.length;ye++)at=se(pe,A,ye,F[ye],Q),at!==null&&(i&&at.alternate!==null&&pe.delete(at.key===null?ye:at.key),M=p(at,M,ye),_e===null?de=at:_e.sibling=at,_e=at);return i&&pe.forEach(function(Wi){return o(A,Wi)}),Be&&_r(A,ye),de}function ce(A,M,F,Q){var de=q(F);if(typeof de!="function")throw Error(t(150));if(F=de.call(F),F==null)throw Error(t(151));for(var _e=de=null,pe=M,ye=M=0,at=null,Me=F.next();pe!==null&&!Me.done;ye++,Me=F.next()){pe.index>ye?(at=pe,pe=null):at=pe.sibling;var Wi=Y(A,pe,Me.value,Q);if(Wi===null){pe===null&&(pe=at);break}i&&pe&&Wi.alternate===null&&o(A,pe),M=p(Wi,M,ye),_e===null?de=Wi:_e.sibling=Wi,_e=Wi,pe=at}if(Me.done)return u(A,pe),Be&&_r(A,ye),de;if(pe===null){for(;!Me.done;ye++,Me=F.next())Me=H(A,Me.value,Q),Me!==null&&(M=p(Me,M,ye),_e===null?de=Me:_e.sibling=Me,_e=Me);return Be&&_r(A,ye),de}for(pe=d(A,pe);!Me.done;ye++,Me=F.next())Me=se(pe,A,ye,Me.value,Q),Me!==null&&(i&&Me.alternate!==null&&pe.delete(Me.key===null?ye:Me.key),M=p(Me,M,ye),_e===null?de=Me:_e.sibling=Me,_e=Me);return i&&pe.forEach(function(u1){return o(A,u1)}),Be&&_r(A,ye),de}function Qe(A,M,F,Q){if(typeof F=="object"&&F!==null&&F.type===Z&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case k:e:{for(var de=F.key,_e=M;_e!==null;){if(_e.key===de){if(de=F.type,de===Z){if(_e.tag===7){u(A,_e.sibling),M=f(_e,F.props.children),M.return=A,A=M;break e}}else if(_e.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ne&&ag(de)===_e.type){u(A,_e.sibling),M=f(_e,F.props),M.ref=po(A,_e,F),M.return=A,A=M;break e}u(A,_e);break}else o(A,_e);_e=_e.sibling}F.type===Z?(M=Cr(F.props.children,A.mode,Q,F.key),M.return=A,A=M):(Q=ua(F.type,F.key,F.props,null,A.mode,Q),Q.ref=po(A,M,F),Q.return=A,A=Q)}return v(A);case W:e:{for(_e=F.key;M!==null;){if(M.key===_e)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){u(A,M.sibling),M=f(M,F.children||[]),M.return=A,A=M;break e}else{u(A,M);break}else o(A,M);M=M.sibling}M=Qc(F,A.mode,Q),M.return=A,A=M}return v(A);case ne:return _e=F._init,Qe(A,M,_e(F._payload),Q)}if(en(F))return ae(A,M,F,Q);if(q(F))return ce(A,M,F,Q);jl(A,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,M!==null&&M.tag===6?(u(A,M.sibling),M=f(M,F),M.return=A,A=M):(u(A,M),M=qc(F,A.mode,Q),M.return=A,A=M),v(A)):u(A,M)}return Qe}var ns=ug(!0),cg=ug(!1),Ul=ki(null),Xl=null,is=null,lc=null;function ac(){lc=is=Xl=null}function uc(i){var o=Ul.current;be(Ul),i._currentValue=o}function cc(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function rs(i,o){Xl=i,lc=is=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Nt=!0),i.firstContext=null)}function on(i){var o=i._currentValue;if(lc!==i)if(i={context:i,memoizedValue:o,next:null},is===null){if(Xl===null)throw Error(t(308));is=i,Xl.dependencies={lanes:0,firstContext:i}}else is=is.next=i;return o}var pr=null;function hc(i){pr===null?pr=[i]:pr.push(i)}function hg(i,o,u,d){var f=o.interleaved;return f===null?(u.next=u,hc(o)):(u.next=f.next,f.next=u),o.interleaved=u,ii(i,d)}function ii(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Fi=!1;function dc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dg(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ri(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Oi(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,Le&2){var f=d.pending;return f===null?o.next=o:(o.next=f.next,f.next=o),d.pending=o,ii(i,u)}return f=d.interleaved,f===null?(o.next=o,hc(d)):(o.next=f.next,f.next=o),d.interleaved=o,ii(i,u)}function Wl(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Ru(i,u)}}function fg(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var f=null,p=null;if(u=u.firstBaseUpdate,u!==null){do{var v={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};p===null?f=p=v:p=p.next=v,u=u.next}while(u!==null);p===null?f=p=o:p=p.next=o}else f=p=o;u={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:d.shared,effects:d.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function bl(i,o,u,d){var f=i.updateQueue;Fi=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var L=S,O=L.next;L.next=null,v===null?p=O:v.next=O,v=L;var V=i.alternate;V!==null&&(V=V.updateQueue,S=V.lastBaseUpdate,S!==v&&(S===null?V.firstBaseUpdate=O:S.next=O,V.lastBaseUpdate=L))}if(p!==null){var H=f.baseState;v=0,V=O=L=null,S=p;do{var Y=S.lane,se=S.eventTime;if((d&Y)===Y){V!==null&&(V=V.next={eventTime:se,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ae=i,ce=S;switch(Y=o,se=u,ce.tag){case 1:if(ae=ce.payload,typeof ae=="function"){H=ae.call(se,H,Y);break e}H=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ce.payload,Y=typeof ae=="function"?ae.call(se,H,Y):ae,Y==null)break e;H=G({},H,Y);break e;case 2:Fi=!0}}S.callback!==null&&S.lane!==0&&(i.flags|=64,Y=f.effects,Y===null?f.effects=[S]:Y.push(S))}else se={eventTime:se,lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},V===null?(O=V=se,L=H):V=V.next=se,v|=Y;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(V===null&&(L=H),f.baseState=L,f.firstBaseUpdate=O,f.lastBaseUpdate=V,o=f.shared.interleaved,o!==null){f=o;do v|=f.lane,f=f.next;while(f!==o)}else p===null&&(f.shared.lanes=0);Er|=v,i.lanes=v,i.memoizedState=H}}function gg(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],f=d.callback;if(f!==null){if(d.callback=null,d=u,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var mo={},jn=ki(mo),yo=ki(mo),Eo=ki(mo);function mr(i){if(i===mo)throw Error(t(174));return i}function fc(i,o){switch(Xe(Eo,o),Xe(yo,i),Xe(jn,mo),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lr(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=lr(o,i)}be(jn),Xe(jn,o)}function ss(){be(jn),be(yo),be(Eo)}function _g(i){mr(Eo.current);var o=mr(jn.current),u=lr(o,i.type);o!==u&&(Xe(yo,i),Xe(jn,u))}function gc(i){yo.current===i&&(be(jn),be(yo))}var Ve=ki(0);function Bl(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var _c=[];function pc(){for(var i=0;i<_c.length;i++)_c[i]._workInProgressVersionPrimary=null;_c.length=0}var Yl=P.ReactCurrentDispatcher,mc=P.ReactCurrentBatchConfig,yr=0,Ke=null,nt=null,ot=null,Vl=!1,vo=!1,xo=0,Ay=0;function vt(){throw Error(t(321))}function yc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!En(i[u],o[u]))return!1;return!0}function Ec(i,o,u,d,f,p){if(yr=p,Ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Yl.current=i===null||i.memoizedState===null?Ny:zy,i=u(d,f),vo){p=0;do{if(vo=!1,xo=0,25<=p)throw Error(t(301));p+=1,ot=nt=null,o.updateQueue=null,Yl.current=Gy,i=u(d,f)}while(vo)}if(Yl.current=Hl,o=nt!==null&&nt.next!==null,yr=0,ot=nt=Ke=null,Vl=!1,o)throw Error(t(300));return i}function vc(){var i=xo!==0;return xo=0,i}function Un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ke.memoizedState=ot=i:ot=ot.next=i,ot}function ln(){if(nt===null){var i=Ke.alternate;i=i!==null?i.memoizedState:null}else i=nt.next;var o=ot===null?Ke.memoizedState:ot.next;if(o!==null)ot=o,nt=i;else{if(i===null)throw Error(t(310));nt=i,i={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?Ke.memoizedState=ot=i:ot=ot.next=i}return ot}function wo(i,o){return typeof o=="function"?o(i):o}function xc(i){var o=ln(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=nt,f=d.baseQueue,p=u.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}d.baseQueue=f=p,u.pending=null}if(f!==null){p=f.next,d=d.baseState;var S=v=null,L=null,O=p;do{var V=O.lane;if((yr&V)===V)L!==null&&(L=L.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),d=O.hasEagerState?O.eagerState:i(d,O.action);else{var H={lane:V,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};L===null?(S=L=H,v=d):L=L.next=H,Ke.lanes|=V,Er|=V}O=O.next}while(O!==null&&O!==p);L===null?v=d:L.next=S,En(d,o.memoizedState)||(Nt=!0),o.memoizedState=d,o.baseState=v,o.baseQueue=L,u.lastRenderedState=d}if(i=u.interleaved,i!==null){f=i;do p=f.lane,Ke.lanes|=p,Er|=p,f=f.next;while(f!==i)}else f===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function wc(i){var o=ln(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=u.dispatch,f=u.pending,p=o.memoizedState;if(f!==null){u.pending=null;var v=f=f.next;do p=i(p,v.action),v=v.next;while(v!==f);En(p,o.memoizedState)||(Nt=!0),o.memoizedState=p,o.baseQueue===null&&(o.baseState=p),u.lastRenderedState=p}return[p,d]}function pg(){}function mg(i,o){var u=Ke,d=ln(),f=o(),p=!En(d.memoizedState,f);if(p&&(d.memoizedState=f,Nt=!0),d=d.queue,Cc(vg.bind(null,u,d,i),[i]),d.getSnapshot!==o||p||ot!==null&&ot.memoizedState.tag&1){if(u.flags|=2048,Co(9,Eg.bind(null,u,d,f,o),void 0,null),lt===null)throw Error(t(349));yr&30||yg(u,o,f)}return f}function yg(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ke.updateQueue,o===null?(o={lastEffect:null,stores:null},Ke.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Eg(i,o,u,d){o.value=u,o.getSnapshot=d,xg(o)&&wg(i)}function vg(i,o,u){return u(function(){xg(o)&&wg(i)})}function xg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!En(i,u)}catch{return!0}}function wg(i){var o=ii(i,1);o!==null&&Sn(o,i,1,-1)}function Cg(i){var o=Un();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:i},o.queue=i,i=i.dispatch=Oy.bind(null,Ke,i),[o.memoizedState,i]}function Co(i,o,u,d){return i={tag:i,create:o,destroy:u,deps:d,next:null},o=Ke.updateQueue,o===null?(o={lastEffect:null,stores:null},Ke.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i)),i}function Sg(){return ln().memoizedState}function Kl(i,o,u,d){var f=Un();Ke.flags|=i,f.memoizedState=Co(1|o,u,void 0,d===void 0?null:d)}function Zl(i,o,u,d){var f=ln();d=d===void 0?null:d;var p=void 0;if(nt!==null){var v=nt.memoizedState;if(p=v.destroy,d!==null&&yc(d,v.deps)){f.memoizedState=Co(o,u,p,d);return}}Ke.flags|=i,f.memoizedState=Co(1|o,u,p,d)}function Tg(i,o){return Kl(8390656,8,i,o)}function Cc(i,o){return Zl(2048,8,i,o)}function Rg(i,o){return Zl(4,2,i,o)}function Ig(i,o){return Zl(4,4,i,o)}function Lg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Pg(i,o,u){return u=u!=null?u.concat([i]):null,Zl(4,4,Lg.bind(null,o,i),u)}function Sc(){}function Mg(i,o){var u=ln();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&yc(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function kg(i,o){var u=ln();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&yc(o,d[1])?d[0]:(i=i(),u.memoizedState=[i,o],i)}function Ag(i,o,u){return yr&21?(En(u,o)||(u=af(),Ke.lanes|=u,Er|=u,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Nt=!0),i.memoizedState=u)}function Dy(i,o){var u=Ne;Ne=u!==0&&4>u?u:4,i(!0);var d=mc.transition;mc.transition={};try{i(!1),o()}finally{Ne=u,mc.transition=d}}function Dg(){return ln().memoizedState}function Fy(i,o,u){var d=ji(i);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},Fg(i))Og(o,u);else if(u=hg(i,o,u,d),u!==null){var f=Mt();Sn(u,i,d,f),Ng(u,o,d)}}function Oy(i,o,u){var d=ji(i),f={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fg(i))Og(o,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=o.lastRenderedReducer,p!==null))try{var v=o.lastRenderedState,S=p(v,u);if(f.hasEagerState=!0,f.eagerState=S,En(S,v)){var L=o.interleaved;L===null?(f.next=f,hc(o)):(f.next=L.next,L.next=f),o.interleaved=f;return}}catch{}finally{}u=hg(i,o,f,d),u!==null&&(f=Mt(),Sn(u,i,d,f),Ng(u,o,d))}}function Fg(i){var o=i.alternate;return i===Ke||o!==null&&o===Ke}function Og(i,o){vo=Vl=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Ng(i,o,u){if(u&4194240){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Ru(i,u)}}var Hl={readContext:on,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},Ny={readContext:on,useCallback:function(i,o){return Un().memoizedState=[i,o===void 0?null:o],i},useContext:on,useEffect:Tg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Kl(4194308,4,Lg.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Kl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Kl(4,2,i,o)},useMemo:function(i,o){var u=Un();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var d=Un();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=Fy.bind(null,Ke,i),[d.memoizedState,i]},useRef:function(i){var o=Un();return i={current:i},o.memoizedState=i},useState:Cg,useDebugValue:Sc,useDeferredValue:function(i){return Un().memoizedState=i},useTransition:function(){var i=Cg(!1),o=i[0];return i=Dy.bind(null,i[1]),Un().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var d=Ke,f=Un();if(Be){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),lt===null)throw Error(t(349));yr&30||yg(d,o,u)}f.memoizedState=u;var p={value:u,getSnapshot:o};return f.queue=p,Tg(vg.bind(null,d,p,i),[i]),d.flags|=2048,Co(9,Eg.bind(null,d,p,u,o),void 0,null),u},useId:function(){var i=Un(),o=lt.identifierPrefix;if(Be){var u=ni,d=ti;u=(d&~(1<<32-yn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=xo++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Ay++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},zy={readContext:on,useCallback:Mg,useContext:on,useEffect:Cc,useImperativeHandle:Pg,useInsertionEffect:Rg,useLayoutEffect:Ig,useMemo:kg,useReducer:xc,useRef:Sg,useState:function(){return xc(wo)},useDebugValue:Sc,useDeferredValue:function(i){var o=ln();return Ag(o,nt.memoizedState,i)},useTransition:function(){var i=xc(wo)[0],o=ln().memoizedState;return[i,o]},useMutableSource:pg,useSyncExternalStore:mg,useId:Dg,unstable_isNewReconciler:!1},Gy={readContext:on,useCallback:Mg,useContext:on,useEffect:Cc,useImperativeHandle:Pg,useInsertionEffect:Rg,useLayoutEffect:Ig,useMemo:kg,useReducer:wc,useRef:Sg,useState:function(){return wc(wo)},useDebugValue:Sc,useDeferredValue:function(i){var o=ln();return nt===null?o.memoizedState=i:Ag(o,nt.memoizedState,i)},useTransition:function(){var i=wc(wo)[0],o=ln().memoizedState;return[i,o]},useMutableSource:pg,useSyncExternalStore:mg,useId:Dg,unstable_isNewReconciler:!1};function xn(i,o){if(i&&i.defaultProps){o=G({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Tc(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:G({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var $l={isMounted:function(i){return(i=i._reactInternals)?hr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var d=Mt(),f=ji(i),p=ri(d,f);p.payload=o,u!=null&&(p.callback=u),o=Oi(i,p,f),o!==null&&(Sn(o,i,f,d),Wl(o,i,f))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=Mt(),f=ji(i),p=ri(d,f);p.tag=1,p.payload=o,u!=null&&(p.callback=u),o=Oi(i,p,f),o!==null&&(Sn(o,i,f,d),Wl(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Mt(),d=ji(i),f=ri(u,d);f.tag=2,o!=null&&(f.callback=o),o=Oi(i,f,d),o!==null&&(Sn(o,i,d,u),Wl(o,i,d))}};function zg(i,o,u,d,f,p,v){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,p,v):o.prototype&&o.prototype.isPureReactComponent?!ao(u,d)||!ao(f,p):!0}function Gg(i,o,u){var d=!1,f=Ai,p=o.contextType;return typeof p=="object"&&p!==null?p=on(p):(f=Ot(o)?fr:Et.current,d=o.contextTypes,p=(d=d!=null)?Qr(i,f):Ai),o=new o(u,p),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=$l,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=f,i.__reactInternalMemoizedMaskedChildContext=p),o}function jg(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&$l.enqueueReplaceState(o,o.state,null)}function Rc(i,o,u,d){var f=i.stateNode;f.props=u,f.state=i.memoizedState,f.refs={},dc(i);var p=o.contextType;typeof p=="object"&&p!==null?f.context=on(p):(p=Ot(o)?fr:Et.current,f.context=Qr(i,p)),f.state=i.memoizedState,p=o.getDerivedStateFromProps,typeof p=="function"&&(Tc(i,o,p,u),f.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(o=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),o!==f.state&&$l.enqueueReplaceState(f,f.state,null),bl(i,u,f,d),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308)}function os(i,o){try{var u="",d=o;do u+=ue(d),d=d.return;while(d);var f=u}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:i,source:o,stack:f,digest:null}}function Ic(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Lc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var jy=typeof WeakMap=="function"?WeakMap:Map;function Ug(i,o,u){u=ri(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){ia||(ia=!0,bc=d),Lc(i,o)},u}function Xg(i,o,u){u=ri(-1,u),u.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;u.payload=function(){return d(f)},u.callback=function(){Lc(i,o)}}var p=i.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(u.callback=function(){Lc(i,o),typeof d!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var v=o.stack;this.componentDidCatch(o.value,{componentStack:v!==null?v:""})}),u}function Wg(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new jy;var f=new Set;d.set(o,f)}else f=d.get(o),f===void 0&&(f=new Set,d.set(o,f));f.has(u)||(f.add(u),i=Jy.bind(null,i,o,u),o.then(i,i))}function bg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Bg(i,o,u,d,f){return i.mode&1?(i.flags|=65536,i.lanes=f,i):(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ri(-1,1),o.tag=2,Oi(u,o,1))),u.lanes|=1),i)}var Uy=P.ReactCurrentOwner,Nt=!1;function Pt(i,o,u,d){o.child=i===null?cg(o,null,u,d):ns(o,i.child,u,d)}function Yg(i,o,u,d,f){u=u.render;var p=o.ref;return rs(o,f),d=Ec(i,o,u,d,p,f),u=vc(),i!==null&&!Nt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f,si(i,o,f)):(Be&&u&&nc(o),o.flags|=1,Pt(i,o,d,f),o.child)}function Vg(i,o,u,d,f){if(i===null){var p=u.type;return typeof p=="function"&&!$c(p)&&p.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=p,Kg(i,o,p,d,f)):(i=ua(u.type,null,d,o,o.mode,f),i.ref=o.ref,i.return=o,o.child=i)}if(p=i.child,!(i.lanes&f)){var v=p.memoizedProps;if(u=u.compare,u=u!==null?u:ao,u(v,d)&&i.ref===o.ref)return si(i,o,f)}return o.flags|=1,i=Xi(p,d),i.ref=o.ref,i.return=o,o.child=i}function Kg(i,o,u,d,f){if(i!==null){var p=i.memoizedProps;if(ao(p,d)&&i.ref===o.ref)if(Nt=!1,o.pendingProps=d=p,(i.lanes&f)!==0)i.flags&131072&&(Nt=!0);else return o.lanes=i.lanes,si(i,o,f)}return Pc(i,o,u,d,f)}function Zg(i,o,u){var d=o.pendingProps,f=d.children,p=i!==null?i.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(as,$t),$t|=u;else{if(!(u&1073741824))return i=p!==null?p.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Xe(as,$t),$t|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=p!==null?p.baseLanes:u,Xe(as,$t),$t|=d}else p!==null?(d=p.baseLanes|u,o.memoizedState=null):d=u,Xe(as,$t),$t|=d;return Pt(i,o,f,u),o.child}function Hg(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Pc(i,o,u,d,f){var p=Ot(u)?fr:Et.current;return p=Qr(o,p),rs(o,f),u=Ec(i,o,u,d,p,f),d=vc(),i!==null&&!Nt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f,si(i,o,f)):(Be&&d&&nc(o),o.flags|=1,Pt(i,o,u,f),o.child)}function $g(i,o,u,d,f){if(Ot(u)){var p=!0;Fl(o)}else p=!1;if(rs(o,f),o.stateNode===null)Ql(i,o),Gg(o,u,d),Rc(o,u,d,f),d=!0;else if(i===null){var v=o.stateNode,S=o.memoizedProps;v.props=S;var L=v.context,O=u.contextType;typeof O=="object"&&O!==null?O=on(O):(O=Ot(u)?fr:Et.current,O=Qr(o,O));var V=u.getDerivedStateFromProps,H=typeof V=="function"||typeof v.getSnapshotBeforeUpdate=="function";H||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==d||L!==O)&&jg(o,v,d,O),Fi=!1;var Y=o.memoizedState;v.state=Y,bl(o,d,v,f),L=o.memoizedState,S!==d||Y!==L||Ft.current||Fi?(typeof V=="function"&&(Tc(o,u,V,d),L=o.memoizedState),(S=Fi||zg(o,u,S,d,Y,L,O))?(H||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=L),v.props=d,v.state=L,v.context=O,d=S):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{v=o.stateNode,dg(i,o),S=o.memoizedProps,O=o.type===o.elementType?S:xn(o.type,S),v.props=O,H=o.pendingProps,Y=v.context,L=u.contextType,typeof L=="object"&&L!==null?L=on(L):(L=Ot(u)?fr:Et.current,L=Qr(o,L));var se=u.getDerivedStateFromProps;(V=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==H||Y!==L)&&jg(o,v,d,L),Fi=!1,Y=o.memoizedState,v.state=Y,bl(o,d,v,f);var ae=o.memoizedState;S!==H||Y!==ae||Ft.current||Fi?(typeof se=="function"&&(Tc(o,u,se,d),ae=o.memoizedState),(O=Fi||zg(o,u,O,d,Y,ae,L)||!1)?(V||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ae,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ae,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ae),v.props=d,v.state=ae,v.context=L,d=O):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),d=!1)}return Mc(i,o,u,d,p,f)}function Mc(i,o,u,d,f,p){Hg(i,o);var v=(o.flags&128)!==0;if(!d&&!v)return f&&tg(o,u,!1),si(i,o,p);d=o.stateNode,Uy.current=o;var S=v&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&v?(o.child=ns(o,i.child,null,p),o.child=ns(o,null,S,p)):Pt(i,o,S,p),o.memoizedState=d.state,f&&tg(o,u,!0),o.child}function qg(i){var o=i.stateNode;o.pendingContext?Jf(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Jf(i,o.context,!1),fc(i,o.containerInfo)}function Qg(i,o,u,d,f){return ts(),oc(f),o.flags|=256,Pt(i,o,u,d),o.child}var kc={dehydrated:null,treeContext:null,retryLane:0};function Ac(i){return{baseLanes:i,cachePool:null,transitions:null}}function Jg(i,o,u){var d=o.pendingProps,f=Ve.current,p=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=i!==null&&i.memoizedState===null?!1:(f&2)!==0),S?(p=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(f|=1),Xe(Ve,f&1),i===null)return sc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(v=d.children,i=d.fallback,p?(d=o.mode,p=o.child,v={mode:"hidden",children:v},!(d&1)&&p!==null?(p.childLanes=0,p.pendingProps=v):p=ca(v,d,0,null),i=Cr(i,d,u,null),p.return=o,i.return=o,p.sibling=i,o.child=p,o.child.memoizedState=Ac(u),o.memoizedState=kc,i):Dc(o,v));if(f=i.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return Xy(i,o,v,d,S,f,u);if(p){p=d.fallback,v=o.mode,f=i.child,S=f.sibling;var L={mode:"hidden",children:d.children};return!(v&1)&&o.child!==f?(d=o.child,d.childLanes=0,d.pendingProps=L,o.deletions=null):(d=Xi(f,L),d.subtreeFlags=f.subtreeFlags&14680064),S!==null?p=Xi(S,p):(p=Cr(p,v,u,null),p.flags|=2),p.return=o,d.return=o,d.sibling=p,o.child=d,d=p,p=o.child,v=i.child.memoizedState,v=v===null?Ac(u):{baseLanes:v.baseLanes|u,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=i.childLanes&~u,o.memoizedState=kc,d}return p=i.child,i=p.sibling,d=Xi(p,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=u),d.return=o,d.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=d,o.memoizedState=null,d}function Dc(i,o){return o=ca({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function ql(i,o,u,d){return d!==null&&oc(d),ns(o,i.child,null,u),i=Dc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Xy(i,o,u,d,f,p,v){if(u)return o.flags&256?(o.flags&=-257,d=Ic(Error(t(422))),ql(i,o,v,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(p=d.fallback,f=o.mode,d=ca({mode:"visible",children:d.children},f,0,null),p=Cr(p,f,v,null),p.flags|=2,d.return=o,p.return=o,d.sibling=p,o.child=d,o.mode&1&&ns(o,i.child,null,v),o.child.memoizedState=Ac(v),o.memoizedState=kc,p);if(!(o.mode&1))return ql(i,o,v,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var S=d.dgst;return d=S,p=Error(t(419)),d=Ic(p,d,void 0),ql(i,o,v,d)}if(S=(v&i.childLanes)!==0,Nt||S){if(d=lt,d!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(d.suspendedLanes|v)?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,ii(i,f),Sn(d,i,f,-1))}return Hc(),d=Ic(Error(t(421))),ql(i,o,v,d)}return f.data==="$?"?(o.flags|=128,o.child=i.child,o=e1.bind(null,i),f._reactRetry=o,null):(i=p.treeContext,Ht=Mi(f.nextSibling),Zt=o,Be=!0,vn=null,i!==null&&(rn[sn++]=ti,rn[sn++]=ni,rn[sn++]=gr,ti=i.id,ni=i.overflow,gr=o),o=Dc(o,d.children),o.flags|=4096,o)}function e_(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),cc(i.return,o,u)}function Fc(i,o,u,d,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:f}:(p.isBackwards=o,p.rendering=null,p.renderingStartTime=0,p.last=d,p.tail=u,p.tailMode=f)}function t_(i,o,u){var d=o.pendingProps,f=d.revealOrder,p=d.tail;if(Pt(i,o,d.children,u),d=Ve.current,d&2)d=d&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&e_(i,u,o);else if(i.tag===19)e_(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Xe(Ve,d),!(o.mode&1))o.memoizedState=null;else switch(f){case"forwards":for(u=o.child,f=null;u!==null;)i=u.alternate,i!==null&&Bl(i)===null&&(f=u),u=u.sibling;u=f,u===null?(f=o.child,o.child=null):(f=u.sibling,u.sibling=null),Fc(o,!1,f,u,p);break;case"backwards":for(u=null,f=o.child,o.child=null;f!==null;){if(i=f.alternate,i!==null&&Bl(i)===null){o.child=f;break}i=f.sibling,f.sibling=u,u=f,f=i}Fc(o,!0,u,null,p);break;case"together":Fc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ql(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function si(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Er|=o.lanes,!(u&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Xi(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Xi(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function Wy(i,o,u){switch(o.tag){case 3:qg(o),ts();break;case 5:_g(o);break;case 1:Ot(o.type)&&Fl(o);break;case 4:fc(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,f=o.memoizedProps.value;Xe(Ul,d._currentValue),d._currentValue=f;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Xe(Ve,Ve.current&1),o.flags|=128,null):u&o.child.childLanes?Jg(i,o,u):(Xe(Ve,Ve.current&1),i=si(i,o,u),i!==null?i.sibling:null);Xe(Ve,Ve.current&1);break;case 19:if(d=(u&o.childLanes)!==0,i.flags&128){if(d)return t_(i,o,u);o.flags|=128}if(f=o.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Xe(Ve,Ve.current),d)break;return null;case 22:case 23:return o.lanes=0,Zg(i,o,u)}return si(i,o,u)}var n_,Oc,i_,r_;n_=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Oc=function(){},i_=function(i,o,u,d){var f=i.memoizedProps;if(f!==d){i=o.stateNode,mr(jn.current);var p=null;switch(u){case"input":f=Hn(i,f),d=Hn(i,d),p=[];break;case"select":f=G({},f,{value:void 0}),d=G({},d,{value:void 0}),p=[];break;case"textarea":f=_n(i,f),d=_n(i,d),p=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=kl)}Ur(u,d);var v;u=null;for(O in f)if(!d.hasOwnProperty(O)&&f.hasOwnProperty(O)&&f[O]!=null)if(O==="style"){var S=f[O];for(v in S)S.hasOwnProperty(v)&&(u||(u={}),u[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(s.hasOwnProperty(O)?p||(p=[]):(p=p||[]).push(O,null));for(O in d){var L=d[O];if(S=f!=null?f[O]:void 0,d.hasOwnProperty(O)&&L!==S&&(L!=null||S!=null))if(O==="style")if(S){for(v in S)!S.hasOwnProperty(v)||L&&L.hasOwnProperty(v)||(u||(u={}),u[v]="");for(v in L)L.hasOwnProperty(v)&&S[v]!==L[v]&&(u||(u={}),u[v]=L[v])}else u||(p||(p=[]),p.push(O,u)),u=L;else O==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,S=S?S.__html:void 0,L!=null&&S!==L&&(p=p||[]).push(O,L)):O==="children"?typeof L!="string"&&typeof L!="number"||(p=p||[]).push(O,""+L):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(s.hasOwnProperty(O)?(L!=null&&O==="onScroll"&&We("scroll",i),p||S===L||(p=[])):(p=p||[]).push(O,L))}u&&(p=p||[]).push("style",u);var O=p;(o.updateQueue=O)&&(o.flags|=4)}},r_=function(i,o,u,d){u!==d&&(o.flags|=4)};function So(i,o){if(!Be)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function xt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var f=i.child;f!==null;)u|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)u|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function by(i,o,u){var d=o.pendingProps;switch(ic(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(o),null;case 1:return Ot(o.type)&&Dl(),xt(o),null;case 3:return d=o.stateNode,ss(),be(Ft),be(Et),pc(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Gl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,vn!==null&&(Vc(vn),vn=null))),Oc(i,o),xt(o),null;case 5:gc(o);var f=mr(Eo.current);if(u=o.type,i!==null&&o.stateNode!=null)i_(i,o,u,d,f),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return xt(o),null}if(i=mr(jn.current),Gl(o)){d=o.stateNode,u=o.type;var p=o.memoizedProps;switch(d[Gn]=o,d[go]=p,i=(o.mode&1)!==0,u){case"dialog":We("cancel",d),We("close",d);break;case"iframe":case"object":case"embed":We("load",d);break;case"video":case"audio":for(f=0;f<co.length;f++)We(co[f],d);break;case"source":We("error",d);break;case"img":case"image":case"link":We("error",d),We("load",d);break;case"details":We("toggle",d);break;case"input":Fn(d,p),We("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!p.multiple},We("invalid",d);break;case"textarea":$n(d,p),We("invalid",d)}Ur(u,p),f=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?d.textContent!==S&&(p.suppressHydrationWarning!==!0&&Ml(d.textContent,S,i),f=["children",S]):typeof S=="number"&&d.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&Ml(d.textContent,S,i),f=["children",""+S]):s.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&We("scroll",d)}switch(u){case"input":Tt(d),Vt(d,p,!0);break;case"textarea":Tt(d),$e(d);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(d.onclick=kl)}d=f,o.updateQueue=d,d!==null&&(o.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Gr(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=v.createElement(u,{is:d.is}):(i=v.createElement(u),u==="select"&&(v=i,d.multiple?v.multiple=!0:d.size&&(v.size=d.size))):i=v.createElementNS(i,u),i[Gn]=o,i[go]=d,n_(i,o,!1,!1),o.stateNode=i;e:{switch(v=Xr(u,d),u){case"dialog":We("cancel",i),We("close",i),f=d;break;case"iframe":case"object":case"embed":We("load",i),f=d;break;case"video":case"audio":for(f=0;f<co.length;f++)We(co[f],i);f=d;break;case"source":We("error",i),f=d;break;case"img":case"image":case"link":We("error",i),We("load",i),f=d;break;case"details":We("toggle",i),f=d;break;case"input":Fn(i,d),f=Hn(i,d),We("invalid",i);break;case"option":f=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},f=G({},d,{value:void 0}),We("invalid",i);break;case"textarea":$n(i,d),f=_n(i,d),We("invalid",i);break;default:f=d}Ur(u,f),S=f;for(p in S)if(S.hasOwnProperty(p)){var L=S[p];p==="style"?hl(i,L):p==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&ar(i,L)):p==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&ur(i,L):typeof L=="number"&&ur(i,""+L):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(s.hasOwnProperty(p)?L!=null&&p==="onScroll"&&We("scroll",i):L!=null&&D(i,p,L,v))}switch(u){case"input":Tt(i),Vt(i,d,!1);break;case"textarea":Tt(i),$e(i);break;case"option":d.value!=null&&i.setAttribute("value",""+xe(d.value));break;case"select":i.multiple=!!d.multiple,p=d.value,p!=null?tn(i,!!d.multiple,p,!1):d.defaultValue!=null&&tn(i,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(i.onclick=kl)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return xt(o),null;case 6:if(i&&o.stateNode!=null)r_(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=mr(Eo.current),mr(jn.current),Gl(o)){if(d=o.stateNode,u=o.memoizedProps,d[Gn]=o,(p=d.nodeValue!==u)&&(i=Zt,i!==null))switch(i.tag){case 3:Ml(d.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ml(d.nodeValue,u,(i.mode&1)!==0)}p&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[Gn]=o,o.stateNode=d}return xt(o),null;case 13:if(be(Ve),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Be&&Ht!==null&&o.mode&1&&!(o.flags&128))lg(),ts(),o.flags|=98560,p=!1;else if(p=Gl(o),d!==null&&d.dehydrated!==null){if(i===null){if(!p)throw Error(t(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Gn]=o}else ts(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;xt(o),p=!1}else vn!==null&&(Vc(vn),vn=null),p=!0;if(!p)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(i===null||Ve.current&1?it===0&&(it=3):Hc())),o.updateQueue!==null&&(o.flags|=4),xt(o),null);case 4:return ss(),Oc(i,o),i===null&&ho(o.stateNode.containerInfo),xt(o),null;case 10:return uc(o.type._context),xt(o),null;case 17:return Ot(o.type)&&Dl(),xt(o),null;case 19:if(be(Ve),p=o.memoizedState,p===null)return xt(o),null;if(d=(o.flags&128)!==0,v=p.rendering,v===null)if(d)So(p,!1);else{if(it!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(v=Bl(i),v!==null){for(o.flags|=128,So(p,!1),d=v.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)p=u,i=d,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=i,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,i=v.dependencies,p.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Xe(Ve,Ve.current&1|2),o.child}i=i.sibling}p.tail!==null&&qe()>us&&(o.flags|=128,d=!0,So(p,!1),o.lanes=4194304)}else{if(!d)if(i=Bl(v),i!==null){if(o.flags|=128,d=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),So(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Be)return xt(o),null}else 2*qe()-p.renderingStartTime>us&&u!==1073741824&&(o.flags|=128,d=!0,So(p,!1),o.lanes=4194304);p.isBackwards?(v.sibling=o.child,o.child=v):(u=p.last,u!==null?u.sibling=v:o.child=v,p.last=v)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=qe(),o.sibling=null,u=Ve.current,Xe(Ve,d?u&1|2:u&1),o):(xt(o),null);case 22:case 23:return Zc(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?$t&1073741824&&(xt(o),o.subtreeFlags&6&&(o.flags|=8192)):xt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function By(i,o){switch(ic(o),o.tag){case 1:return Ot(o.type)&&Dl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ss(),be(Ft),be(Et),pc(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return gc(o),null;case 13:if(be(Ve),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ts()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return be(Ve),null;case 4:return ss(),null;case 10:return uc(o.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var Jl=!1,wt=!1,Yy=typeof WeakSet=="function"?WeakSet:Set,le=null;function ls(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){He(i,o,d)}else u.current=null}function Nc(i,o,u){try{u()}catch(d){He(i,o,d)}}var s_=!1;function Vy(i,o){if(Zu=El,i=zf(),Uu(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var f=d.anchorOffset,p=d.focusNode;d=d.focusOffset;try{u.nodeType,p.nodeType}catch{u=null;break e}var v=0,S=-1,L=-1,O=0,V=0,H=i,Y=null;t:for(;;){for(var se;H!==u||f!==0&&H.nodeType!==3||(S=v+f),H!==p||d!==0&&H.nodeType!==3||(L=v+d),H.nodeType===3&&(v+=H.nodeValue.length),(se=H.firstChild)!==null;)Y=H,H=se;for(;;){if(H===i)break t;if(Y===u&&++O===f&&(S=v),Y===p&&++V===d&&(L=v),(se=H.nextSibling)!==null)break;H=Y,Y=H.parentNode}H=se}u=S===-1||L===-1?null:{start:S,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Hu={focusedElem:i,selectionRange:u},El=!1,le=o;le!==null;)if(o=le,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,le=i;else for(;le!==null;){o=le;try{var ae=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ce=ae.memoizedProps,Qe=ae.memoizedState,A=o.stateNode,M=A.getSnapshotBeforeUpdate(o.elementType===o.type?ce:xn(o.type,ce),Qe);A.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var F=o.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Q){He(o,o.return,Q)}if(i=o.sibling,i!==null){i.return=o.return,le=i;break}le=o.return}return ae=s_,s_=!1,ae}function To(i,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&i)===i){var p=f.destroy;f.destroy=void 0,p!==void 0&&Nc(o,u,p)}f=f.next}while(f!==d)}}function ea(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function zc(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function o_(i){var o=i.alternate;o!==null&&(i.alternate=null,o_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Gn],delete o[go],delete o[Ju],delete o[Ly],delete o[Py])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function l_(i){return i.tag===5||i.tag===3||i.tag===4}function a_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||l_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gc(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=kl));else if(d!==4&&(i=i.child,i!==null))for(Gc(i,o,u),i=i.sibling;i!==null;)Gc(i,o,u),i=i.sibling}function jc(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(jc(i,o,u),i=i.sibling;i!==null;)jc(i,o,u),i=i.sibling}var dt=null,wn=!1;function Ni(i,o,u){for(u=u.child;u!==null;)u_(i,o,u),u=u.sibling}function u_(i,o,u){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(fl,u)}catch{}switch(u.tag){case 5:wt||ls(u,o);case 6:var d=dt,f=wn;dt=null,Ni(i,o,u),dt=d,wn=f,dt!==null&&(wn?(i=dt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):dt.removeChild(u.stateNode));break;case 18:dt!==null&&(wn?(i=dt,u=u.stateNode,i.nodeType===8?Qu(i.parentNode,u):i.nodeType===1&&Qu(i,u),no(i)):Qu(dt,u.stateNode));break;case 4:d=dt,f=wn,dt=u.stateNode.containerInfo,wn=!0,Ni(i,o,u),dt=d,wn=f;break;case 0:case 11:case 14:case 15:if(!wt&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var p=f,v=p.destroy;p=p.tag,v!==void 0&&(p&2||p&4)&&Nc(u,o,v),f=f.next}while(f!==d)}Ni(i,o,u);break;case 1:if(!wt&&(ls(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(S){He(u,o,S)}Ni(i,o,u);break;case 21:Ni(i,o,u);break;case 22:u.mode&1?(wt=(d=wt)||u.memoizedState!==null,Ni(i,o,u),wt=d):Ni(i,o,u);break;default:Ni(i,o,u)}}function c_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new Yy),o.forEach(function(d){var f=t1.bind(null,i,d);u.has(d)||(u.add(d),d.then(f,f))})}}function Cn(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var f=u[d];try{var p=i,v=o,S=v;e:for(;S!==null;){switch(S.tag){case 5:dt=S.stateNode,wn=!1;break e;case 3:dt=S.stateNode.containerInfo,wn=!0;break e;case 4:dt=S.stateNode.containerInfo,wn=!0;break e}S=S.return}if(dt===null)throw Error(t(160));u_(p,v,f),dt=null,wn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(O){He(f,o,O)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)h_(o,i),o=o.sibling}function h_(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Cn(o,i),Xn(i),d&4){try{To(3,i,i.return),ea(3,i)}catch(ce){He(i,i.return,ce)}try{To(5,i,i.return)}catch(ce){He(i,i.return,ce)}}break;case 1:Cn(o,i),Xn(i),d&512&&u!==null&&ls(u,u.return);break;case 5:if(Cn(o,i),Xn(i),d&512&&u!==null&&ls(u,u.return),i.flags&32){var f=i.stateNode;try{ur(f,"")}catch(ce){He(i,i.return,ce)}}if(d&4&&(f=i.stateNode,f!=null)){var p=i.memoizedProps,v=u!==null?u.memoizedProps:p,S=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&Jt(f,p),Xr(S,v);var O=Xr(S,p);for(v=0;v<L.length;v+=2){var V=L[v],H=L[v+1];V==="style"?hl(f,H):V==="dangerouslySetInnerHTML"?ar(f,H):V==="children"?ur(f,H):D(f,V,H,O)}switch(S){case"input":pt(f,p);break;case"textarea":qn(f,p);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var se=p.value;se!=null?tn(f,!!p.multiple,se,!1):Y!==!!p.multiple&&(p.defaultValue!=null?tn(f,!!p.multiple,p.defaultValue,!0):tn(f,!!p.multiple,p.multiple?[]:"",!1))}f[go]=p}catch(ce){He(i,i.return,ce)}}break;case 6:if(Cn(o,i),Xn(i),d&4){if(i.stateNode===null)throw Error(t(162));f=i.stateNode,p=i.memoizedProps;try{f.nodeValue=p}catch(ce){He(i,i.return,ce)}}break;case 3:if(Cn(o,i),Xn(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{no(o.containerInfo)}catch(ce){He(i,i.return,ce)}break;case 4:Cn(o,i),Xn(i);break;case 13:Cn(o,i),Xn(i),f=i.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(Wc=qe())),d&4&&c_(i);break;case 22:if(V=u!==null&&u.memoizedState!==null,i.mode&1?(wt=(O=wt)||V,Cn(o,i),wt=O):Cn(o,i),Xn(i),d&8192){if(O=i.memoizedState!==null,(i.stateNode.isHidden=O)&&!V&&i.mode&1)for(le=i,V=i.child;V!==null;){for(H=le=V;le!==null;){switch(Y=le,se=Y.child,Y.tag){case 0:case 11:case 14:case 15:To(4,Y,Y.return);break;case 1:ls(Y,Y.return);var ae=Y.stateNode;if(typeof ae.componentWillUnmount=="function"){d=Y,u=Y.return;try{o=d,ae.props=o.memoizedProps,ae.state=o.memoizedState,ae.componentWillUnmount()}catch(ce){He(d,u,ce)}}break;case 5:ls(Y,Y.return);break;case 22:if(Y.memoizedState!==null){g_(H);continue}}se!==null?(se.return=Y,le=se):g_(H)}V=V.sibling}e:for(V=null,H=i;;){if(H.tag===5){if(V===null){V=H;try{f=H.stateNode,O?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=H.stateNode,L=H.memoizedProps.style,v=L!=null&&L.hasOwnProperty("display")?L.display:null,S.style.display=jr("display",v))}catch(ce){He(i,i.return,ce)}}}else if(H.tag===6){if(V===null)try{H.stateNode.nodeValue=O?"":H.memoizedProps}catch(ce){He(i,i.return,ce)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===i)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===i)break e;for(;H.sibling===null;){if(H.return===null||H.return===i)break e;V===H&&(V=null),H=H.return}V===H&&(V=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:Cn(o,i),Xn(i),d&4&&c_(i);break;case 21:break;default:Cn(o,i),Xn(i)}}function Xn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(l_(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(ur(f,""),d.flags&=-33);var p=a_(i);jc(i,p,f);break;case 3:case 4:var v=d.stateNode.containerInfo,S=a_(i);Gc(i,S,v);break;default:throw Error(t(161))}}catch(L){He(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Ky(i,o,u){le=i,d_(i)}function d_(i,o,u){for(var d=(i.mode&1)!==0;le!==null;){var f=le,p=f.child;if(f.tag===22&&d){var v=f.memoizedState!==null||Jl;if(!v){var S=f.alternate,L=S!==null&&S.memoizedState!==null||wt;S=Jl;var O=wt;if(Jl=v,(wt=L)&&!O)for(le=f;le!==null;)v=le,L=v.child,v.tag===22&&v.memoizedState!==null?__(f):L!==null?(L.return=v,le=L):__(f);for(;p!==null;)le=p,d_(p),p=p.sibling;le=f,Jl=S,wt=O}f_(i)}else f.subtreeFlags&8772&&p!==null?(p.return=f,le=p):f_(i)}}function f_(i){for(;le!==null;){var o=le;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:wt||ea(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!wt)if(u===null)d.componentDidMount();else{var f=o.elementType===o.type?u.memoizedProps:xn(o.type,u.memoizedProps);d.componentDidUpdate(f,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var p=o.updateQueue;p!==null&&gg(o,p,d);break;case 3:var v=o.updateQueue;if(v!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}gg(o,v,u)}break;case 5:var S=o.stateNode;if(u===null&&o.flags&4){u=S;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var O=o.alternate;if(O!==null){var V=O.memoizedState;if(V!==null){var H=V.dehydrated;H!==null&&no(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wt||o.flags&512&&zc(o)}catch(Y){He(o,o.return,Y)}}if(o===i){le=null;break}if(u=o.sibling,u!==null){u.return=o.return,le=u;break}le=o.return}}function g_(i){for(;le!==null;){var o=le;if(o===i){le=null;break}var u=o.sibling;if(u!==null){u.return=o.return,le=u;break}le=o.return}}function __(i){for(;le!==null;){var o=le;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ea(4,o)}catch(L){He(o,u,L)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var f=o.return;try{d.componentDidMount()}catch(L){He(o,f,L)}}var p=o.return;try{zc(o)}catch(L){He(o,p,L)}break;case 5:var v=o.return;try{zc(o)}catch(L){He(o,v,L)}}}catch(L){He(o,o.return,L)}if(o===i){le=null;break}var S=o.sibling;if(S!==null){S.return=o.return,le=S;break}le=o.return}}var Zy=Math.ceil,ta=P.ReactCurrentDispatcher,Uc=P.ReactCurrentOwner,an=P.ReactCurrentBatchConfig,Le=0,lt=null,et=null,ft=0,$t=0,as=ki(0),it=0,Ro=null,Er=0,na=0,Xc=0,Io=null,zt=null,Wc=0,us=1/0,oi=null,ia=!1,bc=null,zi=null,ra=!1,Gi=null,sa=0,Lo=0,Bc=null,oa=-1,la=0;function Mt(){return Le&6?qe():oa!==-1?oa:oa=qe()}function ji(i){return i.mode&1?Le&2&&ft!==0?ft&-ft:ky.transition!==null?(la===0&&(la=af()),la):(i=Ne,i!==0||(i=window.event,i=i===void 0?16:mf(i.type)),i):1}function Sn(i,o,u,d){if(50<Lo)throw Lo=0,Bc=null,Error(t(185));qs(i,u,d),(!(Le&2)||i!==lt)&&(i===lt&&(!(Le&2)&&(na|=u),it===4&&Ui(i,ft)),Gt(i,d),u===1&&Le===0&&!(o.mode&1)&&(us=qe()+500,Ol&&Di()))}function Gt(i,o){var u=i.callbackNode;k0(i,o);var d=pl(i,i===lt?ft:0);if(d===0)u!==null&&sf(u),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(u!=null&&sf(u),o===1)i.tag===0?My(m_.bind(null,i)):ng(m_.bind(null,i)),Ry(function(){!(Le&6)&&Di()}),u=null;else{switch(uf(d)){case 1:u=Cu;break;case 4:u=of;break;case 16:u=dl;break;case 536870912:u=lf;break;default:u=dl}u=T_(u,p_.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function p_(i,o){if(oa=-1,la=0,Le&6)throw Error(t(327));var u=i.callbackNode;if(cs()&&i.callbackNode!==u)return null;var d=pl(i,i===lt?ft:0);if(d===0)return null;if(d&30||d&i.expiredLanes||o)o=aa(i,d);else{o=d;var f=Le;Le|=2;var p=E_();(lt!==i||ft!==o)&&(oi=null,us=qe()+500,xr(i,o));do try{qy();break}catch(S){y_(i,S)}while(!0);ac(),ta.current=p,Le=f,et!==null?o=0:(lt=null,ft=0,o=it)}if(o!==0){if(o===2&&(f=Su(i),f!==0&&(d=f,o=Yc(i,f))),o===1)throw u=Ro,xr(i,0),Ui(i,d),Gt(i,qe()),u;if(o===6)Ui(i,d);else{if(f=i.current.alternate,!(d&30)&&!Hy(f)&&(o=aa(i,d),o===2&&(p=Su(i),p!==0&&(d=p,o=Yc(i,p))),o===1))throw u=Ro,xr(i,0),Ui(i,d),Gt(i,qe()),u;switch(i.finishedWork=f,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:wr(i,zt,oi);break;case 3:if(Ui(i,d),(d&130023424)===d&&(o=Wc+500-qe(),10<o)){if(pl(i,0)!==0)break;if(f=i.suspendedLanes,(f&d)!==d){Mt(),i.pingedLanes|=i.suspendedLanes&f;break}i.timeoutHandle=qu(wr.bind(null,i,zt,oi),o);break}wr(i,zt,oi);break;case 4:if(Ui(i,d),(d&4194240)===d)break;for(o=i.eventTimes,f=-1;0<d;){var v=31-yn(d);p=1<<v,v=o[v],v>f&&(f=v),d&=~p}if(d=f,d=qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Zy(d/1960))-d,10<d){i.timeoutHandle=qu(wr.bind(null,i,zt,oi),d);break}wr(i,zt,oi);break;case 5:wr(i,zt,oi);break;default:throw Error(t(329))}}}return Gt(i,qe()),i.callbackNode===u?p_.bind(null,i):null}function Yc(i,o){var u=Io;return i.current.memoizedState.isDehydrated&&(xr(i,o).flags|=256),i=aa(i,o),i!==2&&(o=zt,zt=u,o!==null&&Vc(o)),i}function Vc(i){zt===null?zt=i:zt.push.apply(zt,i)}function Hy(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var f=u[d],p=f.getSnapshot;f=f.value;try{if(!En(p(),f))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ui(i,o){for(o&=~Xc,o&=~na,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-yn(o),d=1<<u;i[u]=-1,o&=~d}}function m_(i){if(Le&6)throw Error(t(327));cs();var o=pl(i,0);if(!(o&1))return Gt(i,qe()),null;var u=aa(i,o);if(i.tag!==0&&u===2){var d=Su(i);d!==0&&(o=d,u=Yc(i,d))}if(u===1)throw u=Ro,xr(i,0),Ui(i,o),Gt(i,qe()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,wr(i,zt,oi),Gt(i,qe()),null}function Kc(i,o){var u=Le;Le|=1;try{return i(o)}finally{Le=u,Le===0&&(us=qe()+500,Ol&&Di())}}function vr(i){Gi!==null&&Gi.tag===0&&!(Le&6)&&cs();var o=Le;Le|=1;var u=an.transition,d=Ne;try{if(an.transition=null,Ne=1,i)return i()}finally{Ne=d,an.transition=u,Le=o,!(Le&6)&&Di()}}function Zc(){$t=as.current,be(as)}function xr(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Ty(u)),et!==null)for(u=et.return;u!==null;){var d=u;switch(ic(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Dl();break;case 3:ss(),be(Ft),be(Et),pc();break;case 5:gc(d);break;case 4:ss();break;case 13:be(Ve);break;case 19:be(Ve);break;case 10:uc(d.type._context);break;case 22:case 23:Zc()}u=u.return}if(lt=i,et=i=Xi(i.current,null),ft=$t=o,it=0,Ro=null,Xc=na=Er=0,zt=Io=null,pr!==null){for(o=0;o<pr.length;o++)if(u=pr[o],d=u.interleaved,d!==null){u.interleaved=null;var f=d.next,p=u.pending;if(p!==null){var v=p.next;p.next=f,d.next=v}u.pending=d}pr=null}return i}function y_(i,o){do{var u=et;try{if(ac(),Yl.current=Hl,Vl){for(var d=Ke.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}Vl=!1}if(yr=0,ot=nt=Ke=null,vo=!1,xo=0,Uc.current=null,u===null||u.return===null){it=1,Ro=o,et=null;break}e:{var p=i,v=u.return,S=u,L=o;if(o=ft,S.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var O=L,V=S,H=V.tag;if(!(V.mode&1)&&(H===0||H===11||H===15)){var Y=V.alternate;Y?(V.updateQueue=Y.updateQueue,V.memoizedState=Y.memoizedState,V.lanes=Y.lanes):(V.updateQueue=null,V.memoizedState=null)}var se=bg(v);if(se!==null){se.flags&=-257,Bg(se,v,S,p,o),se.mode&1&&Wg(p,O,o),o=se,L=O;var ae=o.updateQueue;if(ae===null){var ce=new Set;ce.add(L),o.updateQueue=ce}else ae.add(L);break e}else{if(!(o&1)){Wg(p,O,o),Hc();break e}L=Error(t(426))}}else if(Be&&S.mode&1){var Qe=bg(v);if(Qe!==null){!(Qe.flags&65536)&&(Qe.flags|=256),Bg(Qe,v,S,p,o),oc(os(L,S));break e}}p=L=os(L,S),it!==4&&(it=2),Io===null?Io=[p]:Io.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,o&=-o,p.lanes|=o;var A=Ug(p,L,o);fg(p,A);break e;case 1:S=L;var M=p.type,F=p.stateNode;if(!(p.flags&128)&&(typeof M.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(zi===null||!zi.has(F)))){p.flags|=65536,o&=-o,p.lanes|=o;var Q=Xg(p,S,o);fg(p,Q);break e}}p=p.return}while(p!==null)}x_(u)}catch(de){o=de,et===u&&u!==null&&(et=u=u.return);continue}break}while(!0)}function E_(){var i=ta.current;return ta.current=Hl,i===null?Hl:i}function Hc(){(it===0||it===3||it===2)&&(it=4),lt===null||!(Er&268435455)&&!(na&268435455)||Ui(lt,ft)}function aa(i,o){var u=Le;Le|=2;var d=E_();(lt!==i||ft!==o)&&(oi=null,xr(i,o));do try{$y();break}catch(f){y_(i,f)}while(!0);if(ac(),Le=u,ta.current=d,et!==null)throw Error(t(261));return lt=null,ft=0,it}function $y(){for(;et!==null;)v_(et)}function qy(){for(;et!==null&&!w0();)v_(et)}function v_(i){var o=S_(i.alternate,i,$t);i.memoizedProps=i.pendingProps,o===null?x_(i):et=o,Uc.current=null}function x_(i){var o=i;do{var u=o.alternate;if(i=o.return,o.flags&32768){if(u=By(u,o),u!==null){u.flags&=32767,et=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{it=6,et=null;return}}else if(u=by(u,o,$t),u!==null){et=u;return}if(o=o.sibling,o!==null){et=o;return}et=o=i}while(o!==null);it===0&&(it=5)}function wr(i,o,u){var d=Ne,f=an.transition;try{an.transition=null,Ne=1,Qy(i,o,u,d)}finally{an.transition=f,Ne=d}return null}function Qy(i,o,u,d){do cs();while(Gi!==null);if(Le&6)throw Error(t(327));u=i.finishedWork;var f=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var p=u.lanes|u.childLanes;if(A0(i,p),i===lt&&(et=lt=null,ft=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||ra||(ra=!0,T_(dl,function(){return cs(),null})),p=(u.flags&15990)!==0,u.subtreeFlags&15990||p){p=an.transition,an.transition=null;var v=Ne;Ne=1;var S=Le;Le|=4,Uc.current=null,Vy(i,u),h_(u,i),yy(Hu),El=!!Zu,Hu=Zu=null,i.current=u,Ky(u),C0(),Le=S,Ne=v,an.transition=p}else i.current=u;if(ra&&(ra=!1,Gi=i,sa=f),p=i.pendingLanes,p===0&&(zi=null),R0(u.stateNode),Gt(i,qe()),o!==null)for(d=i.onRecoverableError,u=0;u<o.length;u++)f=o[u],d(f.value,{componentStack:f.stack,digest:f.digest});if(ia)throw ia=!1,i=bc,bc=null,i;return sa&1&&i.tag!==0&&cs(),p=i.pendingLanes,p&1?i===Bc?Lo++:(Lo=0,Bc=i):Lo=0,Di(),null}function cs(){if(Gi!==null){var i=uf(sa),o=an.transition,u=Ne;try{if(an.transition=null,Ne=16>i?16:i,Gi===null)var d=!1;else{if(i=Gi,Gi=null,sa=0,Le&6)throw Error(t(331));var f=Le;for(Le|=4,le=i.current;le!==null;){var p=le,v=p.child;if(le.flags&16){var S=p.deletions;if(S!==null){for(var L=0;L<S.length;L++){var O=S[L];for(le=O;le!==null;){var V=le;switch(V.tag){case 0:case 11:case 15:To(8,V,p)}var H=V.child;if(H!==null)H.return=V,le=H;else for(;le!==null;){V=le;var Y=V.sibling,se=V.return;if(o_(V),V===O){le=null;break}if(Y!==null){Y.return=se,le=Y;break}le=se}}}var ae=p.alternate;if(ae!==null){var ce=ae.child;if(ce!==null){ae.child=null;do{var Qe=ce.sibling;ce.sibling=null,ce=Qe}while(ce!==null)}}le=p}}if(p.subtreeFlags&2064&&v!==null)v.return=p,le=v;else e:for(;le!==null;){if(p=le,p.flags&2048)switch(p.tag){case 0:case 11:case 15:To(9,p,p.return)}var A=p.sibling;if(A!==null){A.return=p.return,le=A;break e}le=p.return}}var M=i.current;for(le=M;le!==null;){v=le;var F=v.child;if(v.subtreeFlags&2064&&F!==null)F.return=v,le=F;else e:for(v=M;le!==null;){if(S=le,S.flags&2048)try{switch(S.tag){case 0:case 11:case 15:ea(9,S)}}catch(de){He(S,S.return,de)}if(S===v){le=null;break e}var Q=S.sibling;if(Q!==null){Q.return=S.return,le=Q;break e}le=S.return}}if(Le=f,Di(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(fl,i)}catch{}d=!0}return d}finally{Ne=u,an.transition=o}}return!1}function w_(i,o,u){o=os(u,o),o=Ug(i,o,1),i=Oi(i,o,1),o=Mt(),i!==null&&(qs(i,1,o),Gt(i,o))}function He(i,o,u){if(i.tag===3)w_(i,i,u);else for(;o!==null;){if(o.tag===3){w_(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zi===null||!zi.has(d))){i=os(u,i),i=Xg(o,i,1),o=Oi(o,i,1),i=Mt(),o!==null&&(qs(o,1,i),Gt(o,i));break}}o=o.return}}function Jy(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),o=Mt(),i.pingedLanes|=i.suspendedLanes&u,lt===i&&(ft&u)===u&&(it===4||it===3&&(ft&130023424)===ft&&500>qe()-Wc?xr(i,0):Xc|=u),Gt(i,o)}function C_(i,o){o===0&&(i.mode&1?(o=_l,_l<<=1,!(_l&130023424)&&(_l=4194304)):o=1);var u=Mt();i=ii(i,o),i!==null&&(qs(i,o,u),Gt(i,u))}function e1(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),C_(i,u)}function t1(i,o){var u=0;switch(i.tag){case 13:var d=i.stateNode,f=i.memoizedState;f!==null&&(u=f.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),C_(i,u)}var S_;S_=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Ft.current)Nt=!0;else{if(!(i.lanes&u)&&!(o.flags&128))return Nt=!1,Wy(i,o,u);Nt=!!(i.flags&131072)}else Nt=!1,Be&&o.flags&1048576&&ig(o,zl,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Ql(i,o),i=o.pendingProps;var f=Qr(o,Et.current);rs(o,u),f=Ec(null,o,d,i,f,u);var p=vc();return o.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ot(d)?(p=!0,Fl(o)):p=!1,o.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,dc(o),f.updater=$l,o.stateNode=f,f._reactInternals=o,Rc(o,d,i,u),o=Mc(null,o,d,!0,p,u)):(o.tag=0,Be&&p&&nc(o),Pt(null,o,f,u),o=o.child),o;case 16:d=o.elementType;e:{switch(Ql(i,o),i=o.pendingProps,f=d._init,d=f(d._payload),o.type=d,f=o.tag=i1(d),i=xn(d,i),f){case 0:o=Pc(null,o,d,i,u);break e;case 1:o=$g(null,o,d,i,u);break e;case 11:o=Yg(null,o,d,i,u);break e;case 14:o=Vg(null,o,d,xn(d.type,i),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:xn(d,f),Pc(i,o,d,f,u);case 1:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:xn(d,f),$g(i,o,d,f,u);case 3:e:{if(qg(o),i===null)throw Error(t(387));d=o.pendingProps,p=o.memoizedState,f=p.element,dg(i,o),bl(o,d,null,u);var v=o.memoizedState;if(d=v.element,p.isDehydrated)if(p={element:d,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},o.updateQueue.baseState=p,o.memoizedState=p,o.flags&256){f=os(Error(t(423)),o),o=Qg(i,o,d,u,f);break e}else if(d!==f){f=os(Error(t(424)),o),o=Qg(i,o,d,u,f);break e}else for(Ht=Mi(o.stateNode.containerInfo.firstChild),Zt=o,Be=!0,vn=null,u=cg(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ts(),d===f){o=si(i,o,u);break e}Pt(i,o,d,u)}o=o.child}return o;case 5:return _g(o),i===null&&sc(o),d=o.type,f=o.pendingProps,p=i!==null?i.memoizedProps:null,v=f.children,$u(d,f)?v=null:p!==null&&$u(d,p)&&(o.flags|=32),Hg(i,o),Pt(i,o,v,u),o.child;case 6:return i===null&&sc(o),null;case 13:return Jg(i,o,u);case 4:return fc(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=ns(o,null,d,u):Pt(i,o,d,u),o.child;case 11:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:xn(d,f),Yg(i,o,d,f,u);case 7:return Pt(i,o,o.pendingProps,u),o.child;case 8:return Pt(i,o,o.pendingProps.children,u),o.child;case 12:return Pt(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,f=o.pendingProps,p=o.memoizedProps,v=f.value,Xe(Ul,d._currentValue),d._currentValue=v,p!==null)if(En(p.value,v)){if(p.children===f.children&&!Ft.current){o=si(i,o,u);break e}}else for(p=o.child,p!==null&&(p.return=o);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var L=S.firstContext;L!==null;){if(L.context===d){if(p.tag===1){L=ri(-1,u&-u),L.tag=2;var O=p.updateQueue;if(O!==null){O=O.shared;var V=O.pending;V===null?L.next=L:(L.next=V.next,V.next=L),O.pending=L}}p.lanes|=u,L=p.alternate,L!==null&&(L.lanes|=u),cc(p.return,u,o),S.lanes|=u;break}L=L.next}}else if(p.tag===10)v=p.type===o.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=u,S=v.alternate,S!==null&&(S.lanes|=u),cc(v,u,o),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===o){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Pt(i,o,f.children,u),o=o.child}return o;case 9:return f=o.type,d=o.pendingProps.children,rs(o,u),f=on(f),d=d(f),o.flags|=1,Pt(i,o,d,u),o.child;case 14:return d=o.type,f=xn(d,o.pendingProps),f=xn(d.type,f),Vg(i,o,d,f,u);case 15:return Kg(i,o,o.type,o.pendingProps,u);case 17:return d=o.type,f=o.pendingProps,f=o.elementType===d?f:xn(d,f),Ql(i,o),o.tag=1,Ot(d)?(i=!0,Fl(o)):i=!1,rs(o,u),Gg(o,d,f),Rc(o,d,f,u),Mc(null,o,d,!0,i,u);case 19:return t_(i,o,u);case 22:return Zg(i,o,u)}throw Error(t(156,o.tag))};function T_(i,o){return rf(i,o)}function n1(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(i,o,u,d){return new n1(i,o,u,d)}function $c(i){return i=i.prototype,!(!i||!i.isReactComponent)}function i1(i){if(typeof i=="function")return $c(i)?1:0;if(i!=null){if(i=i.$$typeof,i===$)return 11;if(i===ee)return 14}return 2}function Xi(i,o){var u=i.alternate;return u===null?(u=un(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function ua(i,o,u,d,f,p){var v=2;if(d=i,typeof i=="function")$c(i)&&(v=1);else if(typeof i=="string")v=5;else e:switch(i){case Z:return Cr(u.children,f,p,o);case j:v=8,f|=8;break;case b:return i=un(12,u,o,f|2),i.elementType=b,i.lanes=p,i;case te:return i=un(13,u,o,f),i.elementType=te,i.lanes=p,i;case J:return i=un(19,u,o,f),i.elementType=J,i.lanes=p,i;case K:return ca(u,f,p,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:v=10;break e;case ie:v=9;break e;case $:v=11;break e;case ee:v=14;break e;case ne:v=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=un(v,u,o,f),o.elementType=i,o.type=d,o.lanes=p,o}function Cr(i,o,u,d){return i=un(7,i,d,o),i.lanes=u,i}function ca(i,o,u,d){return i=un(22,i,d,o),i.elementType=K,i.lanes=u,i.stateNode={isHidden:!1},i}function qc(i,o,u){return i=un(6,i,null,o),i.lanes=u,i}function Qc(i,o,u){return o=un(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function r1(i,o,u,d,f){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tu(0),this.expirationTimes=Tu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tu(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Jc(i,o,u,d,f,p,v,S,L){return i=new r1(i,o,u,S,L),o===1?(o=1,p===!0&&(o|=8)):o=0,p=un(3,null,null,o),i.current=p,p.stateNode=i,p.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},dc(p),i}function s1(i,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:d==null?null:""+d,children:i,containerInfo:o,implementation:u}}function R_(i){if(!i)return Ai;i=i._reactInternals;e:{if(hr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Ot(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Ot(u))return eg(i,u,o)}return o}function I_(i,o,u,d,f,p,v,S,L){return i=Jc(u,d,!0,i,f,p,v,S,L),i.context=R_(null),u=i.current,d=Mt(),f=ji(u),p=ri(d,f),p.callback=o??null,Oi(u,p,f),i.current.lanes=f,qs(i,f,d),Gt(i,d),i}function ha(i,o,u,d){var f=o.current,p=Mt(),v=ji(f);return u=R_(u),o.context===null?o.context=u:o.pendingContext=u,o=ri(p,v),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Oi(f,o,v),i!==null&&(Sn(i,f,v,p),Wl(i,f,v)),v}function da(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function L_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function eh(i,o){L_(i,o),(i=i.alternate)&&L_(i,o)}var P_=typeof reportError=="function"?reportError:function(i){console.error(i)};function th(i){this._internalRoot=i}fa.prototype.render=th.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));ha(i,o,null,null)},fa.prototype.unmount=th.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;vr(function(){ha(null,i,null,null)}),o[Jn]=null}};function fa(i){this._internalRoot=i}fa.prototype.unstable_scheduleHydration=function(i){if(i){var o=df();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Ii.length&&o!==0&&o<Ii[u].priority;u++);Ii.splice(u,0,i),u===0&&_f(i)}};function nh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ga(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function M_(){}function o1(i,o,u,d,f){if(f){if(typeof d=="function"){var p=d;d=function(){var O=da(v);p.call(O)}}var v=I_(o,d,i,0,null,!1,!1,"",M_);return i._reactRootContainer=v,i[Jn]=v.current,ho(i.nodeType===8?i.parentNode:i),vr(),v}for(;f=i.lastChild;)i.removeChild(f);if(typeof d=="function"){var S=d;d=function(){var O=da(L);S.call(O)}}var L=Jc(i,0,!1,null,null,!1,!1,"",M_);return i._reactRootContainer=L,i[Jn]=L.current,ho(i.nodeType===8?i.parentNode:i),vr(function(){ha(o,L,u,d)}),L}function _a(i,o,u,d,f){var p=u._reactRootContainer;if(p){var v=p;if(typeof f=="function"){var S=f;f=function(){var L=da(v);S.call(L)}}ha(o,v,i,f)}else v=o1(u,o,i,f,d);return da(v)}cf=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=$s(o.pendingLanes);u!==0&&(Ru(o,u|1),Gt(o,qe()),!(Le&6)&&(us=qe()+500,Di()))}break;case 13:vr(function(){var d=ii(i,1);if(d!==null){var f=Mt();Sn(d,i,1,f)}}),eh(i,1)}},Iu=function(i){if(i.tag===13){var o=ii(i,134217728);if(o!==null){var u=Mt();Sn(o,i,134217728,u)}eh(i,134217728)}},hf=function(i){if(i.tag===13){var o=ji(i),u=ii(i,o);if(u!==null){var d=Mt();Sn(u,i,o,d)}eh(i,o)}},df=function(){return Ne},ff=function(i,o){var u=Ne;try{return Ne=i,o()}finally{Ne=u}},Vs=function(i,o,u){switch(o){case"input":if(pt(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var f=Al(d);if(!f)throw Error(t(90));Dn(d),pt(d,f)}}}break;case"textarea":qn(i,u);break;case"select":o=u.value,o!=null&&tn(i,!!u.multiple,o,!1)}},Zs=Kc,Rt=vr;var l1={usingClientEntryPoint:!1,Events:[_o,$r,Al,Ci,Ks,Kc]},Po={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a1={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=tf(i),i===null?null:i.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pa.isDisabled&&pa.supportsFiber)try{fl=pa.inject(a1),zn=pa}catch{}}return jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l1,jt.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nh(o))throw Error(t(200));return s1(i,o,null,u)},jt.createRoot=function(i,o){if(!nh(i))throw Error(t(299));var u=!1,d="",f=P_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(f=o.onRecoverableError)),o=Jc(i,1,!1,null,null,u,!1,d,f),i[Jn]=o.current,ho(i.nodeType===8?i.parentNode:i),new th(o)},jt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=tf(o),i=i===null?null:i.stateNode,i},jt.flushSync=function(i){return vr(i)},jt.hydrate=function(i,o,u){if(!ga(o))throw Error(t(200));return _a(null,i,o,!0,u)},jt.hydrateRoot=function(i,o,u){if(!nh(i))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,f=!1,p="",v=P_;if(u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onRecoverableError!==void 0&&(v=u.onRecoverableError)),o=I_(o,null,i,1,u??null,f,!1,p,v),i[Jn]=o.current,ho(i),d)for(i=0;i<d.length;i++)u=d[i],f=u._getVersion,f=f(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,f]:o.mutableSourceEagerHydrationData.push(u,f);return new fa(o)},jt.render=function(i,o,u){if(!ga(o))throw Error(t(200));return _a(null,i,o,!1,u)},jt.unmountComponentAtNode=function(i){if(!ga(i))throw Error(t(40));return i._reactRootContainer?(vr(function(){_a(null,null,i,!1,function(){i._reactRootContainer=null,i[Jn]=null})}),!0):!1},jt.unstable_batchedUpdates=Kc,jt.unstable_renderSubtreeIntoContainer=function(i,o,u,d){if(!ga(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return _a(i,o,u,!1,d)},jt.version="18.3.1-next-f1338f8080-20240426",jt}var j_;function E1(){if(j_)return sh.exports;j_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sh.exports=y1(),sh.exports}var U_;function v1(){if(U_)return ma;U_=1;var r=E1();return ma.createRoot=r.createRoot,ma.hydrateRoot=r.hydrateRoot,ma}var x1=v1();const w1="_drawButton_1cff8_1",C1={drawButton:w1},S1=({onClick:r})=>fe.jsx("button",{className:C1.drawButton,onClick:r,children:"Draw"}),rd={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class sd{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||rd[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const nl=6378137,Cs=Math.PI*nl,T1=[-Cs,-Cs,Cs,Cs],R1=[-180,-85,180,85],ya=nl*Math.log(Math.tan(Math.PI/2));class hs extends sd{constructor(e){super({code:e,units:"m",extent:T1,global:!0,worldExtent:R1,getPointResolution:function(t,n){return t/Math.cosh(n[1]/nl)}})}}const X_=[new hs("EPSG:3857"),new hs("EPSG:102100"),new hs("EPSG:102113"),new hs("EPSG:900913"),new hs("http://www.opengis.net/def/crs/EPSG/0/3857"),new hs("http://www.opengis.net/gml/srs/epsg.xml#3857")];function I1(r,e,t,n){const s=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(s));for(let l=0;l<s;l+=n){e[l]=Cs*r[l]/180;let a=nl*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));a>ya?a=ya:a<-ya&&(a=-ya),e[l+1]=a}return e}function L1(r,e,t,n){const s=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(s));for(let l=0;l<s;l+=n)e[l]=180*r[l]/Cs,e[l+1]=360*Math.atan(Math.exp(r[l+1]/nl))/Math.PI-90;return e}const P1=6378137,W_=[-180,-90,180,90],M1=Math.PI*P1/180;class Sr extends sd{constructor(e,t){super({code:e,units:"degrees",extent:W_,axisOrientation:t,global:!0,metersPerUnit:M1,worldExtent:W_})}}const b_=[new Sr("CRS:84"),new Sr("EPSG:4326","neu"),new Sr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Sr("urn:ogc:def:crs:OGC:2:84"),new Sr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Sr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Sr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Dh={};function k1(r){return Dh[r]||Dh[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function A1(r,e){Dh[r]=e}function il(r){for(const e in r)delete r[e]}function Ds(r){let e;for(e in r)return!1;return!e}let Ls={};function Wo(r,e,t){const n=r.getCode(),s=e.getCode();n in Ls||(Ls[n]={}),Ls[n][s]=t}function ah(r,e){return r in Ls&&e in Ls[r]?Ls[r][e]:null}const ut={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Fh(r){const e=Qt();for(let t=0,n=r.length;t<n;++t)Xo(e,r[t]);return e}function od(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function Vp(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Nr(r,e,t){let n,s;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?s=r[1]-t:r[3]<t?s=t-r[3]:s=0,n*n+s*s}function Fs(r,e){return ld(r,e[0],e[1])}function Ss(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function ld(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function Oh(r,e){const t=r[0],n=r[1],s=r[2],l=r[3],a=e[0],c=e[1];let h=ut.UNKNOWN;return a<t?h=h|ut.LEFT:a>s&&(h=h|ut.RIGHT),c<n?h=h|ut.BELOW:c>l&&(h=h|ut.ABOVE),h===ut.UNKNOWN&&(h=ut.INTERSECTING),h}function Qt(){return[1/0,1/0,-1/0,-1/0]}function pi(r,e,t,n,s){return s?(s[0]=r,s[1]=e,s[2]=t,s[3]=n,s):[r,e,t,n]}function rl(r){return pi(1/0,1/0,-1/0,-1/0,r)}function Kp(r,e){const t=r[0],n=r[1];return pi(t,n,t,n,e)}function ad(r,e,t,n,s){const l=rl(s);return Zp(l,r,e,t,n)}function bo(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function ud(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function Xo(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function Zp(r,e,t,n,s){for(;t<n;t+=s)D1(r,e[t],e[t+1]);return r}function D1(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function cd(r,e){let t;return t=e(Ja(r)),t||(t=e(eu(r)),t)||(t=e(tu(r)),t)||(t=e(mi(r)),t)?t:!1}function Bo(r){let e=0;return nu(r)||(e=Pe(r)*ht(r)),e}function Ja(r){return[r[0],r[1]]}function eu(r){return[r[2],r[1]]}function ir(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function F1(r,e){let t;if(e==="bottom-left")t=Ja(r);else if(e==="bottom-right")t=eu(r);else if(e==="top-left")t=mi(r);else if(e==="top-right")t=tu(r);else throw new Error("Invalid corner");return t}function Nh(r,e,t,n,s){const[l,a,c,h,g,_,m,y]=O1(r,e,t,n);return pi(Math.min(l,c,g,m),Math.min(a,h,_,y),Math.max(l,c,g,m),Math.max(a,h,_,y),s)}function O1(r,e,t,n){const s=e*n[0]/2,l=e*n[1]/2,a=Math.cos(t),c=Math.sin(t),h=s*a,g=s*c,_=l*a,m=l*c,y=r[0],x=r[1];return[y-h+m,x-g-_,y-h-m,x-g+_,y+h-m,x+g+_,y+h+m,x+g-_,y-h+m,x-g-_]}function ht(r){return r[3]-r[1]}function Pn(r,e,t){const n=t||Qt();return At(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):rl(n),n}function mi(r){return[r[0],r[3]]}function tu(r){return[r[2],r[3]]}function Pe(r){return r[2]-r[0]}function At(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function nu(r){return r[2]<r[0]||r[3]<r[1]}function N1(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function z1(r,e,t){let n=!1;const s=Oh(r,e),l=Oh(r,t);if(s===ut.INTERSECTING||l===ut.INTERSECTING)n=!0;else{const a=r[0],c=r[1],h=r[2],g=r[3],_=e[0],m=e[1],y=t[0],x=t[1],E=(x-m)/(y-_);let w,C;l&ut.ABOVE&&!(s&ut.ABOVE)&&(w=y-(x-g)/E,n=w>=a&&w<=h),!n&&l&ut.RIGHT&&!(s&ut.RIGHT)&&(C=x-(y-h)*E,n=C>=c&&C<=g),!n&&l&ut.BELOW&&!(s&ut.BELOW)&&(w=y-(x-c)/E,n=w>=a&&w<=h),!n&&l&ut.LEFT&&!(s&ut.LEFT)&&(C=x-(y-a)*E,n=C>=c&&C<=g)}return n}function Hp(r,e){const t=e.getExtent(),n=ir(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=Pe(t),a=Math.floor((n[0]-t[0])/s)*s;r[0]-=a,r[2]-=a}return r}function hd(r,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];Hp(r,e);const s=Pe(n);if(Pe(r)>s&&!t)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+s,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-s,r[3]]]}return[r]}function Ze(r,e,t){return Math.min(Math.max(r,e),t)}function G1(r,e,t,n,s,l){const a=s-t,c=l-n;if(a!==0||c!==0){const h=((r-t)*a+(e-n)*c)/(a*a+c*c);h>1?(t=s,n=l):h>0&&(t+=a*h,n+=c*h)}return di(r,e,t,n)}function di(r,e,t,n){const s=t-r,l=n-e;return s*s+l*l}function j1(r){const e=r.length;for(let n=0;n<e;n++){let s=n,l=Math.abs(r[n][n]);for(let c=n+1;c<e;c++){const h=Math.abs(r[c][n]);h>l&&(l=h,s=c)}if(l===0)return null;const a=r[s];r[s]=r[n],r[n]=a;for(let c=n+1;c<e;c++){const h=-r[c][n]/r[n][n];for(let g=n;g<e+1;g++)n==g?r[c][g]=0:r[c][g]+=h*r[n][g]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=r[n][e]/r[n][n];for(let s=n-1;s>=0;s--)r[s][e]-=r[s][n]*t[n]}return t}function B_(r){return r*180/Math.PI}function Ji(r){return r*Math.PI/180}function Ps(r,e){const t=r%e;return t*e<0?t+e:t}function qt(r,e,t){return r+t*(e-r)}function iu(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function Ea(r,e){return Math.floor(iu(r,e))}function va(r,e){return Math.ceil(iu(r,e))}function zh(r,e,t){if(r>=e&&r<t)return r;const n=t-e;return((r-e)%n+n)%n+e}function U1(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function Fa(r,e){let t=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function dd(r,e){const t=Math.cos(e),n=Math.sin(e),s=r[0]*t-r[1]*n,l=r[1]*t+r[0]*n;return r[0]=s,r[1]=l,r}function X1(r,e){return r[0]*=e,r[1]*=e,r}function $p(r,e){const t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function qp(r,e){return Math.sqrt($p(r,e))}function Qp(r,e){if(e.canWrapX()){const t=Pe(e.getExtent()),n=W1(r,e,t);n&&(r[0]-=n*t)}return r}function W1(r,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(t=t||Pe(n),s=Math.floor((r[0]-n[0])/t)),s}const b1=63710088e-1;function Gh(r,e,t){t=t||b1;const n=Ji(r[1]),s=Ji(e[1]),l=(s-n)/2,a=Ji(e[0]-r[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}const Oa=.9996,fn=.00669438,ru=fn*fn,su=ru*fn,Lr=fn/(1-fn),Y_=Math.sqrt(1-fn),Os=(1-Y_)/(1+Y_),Jp=Os*Os,fd=Jp*Os,gd=fd*Os,em=gd*Os,tm=1-fn/4-3*ru/64-5*su/256,B1=3*fn/8+3*ru/32+45*su/1024,Y1=15*ru/256+45*su/1024,V1=35*su/3072,K1=3/2*Os-27/32*fd+269/512*em,Z1=21/16*Jp-55/32*gd,H1=151/96*fd-417/128*em,$1=1097/512*gd,Na=6378137;function q1(r,e,t){const n=r-5e5,a=(t.north?e:e-1e7)/Oa/(Na*tm),c=a+K1*Math.sin(2*a)+Z1*Math.sin(4*a)+H1*Math.sin(6*a)+$1*Math.sin(8*a),h=Math.sin(c),g=h*h,_=Math.cos(c),m=h/_,y=m*m,x=y*y,E=1-fn*g,w=Math.sqrt(1-fn*g),C=Na/w,I=(1-fn)/E,R=Lr*_**2,D=R*R,P=n/(C*Oa),k=P*P,W=k*P,Z=W*P,j=Z*P,b=j*P,B=c-m/I*(k/2-Z/24*(5+3*y+10*R-4*D-9*Lr))+b/720*(61+90*y+298*R+45*x-252*Lr-3*D);let ie=(P-W/6*(1+2*y+R)+j/120*(5-2*R+28*y-3*D+8*Lr+24*x))/_;return ie=zh(ie+Ji(nm(t.number)),-Math.PI,Math.PI),[B_(ie),B_(B)]}const V_=-80,K_=84,Q1=-180,J1=180;function eE(r,e,t){r=zh(r,Q1,J1),e<V_?e=V_:e>K_&&(e=K_);const n=Ji(e),s=Math.sin(n),l=Math.cos(n),a=s/l,c=a*a,h=c*c,g=Ji(r),_=nm(t.number),m=Ji(_),y=Na/Math.sqrt(1-fn*s**2),x=Lr*l**2,E=l*zh(g-m,-Math.PI,Math.PI),w=E*E,C=w*E,I=C*E,R=I*E,D=R*E,P=Na*(tm*n-B1*Math.sin(2*n)+Y1*Math.sin(4*n)-V1*Math.sin(6*n)),k=Oa*y*(E+C/6*(1-c+x)+R/120*(5-18*c+h+72*x-58*Lr))+5e5;let W=Oa*(P+y*a*(w/2+I/24*(5-c+9*x+4*x**2)+D/720*(61-58*c+h+600*x-330*Lr)));return t.north||(W+=1e7),[k,W]}function nm(r){return(r-1)*6-180+3}const tE=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function im(r){let e=0;for(const s of tE){const l=r.match(s);if(l){e=parseInt(l[1]);break}}if(!e)return null;let t=0,n=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(n=!0,t=e-32600),t?{number:t,north:n}:null}function Z_(r,e){return function(t,n,s,l){const a=t.length;s=s>1?s:2,l=l??s,n||(s>2?n=t.slice():n=new Array(a));for(let c=0;c<a;c+=l){const h=t[c],g=t[c+1],_=r(h,g,e);n[c]=_[0],n[c+1]=_[1]}return n}}function nE(r){return im(r)?new sd({code:r,units:"m"}):null}function iE(r){const e=im(r.getCode());return e?{forward:Z_(eE,e),inverse:Z_(q1,e)}:null}function rm(...r){console.warn(...r)}const rE=[iE],sE=[nE];let jh=!0;function sm(r){jh=!1}function _d(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function Uh(r){A1(r.getCode(),r),Wo(r,r,_d)}function oE(r){r.forEach(Uh)}function Yt(r){if(typeof r!="string")return r;const e=k1(r);if(e)return e;for(const t of sE){const n=t(r);if(n)return n}return null}function H_(r,e,t,n){r=Yt(r);let s;const l=r.getPointResolutionFunc();if(l)s=l(e,t);else{const a=r.getUnits();if(a=="degrees"||n=="degrees")s=e;else{const c=md(r,Yt("EPSG:4326"));if(!c&&a!=="degrees")s=e*r.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=c(g,g,2);const _=Gh(g.slice(0,2),g.slice(2,4)),m=Gh(g.slice(4,6),g.slice(6,8));s=(_+m)/2}const h=r.getMetersPerUnit();h!==void 0&&(s/=h)}}return s}function $_(r){oE(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Wo(e,t,_d)})})}function lE(r,e,t,n){r.forEach(function(s){e.forEach(function(l){Wo(s,l,t),Wo(l,s,n)})})}function pd(r,e){return r?typeof r=="string"?Yt(r):r:Yt(e)}function aE(r){return function(e,t,n,s){const l=e.length;n=n!==void 0?n:2,s=s??n,t=t!==void 0?t:new Array(l);for(let a=0;a<l;a+=s){const c=r(e.slice(a,a+n)),h=c.length;for(let g=0,_=s;g<_;++g)t[a+g]=g>=h?e[a+g]:c[g]}return t}}function uE(r,e){return sm(),Ms(r,"EPSG:4326","EPSG:3857")}function uh(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||md(r,e)===_d)&&t}function md(r,e){const t=r.getCode(),n=e.getCode();let s=ah(t,n);if(s)return s;let l=null,a=null;for(const h of rE)l||(l=h(r)),a||(a=h(e));if(!l&&!a)return null;const c="EPSG:4326";if(a)if(l)s=ch(l.inverse,a.forward);else{const h=ah(t,c);h&&(s=ch(h,a.forward))}else{const h=ah(c,n);h&&(s=ch(l.inverse,h))}return s&&(Uh(r),Uh(e),Wo(r,e,s)),s}function ch(r,e){return function(t,n,s,l){return n=r(t,n,s,l),e(n,n,s,l)}}function za(r,e){const t=Yt(r),n=Yt(e);return md(t,n)}function Ms(r,e,t){const n=za(e,t);if(!n){const s=Yt(e).getCode(),l=Yt(t).getCode();throw new Error(`No transform available between ${s} and ${l}`)}return n(r,void 0,r.length)}function Xh(r,e){return r}function Rn(r,e){return jh&&!Fa(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(jh=!1,rm("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function om(r,e){return r}function $i(r,e){return r}function cE(){$_(X_),$_(b_),lE(b_,X_,I1,L1)}cE();const hE="_dropdown_qrt9l_1",dE="_dropdownTrigger_qrt9l_6",fE="_dropdownMenu_qrt9l_14",hh={dropdown:hE,dropdownTrigger:dE,dropdownMenu:fE},gE=({onInsertBefore:r,onInsertAfter:e})=>{const[t,n]=Ye.useState(!1),s=Ye.useRef(null);return Ye.useEffect(()=>{const l=a=>{s.current&&!s.current.contains(a.target)&&n(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),fe.jsxs("div",{className:hh.dropdown,ref:s,children:[fe.jsx("button",{className:hh.dropdownTrigger,onClick:()=>n(!t),children:"⋮"}),t&&fe.jsxs("div",{className:hh.dropdownMenu,children:[fe.jsx("button",{onClick:()=>{r(),n(!1)},children:"Insert Polygon Before"}),fe.jsx("button",{onClick:()=>{e(),n(!1)},children:"Insert Polygon After"})]})]})},_E=r=>{const[e,t]=Ye.useState(!1),[n,s]=Ye.useState({x:100,y:100}),[l,a]=Ye.useState({x:0,y:0});return Ye.useEffect(()=>{if(!r.current)return;const c=m=>{m.target.closest(".modal-header")&&(t(!0),a({x:m.clientX-n.x,y:m.clientY-n.y}))},h=m=>{e&&s({x:m.clientX-l.x,y:m.clientY-l.y})},g=()=>{t(!1)},_=r.current;return _.addEventListener("mousedown",c),window.addEventListener("mousemove",h),window.addEventListener("mouseup",g),()=>{_.removeEventListener("mousedown",c),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",g)}},[e,l,n,r]),{position:n}};var lm={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q_=Ar.createContext&&Ar.createContext(lm),pE=["attr","size","title"];function mE(r,e){if(r==null)return{};var t=yE(r,e),n,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(s=0;s<l.length;s++)n=l[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function yE(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Ga(){return Ga=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ga.apply(this,arguments)}function Q_(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function ja(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q_(Object(t),!0).forEach(function(n){EE(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Q_(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function EE(r,e,t){return e=vE(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vE(r){var e=xE(r,"string");return typeof e=="symbol"?e:e+""}function xE(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function am(r){return r&&r.map((e,t)=>Ar.createElement(e.tag,ja({key:t},e.attr),am(e.child)))}function yd(r){return e=>Ar.createElement(wE,Ga({attr:ja({},r.attr)},e),am(r.child))}function wE(r){var e=t=>{var{attr:n,size:s,title:l}=r,a=mE(r,pE),c=s||t.size||"1em",h;return t.className&&(h=t.className),r.className&&(h=(h?h+" ":"")+r.className),Ar.createElement("svg",Ga({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:h,style:ja(ja({color:r.color||t.color},t.style),r.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&Ar.createElement("title",null,l),r.children)};return q_!==void 0?Ar.createElement(q_.Consumer,null,t=>e(t)):e(lm)}function CE(r){return yd({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416v42.666z"},child:[]}]})(r)}function SE(r){return yd({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(r)}function TE(r){return yd({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M96 235h320v42H96z"},child:[]}]})(r)}const RE="_modal_133yy_1",IE="_minimized_133yy_12",LE="_header_133yy_18",PE="_headerButtons_133yy_30",ME="_controlButton_133yy_35",kE="_content_133yy_62",AE="_instruction_133yy_66",DE="_coordinatesTable_133yy_72",FE="_actionButton_133yy_95",OE="_footer_133yy_108",NE="_generateButton_133yy_115",zE="_closeButton_133yy_128",GE="_tableContainer_133yy_149",jE="_wpCell_133yy_176",UE="_coordCell_133yy_181",XE="_distanceCell_133yy_185",WE="_actionCell_133yy_190",rt={modal:RE,minimized:IE,header:LE,headerButtons:PE,controlButton:ME,content:kE,instruction:AE,coordinatesTable:DE,actionButton:FE,footer:OE,generateButton:NE,closeButton:zE,tableContainer:GE,wpCell:jE,coordCell:UE,distanceCell:XE,actionCell:WE},bE=({onStartDrawing:r,coordinates:e,onStartPolygon:t,polygonCoordinates:n,isPolygonMode:s,onImportPolygon:l,onClose:a})=>{const c=Ye.useRef(null),{position:h}=_E(c),[g,_]=Ye.useState(!1),m=E=>{if(!E)return"";const[w,C]=Ms(E,"EPSG:3857","EPSG:4326");return`${C.toFixed(6)}, ${w.toFixed(6)}`},y=(E,w)=>{if(!E||!w)return"-";const C=Ms(E,"EPSG:3857","EPSG:4326"),I=Ms(w,"EPSG:3857","EPSG:4326"),R=Gh(C,I);return`${Math.round(R)}`},x=(E,w="WP",C=!1)=>fe.jsx("div",{className:rt.tableContainer,children:fe.jsxs("table",{className:rt.coordinatesTable,children:[fe.jsx("thead",{children:fe.jsxs("tr",{children:[fe.jsx("th",{children:w}),fe.jsx("th",{children:"Coordinates"}),fe.jsx("th",{children:"Distance (m)"}),C&&fe.jsx("th",{children:"Actions"})]})}),fe.jsx("tbody",{children:E.map((I,R)=>fe.jsxs("tr",{children:[fe.jsxs("td",{className:rt.wpCell,children:[w,String(R).padStart(2,"0")]}),fe.jsx("td",{className:rt.coordCell,children:m(I)}),fe.jsx("td",{className:rt.distanceCell,children:R>0?y(E[R-1],I):"-"}),C&&fe.jsx("td",{className:rt.actionCell,children:fe.jsx(gE,{onInsertBefore:()=>t(R,"before"),onInsertAfter:()=>t(R,"after")})})]},R))})]})});return fe.jsxs("div",{ref:c,className:`${rt.modal} ${g?rt.minimized:""}`,style:{transform:`translate(${h.x}px, ${h.y}px)`,position:"fixed",top:0,left:0},children:[fe.jsxs("div",{className:`${rt.header} modal-header`,children:[fe.jsx("h2",{children:s?"Polygon Creation":"Mission Creation"}),fe.jsxs("div",{className:rt.headerButtons,children:[fe.jsx("button",{className:rt.controlButton,onClick:()=>_(!g),title:g?"Maximize":"Minimize",children:g?fe.jsx(CE,{}):fe.jsx(TE,{})}),fe.jsx("button",{className:rt.controlButton,onClick:a,title:"Close",children:fe.jsx(SE,{})})]})]}),!g&&fe.jsxs(fe.Fragment,{children:[fe.jsxs("div",{className:rt.content,children:[fe.jsx("h3",{children:s?"Polygon Waypoints":"Waypoint Navigation"}),s?fe.jsx(fe.Fragment,{children:n.length===0?fe.jsx("p",{className:rt.instruction,children:"Click on the map to draw polygon points and press ↵ to complete"}):fe.jsxs(fe.Fragment,{children:[x(n,"P"),fe.jsx("div",{className:rt.footer,children:fe.jsx("button",{className:rt.generateButton,onClick:l,children:"Import Points"})})]})}):fe.jsx(fe.Fragment,{children:e.length===0?fe.jsx("p",{className:rt.instruction,children:"Click on the map to mark points of the route and then press ↵ to complete the route"}):x(e,"WP",!0)})]}),e.length===0&&!s&&fe.jsx("div",{className:rt.footer,children:fe.jsx("button",{className:rt.generateButton,onClick:r,children:"Generate Data"})})]})]})};class Kn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Ns={PROPERTYCHANGE:"propertychange"};class ou{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function BE(r,e,t){let n,s;t=t||er;let l=0,a=r.length,c=!1;for(;l<a;)n=l+(a-l>>1),s=+t(r[n],e),s<0?l=n+1:(a=n,c=!s);return c?l:~l}function er(r,e){return r>e?1:r<e?-1:0}function YE(r,e){return r<e?1:r>e?-1:0}function Ed(r,e,t){if(r[0]<=e)return 0;const n=r.length;if(e<=r[n-1])return n-1;if(typeof t=="function"){for(let s=1;s<n;++s){const l=r[s];if(l===e)return s;if(l<e)return t(e,r[s-1],l)>0?s-1:s}return n-1}if(t>0){for(let s=1;s<n;++s)if(r[s]<e)return s-1;return n-1}if(t<0){for(let s=1;s<n;++s)if(r[s]<=e)return s;return n-1}for(let s=1;s<n;++s){if(r[s]==e)return s;if(r[s]<e)return r[s-1]-e<e-r[s]?s-1:s}return n-1}function VE(r,e,t){for(;e<t;){const n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function Vn(r,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)r[r.length]=t[s]}function sr(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function KE(r,e,t){const n=e;return r.every(function(s,l){if(l===0)return!0;const a=n(r[l-1],s);return!(a>0||a===0)})}function zs(){return!0}function Ws(){return!1}function Gs(){}function um(r){let e,t,n;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==n||!sr(s,t))&&(n=this,t=s,e=r.apply(this,arguments)),e}}function ZE(r){function e(){let t;try{t=r()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}class lu extends ou{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const l=t?new Kn(e):e;l.target||(l.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});n in a||(a[n]=0,c[n]=0),++a[n];let h;for(let g=0,_=s.length;g<_;++g)if("handleEvent"in s[g]?h=s[g].handleEvent(l):h=s[g].call(this,l),h===!1||l.propagationStopped){h=!1;break}if(--a[n]===0){let g=c[n];for(delete c[n];g--;)this.removeEventListener(n,Gs);delete a[n]}return h}disposeInternal(){this.listeners_&&il(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const s=n.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=Gs,++this.pendingRemovals_[e]):(n.splice(s,1),n.length===0&&delete this.listeners_[e]))}}const ve={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ie(r,e,t,n,s){if(s){const a=t;t=function(){r.removeEventListener(e,t),a.apply(n??this,arguments)}}else n&&n!==r&&(t=t.bind(n));const l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function Ua(r,e,t,n){return Ie(r,e,t,n,!0)}function Ue(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),il(r))}class sl extends lu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ve.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Ie(this,e[l],t);return s}return Ie(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let l=0;l<s;++l)n[l]=Ua(this,e[l],t)}else n=Ua(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)HE(n);else if(Array.isArray(e))for(let s=0,l=e.length;s<l;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}sl.prototype.on;sl.prototype.once;sl.prototype.un;function HE(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)Ue(r[e]);else Ue(r)}function ke(){throw new Error("Unimplemented abstract method.")}let $E=0;function Fe(r){return r.ol_uid||(r.ol_uid=String(++$E))}class J_ extends Kn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class Zn extends sl{constructor(e){super(),this.on,this.once,this.un,Fe(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new J_(n,e,t)),n=Ns.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new J_(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const l=s[e];s[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Ds(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const Ut={ADD:"add",REMOVE:"remove"},ep={LENGTH:"length"};class xa extends Kn{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Bn extends Zn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(ep.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new xa(Ut.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new xa(Ut.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new xa(Ut.REMOVE,s,e)),this.dispatchEvent(new xa(Ut.ADD,t,e))}updateLength_(){this.set(ep.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}const ze={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function Ae(r,e){if(!r)throw new Error(e)}class cm extends Zn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[ze.OPACITY]=e.opacity!==void 0?e.opacity:1,Ae(typeof t[ze.OPACITY]=="number","Layer opacity must be a number"),t[ze.VISIBLE]=e.visible!==void 0?e.visible:!0,t[ze.Z_INDEX]=e.zIndex,t[ze.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[ze.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[ze.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[ze.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Ze(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ke()}getLayerStatesArray(e){return ke()}getExtent(){return this.get(ze.EXTENT)}getMaxResolution(){return this.get(ze.MAX_RESOLUTION)}getMinResolution(){return this.get(ze.MIN_RESOLUTION)}getMinZoom(){return this.get(ze.MIN_ZOOM)}getMaxZoom(){return this.get(ze.MAX_ZOOM)}getOpacity(){return this.get(ze.OPACITY)}getSourceState(){return ke()}getVisible(){return this.get(ze.VISIBLE)}getZIndex(){return this.get(ze.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ze.EXTENT,e)}setMaxResolution(e){this.set(ze.MAX_RESOLUTION,e)}setMinResolution(e){this.set(ze.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(ze.MAX_ZOOM,e)}setMinZoom(e){this.set(ze.MIN_ZOOM,e)}setOpacity(e){Ae(typeof e=="number","Layer opacity must be a number"),this.set(ze.OPACITY,e)}setVisible(e){this.set(ze.VISIBLE,e)}setZIndex(e){this.set(ze.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const hn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},St={ANIMATING:0,INTERACTING:1},Tn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},qE=42,vd=256;function tp(r,e,t){return function(n,s,l,a,c){if(!n)return;if(!s&&!e)return n;const h=e?0:l[0]*s,g=e?0:l[1]*s,_=c?c[0]:0,m=c?c[1]:0;let y=r[0]+h/2+_,x=r[2]-h/2+_,E=r[1]+g/2+m,w=r[3]-g/2+m;y>x&&(y=(x+y)/2,x=y),E>w&&(E=(w+E)/2,w=E);let C=Ze(n[0],y,x),I=Ze(n[1],E,w);if(a&&t&&s){const R=30*s;C+=-R*Math.log(1+Math.max(0,y-n[0])/R)+R*Math.log(1+Math.max(0,n[0]-x)/R),I+=-R*Math.log(1+Math.max(0,E-n[1])/R)+R*Math.log(1+Math.max(0,n[1]-w)/R)}return[C,I]}}function QE(r){return r}function xd(r,e,t,n){const s=Pe(e)/t[0],l=ht(e)/t[1];return n?Math.min(r,Math.max(s,l)):Math.min(r,Math.min(s,l))}function wd(r,e,t){let n=Math.min(r,e);const s=50;return n*=Math.log(1+s*Math.max(0,r/e-1))/s+1,t&&(n=Math.max(n,t),n/=Math.log(1+s*Math.max(0,t/r-1))/s+1),Ze(n,t/2,e*2)}function JE(r,e,t,n){return e=e!==void 0?e:!0,function(s,l,a,c){if(s!==void 0){const h=r[0],g=r[r.length-1],_=t?xd(h,t,a,n):h;if(c)return e?wd(s,_,g):Ze(s,g,_);const m=Math.min(_,s),y=Math.floor(Ed(r,m,l));return r[y]>_&&y<r.length-1?r[y+1]:r[y]}}}function ev(r,e,t,n,s,l){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(a,c,h,g){if(a!==void 0){const _=s?xd(e,s,h,l):e;if(g)return n?wd(a,_,t):Ze(a,t,_);const m=1e-9,y=Math.ceil(Math.log(e/_)/Math.log(r)-m),x=-c*(.5-m)+.5,E=Math.min(_,a),w=Math.floor(Math.log(e/E)/Math.log(r)+x),C=Math.max(y,w),I=e/Math.pow(r,C);return Ze(I,t,_)}}}function np(r,e,t,n,s){return t=t!==void 0?t:!0,function(l,a,c,h){if(l!==void 0){const g=n?xd(r,n,c,s):r;return!t||!h?Ze(l,e,g):wd(l,g,e)}}}function Cd(r){if(r!==void 0)return 0}function ip(r){if(r!==void 0)return r}function tv(r){const e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function nv(r){const e=Ji(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function hm(r){return Math.pow(r,3)}function bs(r){return 1-hm(1-r)}function iv(r){return 3*r*r-2*r*r*r}function rv(r){return r}new Array(6);function kn(){return[1,0,0,1,0,0]}function sv(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function ct(r,e){const t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function yi(r,e,t,n,s,l,a,c){const h=Math.sin(l),g=Math.cos(l);return r[0]=n*g,r[1]=s*h,r[2]=-n*h,r[3]=s*g,r[4]=a*n*g-c*n*h+e,r[5]=a*s*h+c*s*g+t,r}function dm(r,e){const t=ov(e);Ae(t!==0,"Transformation matrix cannot be inverted");const n=e[0],s=e[1],l=e[2],a=e[3],c=e[4],h=e[5];return r[0]=a/t,r[1]=-s/t,r[2]=-l/t,r[3]=n/t,r[4]=(l*h-a*c)/t,r[5]=-(n*h-s*c)/t,r}function ov(r){return r[0]*r[3]-r[1]*r[2]}const rp=[1e6,1e6,1e6,1e6,2,2];function lv(r){return"matrix("+r.map((t,n)=>Math.round(t*rp[n])/rp[n]).join(", ")+")"}function tr(r,e,t,n,s,l,a){l=l||[],a=a||2;let c=0;for(let h=e;h<t;h+=n){const g=r[h],_=r[h+1];l[c++]=s[0]*g+s[2]*_+s[4],l[c++]=s[1]*g+s[3]*_+s[5];for(let m=2;m<a;m++)l[c++]=r[h+m]}return l&&l.length!=c&&(l.length=c),l}function Sd(r,e,t,n,s,l,a){a=a||[];const c=Math.cos(s),h=Math.sin(s),g=l[0],_=l[1];let m=0;for(let y=e;y<t;y+=n){const x=r[y]-g,E=r[y+1]-_;a[m++]=g+x*c-E*h,a[m++]=_+x*h+E*c;for(let w=y+2;w<y+n;++w)a[m++]=r[w]}return a&&a.length!=m&&(a.length=m),a}function av(r,e,t,n,s,l,a,c){c=c||[];const h=a[0],g=a[1];let _=0;for(let m=e;m<t;m+=n){const y=r[m]-h,x=r[m+1]-g;c[_++]=h+s*y,c[_++]=g+l*x;for(let E=m+2;E<m+n;++E)c[_++]=r[E]}return c&&c.length!=_&&(c.length=_),c}function uv(r,e,t,n,s,l,a){a=a||[];let c=0;for(let h=e;h<t;h+=n){a[c++]=r[h]+s,a[c++]=r[h+1]+l;for(let g=h+2;g<h+n;++g)a[c++]=r[g]}return a&&a.length!=c&&(a.length=c),a}const sp=kn();class fm extends Zn{constructor(){super(),this.extent_=Qt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=um((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ke()}closestPointXY(e,t,n,s){return ke()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ke()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&rl(t),this.extentRevision_=this.getRevision()}return N1(this.extent_,e)}rotate(e,t){ke()}scale(e,t,n){ke()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ke()}getType(){return ke()}applyTransform(e){ke()}intersectsExtent(e){return ke()}translate(e,t){ke()}transform(e,t){const n=Yt(e),s=n.getUnits()=="tile-pixels"?function(l,a,c){const h=n.getExtent(),g=n.getWorldExtent(),_=ht(g)/ht(h);yi(sp,g[0],g[3],_,-_,0,0,0);const m=tr(l,0,l.length,c,sp,a),y=za(n,t);return y?y(m,m,c):m}:za(n,t);return this.applyTransform(s),this}}class or extends fm{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ke()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Xa(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ke()}setLayout(e,t,n){let s;if(e)s=Xa(e);else{for(let l=0;l<n;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=cv(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Sd(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=ir(this.getExtent()));const s=this.getFlatCoordinates();if(s){const l=this.getStride();av(s,0,s.length,l,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();uv(n,0,n.length,s,e,t,n),this.changed()}}}function cv(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function Xa(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function hv(r,e,t){const n=r.getFlatCoordinates();if(!n)return null;const s=r.getStride();return tr(n,0,n.length,s,e,t)}function op(r,e,t,n,s,l,a){const c=r[e],h=r[e+1],g=r[t]-c,_=r[t+1]-h;let m;if(g===0&&_===0)m=e;else{const y=((s-c)*g+(l-h)*_)/(g*g+_*_);if(y>1)m=t;else if(y>0){for(let x=0;x<n;++x)a[x]=qt(r[e+x],r[t+x],y);a.length=n;return}else m=e}for(let y=0;y<n;++y)a[y]=r[m+y];a.length=n}function Td(r,e,t,n,s){let l=r[e],a=r[e+1];for(e+=n;e<t;e+=n){const c=r[e],h=r[e+1],g=di(l,a,c,h);g>s&&(s=g),l=c,a=h}return s}function Rd(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){const c=t[l];s=Td(r,e,c,n,s),e=c}return s}function dv(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){const c=t[l];s=Rd(r,e,c,n,s),e=c[c.length-1]}return s}function Id(r,e,t,n,s,l,a,c,h,g,_){if(e==t)return g;let m,y;if(s===0){if(y=di(a,c,r[e],r[e+1]),y<g){for(m=0;m<n;++m)h[m]=r[e+m];return h.length=n,y}return g}_=_||[NaN,NaN];let x=e+n;for(;x<t;)if(op(r,x-n,x,n,a,c,_),y=di(a,c,_[0],_[1]),y<g){for(g=y,m=0;m<n;++m)h[m]=_[m];h.length=n,x+=n}else x+=n*Math.max((Math.sqrt(y)-Math.sqrt(g))/s|0,1);if(l&&(op(r,t-n,e,n,a,c,_),y=di(a,c,_[0],_[1]),y<g)){for(g=y,m=0;m<n;++m)h[m]=_[m];h.length=n}return g}function Ld(r,e,t,n,s,l,a,c,h,g,_){_=_||[NaN,NaN];for(let m=0,y=t.length;m<y;++m){const x=t[m];g=Id(r,e,x,n,s,l,a,c,h,g,_),e=x}return g}function fv(r,e,t,n,s,l,a,c,h,g,_){_=_||[NaN,NaN];for(let m=0,y=t.length;m<y;++m){const x=t[m];g=Ld(r,e,x,n,s,l,a,c,h,g,_),e=x[x.length-1]}return g}function gm(r,e,t,n){for(let s=0,l=t.length;s<l;++s)r[e++]=t[s];return e}function au(r,e,t,n){for(let s=0,l=t.length;s<l;++s){const a=t[s];for(let c=0;c<n;++c)r[e++]=a[c]}return e}function Pd(r,e,t,n,s){s=s||[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=au(r,e,t[a],n);s[l++]=h,e=h}return s.length=l,s}function gv(r,e,t,n,s){s=s||[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=Pd(r,e,t[a],n,s[l]);h.length===0&&(h[0]=e),s[l++]=h,e=h[h.length-1]}return s.length=l,s}function uu(r,e,t,n,s,l,a){const c=(t-e)/n;if(c<3){for(;e<t;e+=n)l[a++]=r[e],l[a++]=r[e+1];return a}const h=new Array(c);h[0]=1,h[c-1]=1;const g=[e,t-n];let _=0;for(;g.length>0;){const m=g.pop(),y=g.pop();let x=0;const E=r[y],w=r[y+1],C=r[m],I=r[m+1];for(let R=y+n;R<m;R+=n){const D=r[R],P=r[R+1],k=G1(D,P,E,w,C,I);k>x&&(_=R,x=k)}x>s&&(h[(_-e)/n]=1,y+n<_&&g.push(y,_),_+n<m&&g.push(_,m))}for(let m=0;m<c;++m)h[m]&&(l[a++]=r[e+m*n],l[a++]=r[e+m*n+1]);return a}function _m(r,e,t,n,s,l,a,c){for(let h=0,g=t.length;h<g;++h){const _=t[h];a=uu(r,e,_,n,s,l,a),c.push(a),e=_}return a}function Rr(r,e){return e*Math.round(r/e)}function _v(r,e,t,n,s,l,a){if(e==t)return a;let c=Rr(r[e],s),h=Rr(r[e+1],s);e+=n,l[a++]=c,l[a++]=h;let g,_;do if(g=Rr(r[e],s),_=Rr(r[e+1],s),e+=n,e==t)return l[a++]=g,l[a++]=_,a;while(g==c&&_==h);for(;e<t;){const m=Rr(r[e],s),y=Rr(r[e+1],s);if(e+=n,m==g&&y==_)continue;const x=g-c,E=_-h,w=m-c,C=y-h;if(x*C==E*w&&(x<0&&w<x||x==w||x>0&&w>x)&&(E<0&&C<E||E==C||E>0&&C>E)){g=m,_=y;continue}l[a++]=g,l[a++]=_,c=g,h=_,g=m,_=y}return l[a++]=g,l[a++]=_,a}function Md(r,e,t,n,s,l,a,c){for(let h=0,g=t.length;h<g;++h){const _=t[h];a=_v(r,e,_,n,s,l,a),c.push(a),e=_}return a}function pv(r,e,t,n,s,l,a,c){for(let h=0,g=t.length;h<g;++h){const _=t[h],m=[];a=Md(r,e,_,n,s,l,a,m),c.push(m),e=_[_.length-1]}return a}function qi(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let a=e;a<t;a+=n)s[l++]=r.slice(a,a+n);return s.length=l,s}function Yo(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=t[a];s[l++]=qi(r,e,h,n,s[l]),e=h}return s.length=l,s}function Wh(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=t[a];s[l++]=h.length===1&&h[0]===e?[]:Yo(r,e,h,n,s[l]),e=h[h.length-1]}return s.length=l,s}function pm(r,e,t,n){let s=0;const l=r[t-n],a=r[t-n+1];let c=0,h=0;for(;e<t;e+=n){const g=r[e]-l,_=r[e+1]-a;s+=h*g-c*_,c=g,h=_}return s/2}function mm(r,e,t,n){let s=0;for(let l=0,a=t.length;l<a;++l){const c=t[l];s+=pm(r,e,c,n),e=c}return s}function mv(r,e,t,n){let s=0;for(let l=0,a=t.length;l<a;++l){const c=t[l];s+=mm(r,e,c,n),e=c[c.length-1]}return s}class Vo extends or{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Vo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<Nr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Td(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Id(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return pm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=uu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Vo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=au(this.flatCoordinates,0,e,this.stride),this.changed()}}class nr extends or{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new nr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const l=this.flatCoordinates,a=di(e,t,l[0],l[1]);if(a<s){const c=this.stride;for(let h=0;h<c;++h)n[h]=l[h];return n.length=c,a}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Kp(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return ld(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gm(this.flatCoordinates,0,e,this.stride),this.changed()}}function yv(r,e,t,n,s){return!cd(s,function(a){return!Pr(r,e,t,n,a[0],a[1])})}function Pr(r,e,t,n,s,l){let a=0,c=r[t-n],h=r[t-n+1];for(;e<t;e+=n){const g=r[e],_=r[e+1];h<=l?_>l&&(g-c)*(l-h)-(s-c)*(_-h)>0&&a++:_<=l&&(g-c)*(l-h)-(s-c)*(_-h)<0&&a--,c=g,h=_}return a!==0}function kd(r,e,t,n,s,l){if(t.length===0||!Pr(r,e,t[0],n,s,l))return!1;for(let a=1,c=t.length;a<c;++a)if(Pr(r,t[a-1],t[a],n,s,l))return!1;return!0}function Ev(r,e,t,n,s,l){if(t.length===0)return!1;for(let a=0,c=t.length;a<c;++a){const h=t[a];if(kd(r,e,h,n,s,l))return!0;e=h[h.length-1]}return!1}function Ad(r,e,t,n,s,l,a){let c,h,g,_,m,y,x;const E=s[l+1],w=[];for(let R=0,D=t.length;R<D;++R){const P=t[R];for(_=r[P-n],y=r[P-n+1],c=e;c<P;c+=n)m=r[c],x=r[c+1],(E<=y&&x<=E||y<=E&&E<=x)&&(g=(E-y)/(x-y)*(m-_)+_,w.push(g)),_=m,y=x}let C=NaN,I=-1/0;for(w.sort(er),_=w[0],c=1,h=w.length;c<h;++c){m=w[c];const R=Math.abs(m-_);R>I&&(g=(_+m)/2,kd(r,e,t,n,g,E)&&(C=g,I=R)),_=m}return isNaN(C)&&(C=s[l]),a?(a.push(C,E,I),a):[C,E,I]}function ym(r,e,t,n,s){let l=[];for(let a=0,c=t.length;a<c;++a){const h=t[a];l=Ad(r,e,h,n,s,2*a,l),e=h[h.length-1]}return l}function Em(r,e,t,n,s){let l;for(e+=n;e<t;e+=n)if(l=s(r.slice(e-n,e),r.slice(e,e+n)),l)return l;return!1}function cu(r,e,t,n,s){const l=Zp(Qt(),r,e,t,n);return At(s,l)?Ss(s,l)||l[0]>=s[0]&&l[2]<=s[2]||l[1]>=s[1]&&l[3]<=s[3]?!0:Em(r,e,t,n,function(a,c){return z1(s,a,c)}):!1}function vv(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){if(cu(r,e,t[l],n,s))return!0;e=t[l]}return!1}function vm(r,e,t,n,s){return!!(cu(r,e,t,n,s)||Pr(r,e,t,n,s[0],s[1])||Pr(r,e,t,n,s[0],s[3])||Pr(r,e,t,n,s[2],s[1])||Pr(r,e,t,n,s[2],s[3]))}function xm(r,e,t,n,s){if(!vm(r,e,t[0],n,s))return!1;if(t.length===1)return!0;for(let l=1,a=t.length;l<a;++l)if(yv(r,t[l-1],t[l],n,s)&&!cu(r,t[l-1],t[l],n,s))return!1;return!0}function xv(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){const c=t[l];if(xm(r,e,c,n,s))return!0;e=c[c.length-1]}return!1}function wv(r,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const l=r[e+s];r[e+s]=r[t-n+s],r[t-n+s]=l}e+=n,t-=n}}function Dd(r,e,t,n){let s=0,l=r[t-n],a=r[t-n+1];for(;e<t;e+=n){const c=r[e],h=r[e+1];s+=(c-l)*(h+a),l=c,a=h}return s===0?void 0:s>0}function wm(r,e,t,n,s){s=s!==void 0?s:!1;for(let l=0,a=t.length;l<a;++l){const c=t[l],h=Dd(r,e,c,n);if(l===0){if(s&&h||!s&&!h)return!1}else if(s&&!h||!s&&h)return!1;e=c}return!0}function Cv(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l){const c=t[l];if(!wm(r,e,c,n,s))return!1;c.length&&(e=c[c.length-1])}return!0}function bh(r,e,t,n,s){s=s!==void 0?s:!1;for(let l=0,a=t.length;l<a;++l){const c=t[l],h=Dd(r,e,c,n);(l===0?s&&h||!s&&!h:s&&!h||!s&&h)&&wv(r,e,c,n),e=c}return e}function lp(r,e,t,n,s){for(let l=0,a=t.length;l<a;++l)e=bh(r,e,t[l],n,s);return e}function Sv(r,e){const t=[];let n=0,s=0,l;for(let a=0,c=e.length;a<c;++a){const h=e[a],g=Dd(r,n,h,2);if(l===void 0&&(l=g),g===l)t.push(e.slice(s,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[s])}s=a+1,n=h}return t}class Ei extends or{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Vn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ei(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Nr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ld(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return kd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return mm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),bh(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Yo(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=ir(this.getExtent());this.flatInteriorPoint_=Ad(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new nr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Vo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let l=0;for(let a=0,c=n.length;a<c;++a){const h=n[a],g=new Vo(t.slice(l,h),e);s.push(g),l=h}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;wm(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=bh(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Md(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Ei(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return xm(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Pd(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function ap(r){if(nu(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],n=r[2],s=r[3],l=[e,t,e,s,n,s,n,t,e,t];return new Ei(l,"XY",[l.length])}const dh=0;class Wn extends Zn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=pd(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&sm(),e.center&&(e.center=Rn(e.center,this.projection_)),e.extent&&(e.extent=$i(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const c in Tn)delete t[c];this.setProperties(t,!0);const n=Rv(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=Tv(e),l=n.constraint,a=Iv(e);this.constraints_={center:s,resolution:l,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),a=l/2*(s[3]-t[3]+t[1]-s[1]),c=l/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([n[0]+a,n[1]-c])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=Rn(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Rn(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const _=arguments[s];_.center&&this.setCenterInternal(_.center),_.zoom!==void 0?this.setZoom(_.zoom):_.resolution&&this.setResolution(_.resolution),_.rotation!==void 0&&this.setRotation(_.rotation)}if(s===t){n&&wa(n,!0);return}let l=Date.now(),a=this.targetCenter_.slice(),c=this.targetResolution_,h=this.targetRotation_;const g=[];for(;s<t;++s){const _=arguments[s],m={start:l,complete:!1,anchor:_.anchor,duration:_.duration!==void 0?_.duration:1e3,easing:_.easing||iv,callback:n};if(_.center&&(m.sourceCenter=a,m.targetCenter=_.center.slice(),a=m.targetCenter),_.zoom!==void 0?(m.sourceResolution=c,m.targetResolution=this.getResolutionForZoom(_.zoom),c=m.targetResolution):_.resolution&&(m.sourceResolution=c,m.targetResolution=_.resolution,c=m.targetResolution),_.rotation!==void 0){m.sourceRotation=h;const y=Ps(_.rotation-h+Math.PI,2*Math.PI)-Math.PI;m.targetRotation=h+y,h=m.targetRotation}Lv(m)?m.complete=!0:l+=m.duration,g.push(m)}this.animations_.push(g),this.setHint(St.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[St.ANIMATING]>0}getInteracting(){return this.hints_[St.INTERACTING]>0}cancelAnimations(){this.setHint(St.ANIMATING,-this.hints_[St.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&wa(s[0].callback,!1),!e)for(let l=0,a=s.length;l<a;++l){const c=s[l];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let l=!0;for(let a=0,c=s.length;a<c;++a){const h=s[a];if(h.complete)continue;const g=e-h.start;let _=h.duration>0?g/h.duration:1;_>=1?(h.complete=!0,_=1):l=!1;const m=h.easing(_);if(h.sourceCenter){const y=h.sourceCenter[0],x=h.sourceCenter[1],E=h.targetCenter[0],w=h.targetCenter[1];this.nextCenter_=h.targetCenter;const C=y+m*(E-y),I=x+m*(w-x);this.targetCenter_=[C,I]}if(h.sourceResolution&&h.targetResolution){const y=m===1?h.targetResolution:h.sourceResolution+m*(h.targetResolution-h.sourceResolution);if(h.anchor){const x=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(y,0,x,!0);this.targetCenter_=this.calculateCenterZoom(E,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){const y=m===1?Ps(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+m*(h.targetRotation-h.sourceRotation);if(h.anchor){const x=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(x,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!h.complete)break}if(l){this.animations_[n]=null,this.setHint(St.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=s[0].callback;a&&wa(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-t[0],s[1]-t[1]],dd(n,e-this.getRotation()),U1(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),l=this.getResolution();if(s!==void 0&&l!==void 0){const a=t[0]-e*(t[0]-s[0])/l,c=t[1]-e*(t[1]-s[1])/l;n=[a,c]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Xh(e,this.getProjection())}getCenterInternal(){return this.get(Tn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return om(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ae(t,"The view center is not defined");const n=this.getResolution();Ae(n!==void 0,"The view resolution is not defined");const s=this.getRotation();return Ae(s!==void 0,"The view rotation is not defined"),Nh(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Tn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal($i(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Pe(e)/t[0],s=ht(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(t/n)/Math.log(e);return function(l){return t/Math.pow(e,l*s)}}getRotation(){return this.get(Tn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,l=Math.log(n/s)/t;return function(a){return Math.log(n/a)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const l=this.padding_;if(l){const a=this.getViewportSizeMinusPadding_();s=fh(s,this.getViewportSize_(),[a[0]/2+l[3],a[1]/2+l[0]],t,n)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,s;if(this.resolutions_){const l=Ed(this.resolutions_,e,1);t=l,n=this.resolutions_[l],l==this.resolutions_.length-1?s=2:s=n/this.resolutions_[l+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=Ze(Math.floor(e),0,this.resolutions_.length-2),s=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(s,Ze(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(Ae(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Ae(!nu(e),"Cannot fit empty extent provided as `geometry`");const s=$i(e,this.getProjection());n=ap(s)}else if(e.getType()==="Circle"){const s=$i(e.getExtent(),this.getProjection());n=ap(s),n.rotate(this.getRotation(),ir(s))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),l=e.getFlatCoordinates(),a=e.getStride();let c=1/0,h=1/0,g=-1/0,_=-1/0;for(let m=0,y=l.length;m<y;m+=a){const x=l[m]*n-l[m+1]*s,E=l[m]*s+l[m+1]*n;c=Math.min(c,x),h=Math.min(h,E),g=Math.max(g,x),_=Math.max(_,E)}return[c,h,g,_]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const c=this.rotatedExtentForGeometry(e);let h=this.getResolutionForExtentInternal(c,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);h=isNaN(h)?a:Math.max(h,a),h=this.getConstrainedResolution(h,l?0:1);const g=this.getRotation(),_=Math.sin(g),m=Math.cos(g),y=ir(c);y[0]+=(s[1]-s[3])/2*h,y[1]+=(s[0]-s[2])/2*h;const x=y[0]*m-y[1]*_,E=y[1]*m+y[0]*_,w=this.getConstrainedCenter([x,E],h),C=t.callback?t.callback:Gs;t.duration!==void 0?this.animateInternal({resolution:h,center:w,duration:t.duration,easing:t.easing},C):(this.targetResolution_=h,this.targetCenter_=w,this.applyTargetState_(!1,!0),wa(C,!0))}centerOn(e,t,n){this.centerOnInternal(Rn(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(fh(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let l;const a=this.padding_;if(a&&e){const c=this.getViewportSizeMinusPadding_(-n),h=fh(e,s,[c[0]/2+a[3],c[1]/2+a[0]],t,n);l=[e[0]-h[0],e[1]-h[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Xh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Rn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Rn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Rn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,0,l,n),c=this.constraints_.center(this.targetCenter_,a,l,n,this.calculateCenterShift(this.targetCenter_,a,s,l));this.get(Tn.ROTATION)!==s&&this.set(Tn.ROTATION,s),this.get(Tn.RESOLUTION)!==a&&(this.set(Tn.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!c||!this.get(Tn.CENTER)||!Fa(this.get(Tn.CENTER),c))&&this.set(Tn.CENTER,c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const s=t||0,l=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,s,a),h=this.constraints_.center(this.targetCenter_,c,a,!1,this.calculateCenterShift(this.targetCenter_,c,l,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=h,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!Fa(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:h,resolution:c,duration:e,easing:bs,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(St.INTERACTING,1)}endInteraction(e,t,n){n=n&&Rn(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(St.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function wa(r,e){setTimeout(function(){r(e)},0)}function Tv(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return tp(r.extent,r.constrainOnlyCenter,t)}const e=pd(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,tp(t,!1,!1)}return QE}function Rv(r){let e,t,n,a=r.minZoom!==void 0?r.minZoom:dh,c=r.maxZoom!==void 0?r.maxZoom:28;const h=r.zoomFactor!==void 0?r.zoomFactor:2,g=r.multiWorld!==void 0?r.multiWorld:!1,_=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,m=r.showFullExtent!==void 0?r.showFullExtent:!1,y=pd(r.projection,"EPSG:3857"),x=y.getExtent();let E=r.constrainOnlyCenter,w=r.extent;if(!g&&!w&&y.isGlobal()&&(E=!1,w=x),r.resolutions!==void 0){const C=r.resolutions;t=C[a],n=C[c]!==void 0?C[c]:C[C.length-1],r.constrainResolution?e=JE(C,_,!E&&w,m):e=np(t,n,_,!E&&w,m)}else{const I=(x?Math.max(Pe(x),ht(x)):360*rd.degrees/y.getMetersPerUnit())/vd/Math.pow(2,dh),R=I/Math.pow(2,28-dh);t=r.maxResolution,t!==void 0?a=0:t=I/Math.pow(h,a),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(h,c):n=I/Math.pow(h,c):n=R),c=a+Math.floor(Math.log(t/n)/Math.log(h)),n=t/Math.pow(h,c-a),r.constrainResolution?e=ev(h,t,n,_,!E&&w,m):e=np(t,n,_,!E&&w,m)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:h}}function Iv(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?nv():t===!1?ip:typeof t=="number"?tv(t):ip}return Cd}function Lv(r){return!(r.sourceCenter&&r.targetCenter&&!Fa(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function fh(r,e,t,n,s){const l=Math.cos(-s);let a=Math.sin(-s),c=r[0]*l-r[1]*a,h=r[1]*l+r[0]*a;c+=(e[0]/2-t[0])*n,h+=(t[1]-e[1]/2)*n,a=-a;const g=c*l-h*a,_=h*l+c*a;return[g,_]}class hu extends cm{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ze.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(ze.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ue(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ie(e,ve.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Wn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;if(t.layerStatesArray){if(s=t.layerStatesArray.find(a=>a.layer===this),!s)return!1}else s=this.getLayerState();const l=this.getExtent();return Fd(s,t.viewState)&&(!l||At(l,t.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const t=(l=this.getSource())==null?void 0:l.getAttributions();if(!t)return[];const n=e instanceof Wn?e.getViewStateAndExtent():e;let s=t(n);return Array.isArray(s)||(s=[s]),s}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(ze.MAP,e)}getMapInternal(){return this.get(ze.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ue(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ue(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ie(e,hn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ie(this,ve.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);Ae(!t.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(ze.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Fd(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}function Cm(r,e,t=0,n=r.length-1,s=Pv){for(;n>t;){if(n-t>600){const h=n-t+1,g=e-t+1,_=Math.log(h),m=.5*Math.exp(2*_/3),y=.5*Math.sqrt(_*m*(h-m)/h)*(g-h/2<0?-1:1),x=Math.max(t,Math.floor(e-g*m/h+y)),E=Math.min(n,Math.floor(e+(h-g)*m/h+y));Cm(r,e,x,E,s)}const l=r[e];let a=t,c=n;for(ko(r,t,e),s(r[n],l)>0&&ko(r,t,n);a<c;){for(ko(r,a,c),a++,c--;s(r[a],l)<0;)a++;for(;s(r[c],l)>0;)c--}s(r[t],l)===0?ko(r,t,c):(c++,ko(r,c,n)),c<=e&&(t=c+1),e<=c&&(n=c-1)}}function ko(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function Pv(r,e){return r<e?-1:r>e?1:0}let Sm=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!Sa(e,t))return n;const s=this.toBBox,l=[];for(;t;){for(let a=0;a<t.children.length;a++){const c=t.children[a],h=t.leaf?s(c):c;Sa(e,h)&&(t.leaf?n.push(c):_h(e,h)?this._all(c,n):l.push(c))}t=l.pop()}return n}collides(e){let t=this.data;if(!Sa(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const l=t.children[s],a=t.leaf?this.toBBox(l):l;if(Sa(e,a)){if(t.leaf||_h(e,a))return!0;n.push(l)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Es([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),l=[],a=[];let c,h,g;for(;n||l.length;){if(n||(n=l.pop(),h=l[l.length-1],c=a.pop(),g=!0),n.leaf){const _=Mv(e,n.children,t);if(_!==-1)return n.children.splice(_,1),l.push(n),this._condense(l),this}!g&&!n.leaf&&_h(n,s)?(l.push(n),a.push(c),c=0,h=n,n=n.children[0]):h?(c++,n=h.children[c],g=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const l=n-t+1;let a=this._maxEntries,c;if(l<=a)return c=Es(e.slice(t,n+1)),ds(c,this.toBBox),c;s||(s=Math.ceil(Math.log(l)/Math.log(a)),a=Math.ceil(l/Math.pow(a,s-1))),c=Es([]),c.leaf=!1,c.height=s;const h=Math.ceil(l/a),g=h*Math.ceil(Math.sqrt(a));up(e,t,n,g,this.compareMinX);for(let _=t;_<=n;_+=g){const m=Math.min(_+g-1,n);up(e,_,m,h,this.compareMinY);for(let y=_;y<=m;y+=h){const x=Math.min(y+h-1,m);c.children.push(this._build(e,y,x,s-1))}}return ds(c,this.toBBox),c}_chooseSubtree(e,t,n,s){for(;s.push(t),!(t.leaf||s.length-1===n);){let l=1/0,a=1/0,c;for(let h=0;h<t.children.length;h++){const g=t.children[h],_=gh(g),m=Dv(e,g)-_;m<a?(a=m,l=_<l?_:l,c=g):m===a&&_<l&&(l=_,c=g)}t=c||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),l=[],a=this._chooseSubtree(s,this.data,t,l);for(a.children.push(e),No(a,s);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(s,l,t)}_split(e,t){const n=e[t],s=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,s);const a=this._chooseSplitIndex(n,l,s),c=Es(n.children.splice(a,n.children.length-a));c.height=n.height,c.leaf=n.leaf,ds(n,this.toBBox),ds(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(n,c)}_splitRoot(e,t){this.data=Es([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ds(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,l=1/0,a=1/0;for(let c=t;c<=n-t;c++){const h=Oo(e,0,c,this.toBBox),g=Oo(e,c,n,this.toBBox),_=Fv(h,g),m=gh(h)+gh(g);_<l?(l=_,s=c,a=m<a?m:a):_===l&&m<a&&(a=m,s=c)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:kv,l=e.leaf?this.compareMinY:Av,a=this._allDistMargin(e,t,n,s),c=this._allDistMargin(e,t,n,l);a<c&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const l=this.toBBox,a=Oo(e,0,t,l),c=Oo(e,n-t,n,l);let h=Ca(a)+Ca(c);for(let g=t;g<n-t;g++){const _=e.children[g];No(a,e.leaf?l(_):_),h+=Ca(a)}for(let g=n-t-1;g>=t;g--){const _=e.children[g];No(c,e.leaf?l(_):_),h+=Ca(c)}return h}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)No(t[s],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():ds(e[t],this.toBBox)}};function Mv(r,e,t){if(!t)return e.indexOf(r);for(let n=0;n<e.length;n++)if(t(r,e[n]))return n;return-1}function ds(r,e){Oo(r,0,r.children.length,e,r)}function Oo(r,e,t,n,s){s||(s=Es(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let l=e;l<t;l++){const a=r.children[l];No(s,r.leaf?n(a):a)}return s}function No(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function kv(r,e){return r.minX-e.minX}function Av(r,e){return r.minY-e.minY}function gh(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Ca(r){return r.maxX-r.minX+(r.maxY-r.minY)}function Dv(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function Fv(r,e){const t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),s=Math.min(r.maxX,e.maxX),l=Math.min(r.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,l-n)}function _h(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function Sa(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function Es(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function up(r,e,t,n,s){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=n)continue;const a=e+Math.ceil((t-e)/n/2)*n;Cm(r,a,e,t,s),l.push(e,a,a,t)}}const Ce={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Ko={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var gt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};gt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};gt.max=gt.whitepoint[2].D65;gt.rgb=function(r,e){e=e||gt.whitepoint[2].E;var t=r[0]/e[0],n=r[1]/e[1],s=r[2]/e[2],l,a,c;return l=t*3.240969941904521+n*-1.537383177570093+s*-.498610760293,a=t*-.96924363628087+n*1.87596750150772+s*.041555057407175,c=t*.055630079696993+n*-.20397695888897+s*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=c*12.92,l=Math.min(Math.max(0,l),1),a=Math.min(Math.max(0,a),1),c=Math.min(Math.max(0,c),1),[l*255,a*255,c*255]};Ko.xyz=function(r,e){var t=r[0]/255,n=r[1]/255,s=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var l=t*.41239079926595+n*.35758433938387+s*.18048078840183,a=t*.21263900587151+n*.71516867876775+s*.072192315360733,c=t*.019330818715591+n*.11919477979462+s*.95053215224966;return e=e||gt.whitepoint[2].E,[l*e[0],a*e[1],c*e[2]]};const Od={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var n,s,l,a,c,h,g,_,m,y,x,E,w;if(l=r[0],a=r[1],c=r[2],l===0)return[0,0,0];var C=.0011070564598794539;return e=e||"D65",t=t||2,m=gt.whitepoint[t][e][0],y=gt.whitepoint[t][e][1],x=gt.whitepoint[t][e][2],E=4*m/(m+15*y+3*x),w=9*y/(m+15*y+3*x),n=a/(13*l)+E||0,s=c/(13*l)+w||0,g=l>8?y*Math.pow((l+16)/116,3):y*l*C,h=g*9*n/(4*s)||0,_=g*(12-3*n-20*s)/(4*s)||0,[h,g,_]}};gt.luv=function(r,e,t){var n,s,l,a,c,h,g,_,m,y,x,E,w,C=.008856451679035631,I=903.2962962962961;e=e||"D65",t=t||2,m=gt.whitepoint[t][e][0],y=gt.whitepoint[t][e][1],x=gt.whitepoint[t][e][2],E=4*m/(m+15*y+3*x),w=9*y/(m+15*y+3*x),h=r[0],g=r[1],_=r[2],n=4*h/(h+15*g+3*_)||0,s=9*g/(h+15*g+3*_)||0;var R=g/y;return l=R<=C?I*R:116*Math.pow(R,1/3)-16,a=13*l*(n-E),c=13*l*(s-w),[l,a,c]};var Tm={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],n=r[2],s,l,a;return a=n/360*2*Math.PI,s=t*Math.cos(a),l=t*Math.sin(a),[e,s,l]},xyz:function(r){return Od.xyz(Tm.luv(r))}};Od.lchuv=function(r){var e=r[0],t=r[1],n=r[2],s=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),a=l*360/2/Math.PI;return a<0&&(a+=360),[e,s,a]};gt.lchuv=function(r){return Od.lchuv(gt.luv(r))};const cp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var hp={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Ov(r){var _,m;var e,t=[],n=1,s;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),cp[r])t=cp[r].slice(),s="rgb";else if(r==="transparent")n=0,s="rgb",t=[0,0,0];else if(r[0]==="#"){var l=r.slice(1),a=l.length,c=a<=4;n=1,c?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],a===4&&(n=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],a===8&&(n=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var h=e[1];s=h.replace(/a$/,"");var g=s==="cmyk"?4:s==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=t.shift()),t=t.map(function(y,x){if(y[y.length-1]==="%")return y=parseFloat(y)/100,x===3?y:s==="rgb"?y*255:s[0]==="h"||s[0]==="l"&&!x?y*100:s==="lab"?y*125:s==="lch"?x<2?y*150:y*360:s[0]==="o"&&!x?y:s==="oklab"?y*.4:s==="oklch"?x<2?y*.4:y*360:y;if(s[x]==="h"||x===2&&s[s.length-1]==="h"){if(hp[y]!==void 0)return hp[y];if(y.endsWith("deg"))return parseFloat(y);if(y.endsWith("turn"))return parseFloat(y)*360;if(y.endsWith("grad"))return parseFloat(y)*360/400;if(y.endsWith("rad"))return parseFloat(y)*180/Math.PI}return y==="none"?0:parseFloat(y)}),n=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),s=((m=(_=r.match(/([a-z])/ig))==null?void 0:_.join(""))==null?void 0:m.toLowerCase())||"rgb");return{space:s,values:t,alpha:n}}const ph={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,s,l,a,c,h,g=0;if(t===0)return h=n*255,[h,h,h];for(l=n<.5?n*(1+t):n+t-n*t,s=2*n-l,c=[0,0,0];g<3;)a=e+1/3*-(g-1),a<0?a++:a>1&&a--,h=6*a<1?s+(l-s)*6*a:2*a<1?l:3*a<2?s+(l-s)*(2/3-a)*6:s,c[g++]=h*255;return c}};Ko.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(e,t,n),l=Math.max(e,t,n),a=l-s,c,h,g;return l===s?c=0:e===l?c=(t-n)/a:t===l?c=2+(n-e)/a:n===l&&(c=4+(e-t)/a),c=Math.min(c*60,360),c<0&&(c+=360),g=(s+l)/2,l===s?h=0:g<=.5?h=a/(l+s):h=a/(2-l-s),[c,h*100,g*100]};function Nv(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=Ov(r);if(!t.space)return[];const n=t.space[0]==="h"?ph.min:Ko.min,s=t.space[0]==="h"?ph.max:Ko.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),s[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),s[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),s[2]),t.space[0]==="h"&&(e=ph.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const Nd=[NaN,NaN,NaN,0];function zv(r){return typeof r=="string"?r:Gd(r)}const Gv=1024,Ao={};let mh=0;function jv(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function dp(r){const e=gt.lchuv(Ko.xyz(r));return e[3]=r[3],e}function Uv(r){const e=gt.rgb(Tm.xyz(r));return e[3]=r[3],e}function zd(r){if(r==="none")return Nd;if(Ao.hasOwnProperty(r))return Ao[r];if(mh>=Gv){let t=0;for(const n in Ao)t++&3||(delete Ao[n],--mh)}const e=Nv(r);if(e.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+r+'" as color');return Rm(e),Ao[r]=e,++mh,e}function js(r){return Array.isArray(r)?r:zd(r)}function Rm(r){return r[0]=Ze(r[0]+.5|0,0,255),r[1]=Ze(r[1]+.5|0,0,255),r[2]=Ze(r[2]+.5|0,0,255),r[3]=Ze(r[3],0,1),r}function Gd(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const s=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+s+")"}const rr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Xv=rr.includes("firefox"),Wv=rr.includes("safari")&&!rr.includes("chrom");Wv&&(rr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(rr));const bv=rr.includes("webkit")&&!rr.includes("edge"),Im=rr.includes("macintosh"),Lm=typeof devicePixelRatio<"u"?devicePixelRatio:1,jd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Pm=typeof Image<"u"&&Image.prototype.decode,Mm=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function tt(r,e,t,n){let s;return t&&t.length?s=t.shift():jd?s=new OffscreenCanvas(r||300,e||300):s=document.createElement("canvas"),r&&(s.width=r),e&&(s.height=e),s.getContext("2d",n)}let yh;function Wa(){return yh||(yh=tt(1,1)),yh}function du(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function fp(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function Bv(r){for(;r.lastChild;)r.lastChild.remove()}function Yv(r,e){const t=r.childNodes;for(let n=0;;++n){const s=t[n],l=e[n];if(!s&&!l)break;if(s!==l){if(!s){r.appendChild(l);continue}if(!l){r.removeChild(s),--n;continue}r.insertBefore(l,s)}}}function Vv(r,e,t){const n=r;let s=!0,l=!1,a=!1;const c=[Ua(n,ve.LOAD,function(){a=!0,l||e()})];return n.src&&Pm?(l=!0,n.decode().then(function(){s&&e()}).catch(function(h){s&&(a?e():t())})):c.push(Ua(n,ve.ERROR,t)),function(){s=!1,c.forEach(Ue)}}function Kv(r,e){return new Promise((t,n)=>{function s(){a(),t(r)}function l(){a(),n(new Error("Image load error"))}function a(){r.removeEventListener("load",s),r.removeEventListener("error",l)}r.addEventListener("load",s),r.addEventListener("error",l)})}function Zv(r,e){return e&&(r.src=e),r.src&&Pm?new Promise((t,n)=>r.decode().then(()=>t(r)).catch(s=>r.complete&&r.width?t(r):n(s))):Kv(r)}class Hv{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const s=Eh(e,t,n);return s in this.cache_?this.cache_[s]:null}getPattern(e,t,n){const s=Eh(e,t,n);return s in this.patternCache_?this.patternCache_[s]:null}set(e,t,n,s,l){const a=Eh(e,t,n),c=a in this.cache_;this.cache_[a]=s,l&&(s.getImageState()===Ce.IDLE&&s.load(),s.getImageState()===Ce.LOADING?s.ready().then(()=>{this.patternCache_[a]=Wa().createPattern(s.getImage(1),"repeat")}):this.patternCache_[a]=Wa().createPattern(s.getImage(1),"repeat")),c||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Eh(r,e,t){const n=t?js(t):"null";return e+":"+r+":"+n}const dn=new Hv;let Do=null;class km extends lu{constructor(e,t,n,s,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=s===void 0?Ce.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ce.LOADED){Do||(Do=tt(1,1,void 0,{willReadFrequently:!0})),Do.drawImage(this.image_,0,0);try{Do.getImageData(0,0,1,1),this.tainted_=!1}catch{Do=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ve.CHANGE)}handleImageError_(){this.imageState_=Ce.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ce.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=tt(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ce.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ce.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Zv(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ce.LOADED)return;const t=this.image_,n=tt(Math.ceil(t.width*e),Math.ceil(t.height*e)),s=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=zv(this.color_),n.fillRect(0,0,s.width/e,s.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=s}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)e();else{const t=()=>{(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)&&(this.removeEventListener(ve.CHANGE,t),e())};this.addEventListener(ve.CHANGE,t)}})),this.ready_}}function Ud(r,e,t,n,s,l){let a=e===void 0?void 0:dn.get(e,t,s);return a||(a=new km(r,r&&"src"in r?r.src||void 0:e,t,n,s),dn.set(e,t,s,a,l)),l&&a&&!dn.getPattern(e,t,s)&&dn.set(e,t,s,a,l),a}function gp(r){return r[0]>0&&r[1]>0}function $v(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Bt(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class fu{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Bt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new fu({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ke()}getImage(e){return ke()}getHitDetectionImage(){return ke()}getPixelRatio(e){return 1}getImageState(){return ke()}getImageSize(){return ke()}getOrigin(){return ke()}getSize(){return ke()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bt(e)}listenImageChange(e){ke()}load(){ke()}unlistenImageChange(e){ke()}ready(){return Promise.resolve()}}function Yn(r){return r?Array.isArray(r)?Gd(r):typeof r=="object"&&"src"in r?qv(r):r:null}function qv(r){if(!r.offset||!r.size)return dn.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=dn.getPattern(e,void 0,r.color);if(t)return t;const n=dn.get(r.src,"anonymous",null);if(n.getImageState()!==Ce.LOADED)return null;const s=tt(r.size[0],r.size[1]);return s.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),Ud(s.canvas,e,void 0,Ce.LOADED,r.color,!0),dn.getPattern(e,void 0,r.color)}const Ta="ol-hidden",gu="ol-unselectable",Xd="ol-control",_p="ol-collapsed",Qv=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),pp=["style","variant","weight","size","lineHeight","family"],Am=function(r){const e=r.match(Qv);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=pp.length;n<s;++n){const l=e[n+1];l!==void 0&&(t[pp[n]]=l)}return t.families=t.family.split(/,\s?/),t},Dm="10px sans-serif",Xt="#000",Us="round",fi=[],gi=0,Xs="round",Zo=10,Ho="#000",$o="center",ba="middle",Mr=[0,0,0,0],qo=1,ui=new Zn;let vs=null,Bh;const Yh={},Jv=function(){const e="32px ",t=["monospace","serif"],n=t.length,s="wmytzilWMYTZIL@#/&?$%10";let l,a;function c(g,_,m){let y=!0;for(let x=0;x<n;++x){const E=t[x];if(a=Ba(g+" "+_+" "+e+E,s),m!=E){const w=Ba(g+" "+_+" "+e+m+","+E,s);y=y&&w!=a}}return!!y}function h(){let g=!0;const _=ui.getKeys();for(let m=0,y=_.length;m<y;++m){const x=_[m];if(ui.get(x)<100){const[E,w,C]=x.split(`
`);c(E,w,C)?(il(Yh),vs=null,Bh=void 0,ui.set(x,100)):(ui.set(x,ui.get(x)+1,!0),g=!1)}}g&&(clearInterval(l),l=void 0)}return function(g){const _=Am(g);if(!_)return;const m=_.families;for(let y=0,x=m.length;y<x;++y){const E=m[y],w=_.style+`
`+_.weight+`
`+E;ui.get(w)===void 0&&(ui.set(w,100,!0),c(_.style,_.weight,E)||(ui.set(w,0,!0),l===void 0&&(l=setInterval(h,32))))}}}(),ex=function(){let r;return function(e){let t=Yh[e];if(t==null){if(jd){const n=Am(e),s=Fm(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);Yh[e]=t}return t}}();function Fm(r,e){return vs||(vs=tt(1,1)),r!=Bh&&(vs.font=r,Bh=vs.font),vs.measureText(e)}function Ba(r,e){return Fm(r,e).width}function mp(r,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((s,l)=>Math.max(s,Ba(r,l)),0);return t[e]=n,n}function tx(r,e){const t=[],n=[],s=[];let l=0,a=0,c=0,h=0;for(let g=0,_=e.length;g<=_;g+=2){const m=e[g];if(m===`
`||g===_){l=Math.max(l,a),s.push(a),a=0,c+=h,h=0;continue}const y=e[g+1]||r.font,x=Ba(y,m);t.push(x),a+=x;const E=ex(y);n.push(E),h=Math.max(h,E)}return{width:l,height:c,widths:t,heights:n,lineWidths:s}}function nx(r,e,t,n,s,l,a,c,h,g,_){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=m=>m.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),n.contextInstructions?(r.translate(h,g),r.scale(_[0],_[1]),ix(n,r)):_[0]<0||_[1]<0?(r.translate(h,g),r.scale(_[0],_[1]),r.drawImage(n,s,l,a,c,0,0,a,c)):r.drawImage(n,s,l,a,c,h,g,a*_[0],c*_[1]),r.restore()}function ix(r,e){const t=r.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class _u extends fu{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ce.LOADING:Ce.LOADED,this.imageState_===Ce.LOADING&&this.ready().then(()=>this.imageState_=Ce.LOADED),this.render()}clone(){const e=this.getScale(),t=new _u({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var l,a;const t=(l=this.fill_)==null?void 0:l.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let s=(a=dn.get(n,null,null))==null?void 0:a.getImage(1);if(!s){const c=this.renderOptions_,h=Math.ceil(c.size*e),g=tt(h,h);this.draw_(c,g,e),s=g.canvas,dn.set(n,null,null,new km(s,void 0,null,Ce.LOADED,null))}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius,l=this.radius2_===void 0?s:this.radius2_;if(s<l){const W=s;s=l,l=W}const a=this.radius2_===void 0?this.points_:this.points_*2,c=2*Math.PI/a,h=l*Math.sin(c),g=Math.sqrt(l*l-h*h),_=s-g,m=Math.sqrt(h*h+_*_),y=m/h;if(e==="miter"&&y<=n)return y*t;const x=t/2/y,E=t/2*(_/m),C=Math.sqrt((s+x)*(s+x)+E*E)-s;if(this.radius2_===void 0||e==="bevel")return C*2;const I=s*Math.sin(c),R=Math.sqrt(s*s-I*I),D=l-R,k=Math.sqrt(I*I+D*D)/I;if(k<=n){const W=k*t/2-l-s;return 2*Math.max(C,W)}return C*2}createRenderOptions(){let e=Us,t=Xs,n=0,s=null,l=0,a,c=0;this.stroke_&&(a=Yn(this.stroke_.getColor()??Ho),c=this.stroke_.getWidth()??qo,s=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Xs,e=this.stroke_.getLineCap()??Us,n=this.stroke_.getMiterLimit()??Zo);const h=this.calculateLineJoinSize_(t,c,n),g=Math.max(this.radius,this.radius2_||0),_=Math.ceil(2*g+h);return{strokeStyle:a,strokeWidth:c,size:_,lineCap:e,lineDash:s,lineDashOffset:l,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Xt),t.fillStyle=Yn(s),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),s=0;typeof n=="string"&&(n=js(n)),n===null?s=1:Array.isArray(n)&&(s=n.length===4?n[3]:1),s===0&&(t=tt(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let c=0;c<t;c++){const h=l+c*a,g=c%2===0?n:s;e.lineTo(g*Math.cos(h),g*Math.sin(h))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Xt,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class ol extends _u{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new ol({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Fr{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Fr({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Ud(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ce.IDLE&&t.load(),t.getImageState()===Ce.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Fe(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:js(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Dr{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Dr({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Mn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=yp,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Mn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=yp,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function rx(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(Ae(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let vh=null;function Om(r,e){if(!vh){const t=new Fr({color:"rgba(255,255,255,0.4)"}),n=new Dr({color:"#3399CC",width:1.25});vh=[new Mn({image:new ol({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return vh}function sx(){const r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new Mn({fill:new Fr({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new Mn({stroke:new Dr({color:e,width:n+2})}),new Mn({stroke:new Dr({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new Mn({image:new ol({radius:n*2,fill:new Fr({color:t}),stroke:new Dr({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function yp(r){return r.getGeometry()}function Ep(r,e,t,n){return t!==void 0&&n!==void 0?[t/r,n/e]:t!==void 0?t/r:n!==void 0?n/e:1}class pu extends fu{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let c=e.src;Ae(!(c!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(c===void 0||c.length===0)&&a&&(c=a.src||Fe(a)),Ae(c!==void 0&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),Ae(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let h;if(e.src!==void 0?h=Ce.IDLE:a!==void 0&&("complete"in a?a.complete?h=a.src?Ce.LOADED:Ce.IDLE:h=Ce.LOADING:h=Ce.LOADED),this.color_=e.color!==void 0?js(e.color):null,this.iconImage_=Ud(a,c,this.crossOrigin_,h,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,_;if(e.size)[g,_]=e.size;else{const m=this.getImage(1);if(m.width&&m.height)g=m.width,_=m.height;else if(m instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(Ep(x[0],x[1],e.width,e.height))};this.listenImageChange(y);return}}g!==void 0&&this.setScale(Ep(g,_,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new pu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(ve.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(ve.CHANGE,e)}ready(){return this.iconImage_.ready()}}const ox="#333";class Wd{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Bt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fr({color:ox}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Wd({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let zr=0;const kt=1<<zr++,Re=1<<zr++,Wt=1<<zr++,Ln=1<<zr++,Or=1<<zr++,zo=1<<zr++,Ra=Math.pow(2,zr)-1,bd={[kt]:"boolean",[Re]:"number",[Wt]:"string",[Ln]:"color",[Or]:"number[]",[zo]:"size"},lx=Object.keys(bd).map(Number).sort(er);function ax(r){return r in bd}function Go(r){const e=[];for(const t of lx)jo(r,t)&&e.push(bd[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function jo(r,e){return(r&e)===e}function bi(r,e){return r===e}class st{constructor(e,t){if(!ax(e))throw new Error(`literal expressions must have a specific type, got ${Go(e)}`);this.type=e,this.value=t}}class ux{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function Nm(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function _t(r,e,t){switch(typeof r){case"boolean":{if(bi(e,Wt))return new st(Wt,r?"true":"false");if(!jo(e,kt))throw new Error(`got a boolean, but expected ${Go(e)}`);return new st(kt,r)}case"number":{if(bi(e,zo))return new st(zo,Bt(r));if(bi(e,kt))return new st(kt,!!r);if(bi(e,Wt))return new st(Wt,r.toString());if(!jo(e,Re))throw new Error(`got a number, but expected ${Go(e)}`);return new st(Re,r)}case"string":{if(bi(e,Ln))return new st(Ln,zd(r));if(bi(e,kt))return new st(kt,!!r);if(!jo(e,Wt))throw new Error(`got a string, but expected ${Go(e)}`);return new st(Wt,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return vx(r,e,t);for(const n of r)if(typeof n!="number")throw new Error("expected an array of numbers");if(bi(e,zo)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new st(zo,r)}if(bi(e,Ln)){if(r.length===3)return new st(Ln,[...r,1]);if(r.length===4)return new st(Ln,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!jo(e,Or))throw new Error(`got an array of numbers, but expected ${Go(e)}`);return new st(Or,r)}const X={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},cx={[X.Get]:Ee(we(1,1/0),vp),[X.Var]:Ee(we(1,1),hx),[X.Has]:Ee(we(1,1/0),vp),[X.Id]:Ee(dx,fs),[X.Concat]:Ee(we(2,1/0),De(Wt)),[X.GeometryType]:Ee(fx,fs),[X.LineMetric]:Ee(fs),[X.Resolution]:Ee(fs),[X.Zoom]:Ee(fs),[X.Time]:Ee(fs),[X.Any]:Ee(we(2,1/0),De(kt)),[X.All]:Ee(we(2,1/0),De(kt)),[X.Not]:Ee(we(1,1),De(kt)),[X.Equal]:Ee(we(2,2),De(Ra)),[X.NotEqual]:Ee(we(2,2),De(Ra)),[X.GreaterThan]:Ee(we(2,2),De(Re)),[X.GreaterThanOrEqualTo]:Ee(we(2,2),De(Re)),[X.LessThan]:Ee(we(2,2),De(Re)),[X.LessThanOrEqualTo]:Ee(we(2,2),De(Re)),[X.Multiply]:Ee(we(2,1/0),xp),[X.Coalesce]:Ee(we(2,1/0),xp),[X.Divide]:Ee(we(2,2),De(Re)),[X.Add]:Ee(we(2,1/0),De(Re)),[X.Subtract]:Ee(we(2,2),De(Re)),[X.Clamp]:Ee(we(3,3),De(Re)),[X.Mod]:Ee(we(2,2),De(Re)),[X.Pow]:Ee(we(2,2),De(Re)),[X.Abs]:Ee(we(1,1),De(Re)),[X.Floor]:Ee(we(1,1),De(Re)),[X.Ceil]:Ee(we(1,1),De(Re)),[X.Round]:Ee(we(1,1),De(Re)),[X.Sin]:Ee(we(1,1),De(Re)),[X.Cos]:Ee(we(1,1),De(Re)),[X.Atan]:Ee(we(1,2),De(Re)),[X.Sqrt]:Ee(we(1,1),De(Re)),[X.Match]:Ee(we(4,1/0),wp,_x),[X.Between]:Ee(we(3,3),De(Re)),[X.Interpolate]:Ee(we(6,1/0),wp,px),[X.Case]:Ee(we(3,1/0),gx,mx),[X.In]:Ee(we(2,2),yx),[X.Number]:Ee(we(1,1/0),De(Ra)),[X.String]:Ee(we(1,1/0),De(Ra)),[X.Array]:Ee(we(1,1/0),De(Re)),[X.Color]:Ee(we(1,4),De(Re)),[X.Band]:Ee(we(1,3),De(Re)),[X.Palette]:Ee(we(2,2),Ex),[X.ToString]:Ee(we(1,1),De(kt|Re|Wt|Ln))};function vp(r,e,t){const n=r.length-1,s=new Array(n);for(let l=0;l<n;++l){const a=r[l+1];switch(typeof a){case"number":{s[l]=new st(Re,a);break}case"string":{s[l]=new st(Wt,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}l===0&&t.properties.add(String(a))}return s}function hx(r,e,t){const n=r[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new st(Wt,n)]}function dx(r,e,t){t.featureId=!0}function fx(r,e,t){t.geometryType=!0}function fs(r,e,t){const n=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function we(r,e){return function(t,n,s){const l=t[0],a=t.length-1;if(r===e){if(a!==r){const c=r===1?"":"s";throw new Error(`expected ${r} argument${c} for ${l}, got ${a}`)}}else if(a<r||a>e){const c=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${c} arguments for ${l}, got ${a}`)}}}function xp(r,e,t){const n=r.length-1,s=new Array(n);for(let l=0;l<n;++l){const a=_t(r[l+1],e,t);s[l]=a}return s}function De(r){return function(e,t,n){const s=e.length-1,l=new Array(s);for(let a=0;a<s;++a){const c=_t(e[a+1],r,n);l[a]=c}return l}}function gx(r,e,t){const n=r[0],s=r.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}function wp(r,e,t){const n=r[0],s=r.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function _x(r,e,t){const n=r.length-1,s=Wt|Re|kt,l=_t(r[1],s,t),a=_t(r[r.length-1],e,t),c=new Array(n-2);for(let h=0;h<n-2;h+=2){try{const g=_t(r[h+2],l.type,t);c[h]=g}catch(g){throw new Error(`failed to parse argument ${h+1} of match expression: ${g.message}`)}try{const g=_t(r[h+3],a.type,t);c[h+1]=g}catch(g){throw new Error(`failed to parse argument ${h+2} of match expression: ${g.message}`)}}return[l,...c,a]}function px(r,e,t){const n=r[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const h=n[1];if(typeof h!="number"||h<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(h)} instead`);s=h;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new st(Re,s);let a;try{a=_t(r[2],Re,t)}catch(h){throw new Error(`failed to parse argument 1 in interpolate expression: ${h.message}`)}const c=new Array(r.length-3);for(let h=0;h<c.length;h+=2){try{const g=_t(r[h+3],Re,t);c[h]=g}catch(g){throw new Error(`failed to parse argument ${h+2} for interpolate expression: ${g.message}`)}try{const g=_t(r[h+4],e,t);c[h+1]=g}catch(g){throw new Error(`failed to parse argument ${h+3} for interpolate expression: ${g.message}`)}}return[l,a,...c]}function mx(r,e,t){const n=_t(r[r.length-1],e,t),s=new Array(r.length-1);for(let l=0;l<s.length-1;l+=2){try{const a=_t(r[l+1],kt,t);s[l]=a}catch(a){throw new Error(`failed to parse argument ${l} of case expression: ${a.message}`)}try{const a=_t(r[l+2],n.type,t);s[l+1]=a}catch(a){throw new Error(`failed to parse argument ${l+1} of case expression: ${a.message}`)}}return s[s.length-1]=n,s}function yx(r,e,t){let n=r[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=Wt}else s=Re;const l=new Array(n.length);for(let c=0;c<l.length;c++)try{const h=_t(n[c],s,t);l[c]=h}catch(h){throw new Error(`failed to parse haystack item ${c} for "in" expression: ${h.message}`)}return[_t(r[1],s,t),...l]}function Ex(r,e,t){let n;try{n=_t(r[1],Re,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const s=r[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const l=new Array(s.length);for(let a=0;a<l.length;a++){let c;try{c=_t(s[a],Ln,t)}catch(h){throw new Error(`failed to parse color at index ${a} in palette expression: ${h.message}`)}if(!(c instanceof st))throw new Error(`the palette color at index ${a} must be a literal value`);l[a]=c}return[n,...l]}function Ee(...r){return function(e,t,n){const s=e[0];let l;for(let a=0;a<r.length;a++){const c=r[a](e,t,n);if(a==r.length-1){if(!c)throw new Error("expected last argument validator to return the parsed args");l=c}}return new ux(t,s,...l)}}function vx(r,e,t){const n=r[0],s=cx[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(r,e,t)}function zm(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return zm(r.getGeometries()[0]);default:return""}}function Gm(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function vi(r,e,t){const n=_t(r,e,t);return An(n)}function An(r,e){if(r instanceof st){if(r.type===Ln&&typeof r.value=="string"){const n=zd(r.value);return function(){return n}}return function(){return r.value}}const t=r.operator;switch(t){case X.Number:case X.String:case X.Coalesce:return xx(r);case X.Get:case X.Var:case X.Has:return wx(r);case X.Id:return n=>n.featureId;case X.GeometryType:return n=>n.geometryType;case X.Concat:{const n=r.args.map(s=>An(s));return s=>"".concat(...n.map(l=>l(s).toString()))}case X.Resolution:return n=>n.resolution;case X.Any:case X.All:case X.Between:case X.In:case X.Not:return Sx(r);case X.Equal:case X.NotEqual:case X.LessThan:case X.LessThanOrEqualTo:case X.GreaterThan:case X.GreaterThanOrEqualTo:return Cx(r);case X.Multiply:case X.Divide:case X.Add:case X.Subtract:case X.Clamp:case X.Mod:case X.Pow:case X.Abs:case X.Floor:case X.Ceil:case X.Round:case X.Sin:case X.Cos:case X.Atan:case X.Sqrt:return Tx(r);case X.Case:return Rx(r);case X.Match:return Ix(r);case X.Interpolate:return Lx(r);case X.ToString:return Px(r);default:throw new Error(`Unsupported operator ${t}`)}}function xx(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=An(r.args[l]);switch(t){case X.Coalesce:return l=>{for(let a=0;a<n;++a){const c=s[a](l);if(typeof c<"u"&&c!==null)return c}throw new Error("Expected one of the values to be non-null")};case X.Number:case X.String:return l=>{for(let a=0;a<n;++a){const c=s[a](l);if(typeof c===t)return c}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function wx(r,e){const n=r.args[0].value;switch(r.operator){case X.Get:return s=>{const l=r.args;let a=s.properties[n];for(let c=1,h=l.length;c<h;++c){const _=l[c].value;a=a[_]}return a};case X.Var:return s=>s.variables[n];case X.Has:return s=>{const l=r.args;if(!(n in s.properties))return!1;let a=s.properties[n];for(let c=1,h=l.length;c<h;++c){const _=l[c].value;if(!a||!Object.hasOwn(a,_))return!1;a=a[_]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function Cx(r,e){const t=r.operator,n=An(r.args[0]),s=An(r.args[1]);switch(t){case X.Equal:return l=>n(l)===s(l);case X.NotEqual:return l=>n(l)!==s(l);case X.LessThan:return l=>n(l)<s(l);case X.LessThanOrEqualTo:return l=>n(l)<=s(l);case X.GreaterThan:return l=>n(l)>s(l);case X.GreaterThanOrEqualTo:return l=>n(l)>=s(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Sx(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=An(r.args[l]);switch(t){case X.Any:return l=>{for(let a=0;a<n;++a)if(s[a](l))return!0;return!1};case X.All:return l=>{for(let a=0;a<n;++a)if(!s[a](l))return!1;return!0};case X.Between:return l=>{const a=s[0](l),c=s[1](l),h=s[2](l);return a>=c&&a<=h};case X.In:return l=>{const a=s[0](l);for(let c=1;c<n;++c)if(a===s[c](l))return!0;return!1};case X.Not:return l=>!s[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function Tx(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=An(r.args[l]);switch(t){case X.Multiply:return l=>{let a=1;for(let c=0;c<n;++c)a*=s[c](l);return a};case X.Divide:return l=>s[0](l)/s[1](l);case X.Add:return l=>{let a=0;for(let c=0;c<n;++c)a+=s[c](l);return a};case X.Subtract:return l=>s[0](l)-s[1](l);case X.Clamp:return l=>{const a=s[0](l),c=s[1](l);if(a<c)return c;const h=s[2](l);return a>h?h:a};case X.Mod:return l=>s[0](l)%s[1](l);case X.Pow:return l=>Math.pow(s[0](l),s[1](l));case X.Abs:return l=>Math.abs(s[0](l));case X.Floor:return l=>Math.floor(s[0](l));case X.Ceil:return l=>Math.ceil(s[0](l));case X.Round:return l=>Math.round(s[0](l));case X.Sin:return l=>Math.sin(s[0](l));case X.Cos:return l=>Math.cos(s[0](l));case X.Atan:return n===2?l=>Math.atan2(s[0](l),s[1](l)):l=>Math.atan(s[0](l));case X.Sqrt:return l=>Math.sqrt(s[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Rx(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=An(r.args[s]);return s=>{for(let l=0;l<t-1;l+=2)if(n[l](s))return n[l+1](s);return n[t-1](s)}}function Ix(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=An(r.args[s]);return s=>{const l=n[0](s);for(let a=1;a<t;a+=2)if(l===n[a](s))return n[a+1](s);return n[t-1](s)}}function Lx(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=An(r.args[s]);return s=>{const l=n[0](s),a=n[1](s);let c,h;for(let g=2;g<t;g+=2){const _=n[g](s);let m=n[g+1](s);const y=Array.isArray(m);if(y&&(m=jv(m)),_>=a)return g===2?m:y?Mx(l,a,c,h,_,m):Uo(l,a,c,h,_,m);c=_,h=m}return h}}function Px(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=An(r.args[l]);switch(t){case X.ToString:return l=>{const a=s[0](l);return r.args[0].type===Ln?Gd(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Uo(r,e,t,n,s,l){const a=s-t;if(a===0)return n;const c=e-t,h=r===1?c/a:(Math.pow(r,c)-1)/(Math.pow(r,a)-1);return n+h*(l-n)}function Mx(r,e,t,n,s,l){if(s-t===0)return n;const c=dp(n),h=dp(l);let g=h[2]-c[2];g>180?g-=360:g<-180&&(g+=360);const _=[Uo(r,e,t,c[0],s,h[0]),Uo(r,e,t,c[1],s,h[1]),c[2]+Uo(r,e,t,0,s,g),Uo(r,e,t,n[3],s,l[3])];return Rm(Uv(_))}function kx(r){return!0}function Ax(r){const e=Nm(),t=Dx(r,e),n=Gm();return function(s,l){if(n.properties=s.getPropertiesInternal(),n.resolution=l,e.featureId){const a=s.getId();a!==void 0?n.featureId=a:n.featureId=null}return e.geometryType&&(n.geometryType=zm(s.getGeometry())),t(n)}}function Cp(r){const e=Nm(),t=r.length,n=new Array(t);for(let a=0;a<t;++a)n[a]=Vh(r[a],e);const s=Gm(),l=new Array(t);return function(a,c){if(s.properties=a.getPropertiesInternal(),s.resolution=c,e.featureId){const g=a.getId();g!==void 0?s.featureId=g:s.featureId=null}let h=0;for(let g=0;g<t;++g){const _=n[g](s);_&&(l[h]=_,h+=1)}return l.length=h,l}}function Dx(r,e){const t=r.length,n=new Array(t);for(let s=0;s<t;++s){const l=r[s],a="filter"in l?vi(l.filter,kt,e):kx;let c;if(Array.isArray(l.style)){const h=l.style.length;c=new Array(h);for(let g=0;g<h;++g)c[g]=Vh(l.style[g],e)}else c=[Vh(l.style,e)];n[s]={filter:a,styles:c}}return function(s){const l=[];let a=!1;for(let c=0;c<t;++c){const h=n[c].filter;if(h(s)&&!(r[c].else&&a)){a=!0;for(const g of n[c].styles){const _=g(s);_&&l.push(_)}}}return l}}function Vh(r,e){const t=Qo(r,"",e),n=Jo(r,"",e),s=Fx(r,e),l=Ox(r,e),a=bt(r,"z-index",e);if(!t&&!n&&!s&&!l&&!Ds(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const c=new Mn;return function(h){let g=!0;if(t){const _=t(h);_&&(g=!1),c.setFill(_)}if(n){const _=n(h);_&&(g=!1),c.setStroke(_)}if(s){const _=s(h);_&&(g=!1),c.setText(_)}if(l){const _=l(h);_&&(g=!1),c.setImage(_)}return a&&c.setZIndex(a(h)),g?null:c}}function Qo(r,e,t){let n;if(e+"fill-pattern-src"in r)n=jx(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return l=>null;n=Bd(r,e+"fill-color",t)}if(!n)return null;const s=new Fr;return function(l){const a=n(l);return a===Nd?null:(s.setColor(a),s)}}function Jo(r,e,t){const n=bt(r,e+"stroke-width",t),s=Bd(r,e+"stroke-color",t);if(!n&&!s)return null;const l=hi(r,e+"stroke-line-cap",t),a=hi(r,e+"stroke-line-join",t),c=jm(r,e+"stroke-line-dash",t),h=bt(r,e+"stroke-line-dash-offset",t),g=bt(r,e+"stroke-miter-limit",t),_=new Dr;return function(m){if(s){const y=s(m);if(y===Nd)return null;_.setColor(y)}if(n&&_.setWidth(n(m)),l){const y=l(m);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");_.setLineCap(y)}if(a){const y=a(m);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");_.setLineJoin(y)}return c&&_.setLineDash(c(m)),h&&_.setLineDashOffset(h(m)),g&&_.setMiterLimit(g(m)),_}}function Fx(r,e){const t="text-",n=hi(r,t+"value",e);if(!n)return null;const s=Qo(r,t,e),l=Qo(r,t+"background-",e),a=Jo(r,t,e),c=Jo(r,t+"background-",e),h=hi(r,t+"font",e),g=bt(r,t+"max-angle",e),_=bt(r,t+"offset-x",e),m=bt(r,t+"offset-y",e),y=ks(r,t+"overflow",e),x=hi(r,t+"placement",e),E=bt(r,t+"repeat",e),w=mu(r,t+"scale",e),C=ks(r,t+"rotate-with-view",e),I=bt(r,t+"rotation",e),R=hi(r,t+"align",e),D=hi(r,t+"justify",e),P=hi(r,t+"baseline",e),k=ks(r,t+"keep-upright",e),W=jm(r,t+"padding",e),Z=yu(r,t+"declutter-mode"),j=new Wd({declutterMode:Z});return function(b){if(j.setText(n(b)),s&&j.setFill(s(b)),l&&j.setBackgroundFill(l(b)),a&&j.setStroke(a(b)),c&&j.setBackgroundStroke(c(b)),h&&j.setFont(h(b)),g&&j.setMaxAngle(g(b)),_&&j.setOffsetX(_(b)),m&&j.setOffsetY(m(b)),y&&j.setOverflow(y(b)),x){const B=x(b);if(B!=="point"&&B!=="line")throw new Error("Expected point or line for text-placement");j.setPlacement(B)}if(E&&j.setRepeat(E(b)),w&&j.setScale(w(b)),C&&j.setRotateWithView(C(b)),I&&j.setRotation(I(b)),R){const B=R(b);if(B!=="left"&&B!=="center"&&B!=="right"&&B!=="end"&&B!=="start")throw new Error("Expected left, right, center, start, or end for text-align");j.setTextAlign(B)}if(D){const B=D(b);if(B!=="left"&&B!=="right"&&B!=="center")throw new Error("Expected left, right, or center for text-justify");j.setJustify(B)}if(P){const B=P(b);if(B!=="bottom"&&B!=="top"&&B!=="middle"&&B!=="alphabetic"&&B!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");j.setTextBaseline(B)}return W&&j.setPadding(W(b)),k&&j.setKeepUpright(k(b)),j}}function Ox(r,e){return"icon-src"in r?Nx(r,e):"shape-points"in r?zx(r,e):"circle-radius"in r?Gx(r,e):null}function Nx(r,e){const t="icon-",n=t+"src",s=Um(r[n],n),l=Ya(r,t+"anchor",e),a=mu(r,t+"scale",e),c=bt(r,t+"opacity",e),h=Ya(r,t+"displacement",e),g=bt(r,t+"rotation",e),_=ks(r,t+"rotate-with-view",e),m=Tp(r,t+"anchor-origin"),y=Rp(r,t+"anchor-x-units"),x=Rp(r,t+"anchor-y-units"),E=bx(r,t+"color"),w=Xx(r,t+"cross-origin"),C=Wx(r,t+"offset"),I=Tp(r,t+"offset-origin"),R=Va(r,t+"width"),D=Va(r,t+"height"),P=Ux(r,t+"size"),k=yu(r,t+"declutter-mode"),W=new pu({src:s,anchorOrigin:m,anchorXUnits:y,anchorYUnits:x,color:E,crossOrigin:w,offset:C,offsetOrigin:I,height:D,width:R,size:P,declutterMode:k});return function(Z){return c&&W.setOpacity(c(Z)),h&&W.setDisplacement(h(Z)),g&&W.setRotation(g(Z)),_&&W.setRotateWithView(_(Z)),a&&W.setScale(a(Z)),l&&W.setAnchor(l(Z)),W}}function zx(r,e){const t="shape-",n=t+"points",s=t+"radius",l=Kh(r[n],n),a=Kh(r[s],s),c=Qo(r,t,e),h=Jo(r,t,e),g=mu(r,t+"scale",e),_=Ya(r,t+"displacement",e),m=bt(r,t+"rotation",e),y=ks(r,t+"rotate-with-view",e),x=Va(r,t+"radius2"),E=Va(r,t+"angle"),w=yu(r,t+"declutter-mode"),C=new _u({points:l,radius:a,radius2:x,angle:E,declutterMode:w});return function(I){return c&&C.setFill(c(I)),h&&C.setStroke(h(I)),_&&C.setDisplacement(_(I)),m&&C.setRotation(m(I)),y&&C.setRotateWithView(y(I)),g&&C.setScale(g(I)),C}}function Gx(r,e){const t="circle-",n=Qo(r,t,e),s=Jo(r,t,e),l=bt(r,t+"radius",e),a=mu(r,t+"scale",e),c=Ya(r,t+"displacement",e),h=bt(r,t+"rotation",e),g=ks(r,t+"rotate-with-view",e),_=yu(r,t+"declutter-mode"),m=new ol({radius:5,declutterMode:_});return function(y){return l&&m.setRadius(l(y)),n&&m.setFill(n(y)),s&&m.setStroke(s(y)),c&&m.setDisplacement(c(y)),h&&m.setRotation(h(y)),g&&m.setRotateWithView(g(y)),a&&m.setScale(a(y)),m}}function bt(r,e,t){if(!(e in r))return;const n=vi(r[e],Re,t);return function(s){return Kh(n(s),e)}}function hi(r,e,t){if(!(e in r))return null;const n=vi(r[e],Wt,t);return function(s){return Um(n(s),e)}}function jx(r,e,t){const n=hi(r,e+"pattern-src",t),s=Sp(r,e+"pattern-offset",t),l=Sp(r,e+"pattern-size",t),a=Bd(r,e+"color",t);return function(c){return{src:n(c),offset:s&&s(c),size:l&&l(c),color:a&&a(c)}}}function ks(r,e,t){if(!(e in r))return null;const n=vi(r[e],kt,t);return function(s){const l=n(s);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function Bd(r,e,t){if(!(e in r))return null;const n=vi(r[e],Ln,t);return function(s){return Xm(n(s),e)}}function jm(r,e,t){if(!(e in r))return null;const n=vi(r[e],Or,t);return function(s){return ll(n(s),e)}}function Ya(r,e,t){if(!(e in r))return null;const n=vi(r[e],Or,t);return function(s){const l=ll(n(s),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function Sp(r,e,t){if(!(e in r))return null;const n=vi(r[e],Or,t);return function(s){return Wm(n(s),e)}}function mu(r,e,t){if(!(e in r))return null;const n=vi(r[e],Or|Re,t);return function(s){return Bx(n(s),e)}}function Va(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Ux(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return Bt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Xx(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Tp(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Rp(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Wx(r,e){const t=r[e];if(t!==void 0)return ll(t,e)}function yu(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function bx(r,e){const t=r[e];if(t!==void 0)return Xm(t,e)}function ll(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let n=0;n<t;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function Um(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function Kh(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function Xm(r,e){if(typeof r=="string")return r;const t=ll(r,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Wm(r,e){const t=ll(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Bx(r,e){return typeof r=="number"?r:Wm(r,e)}const Ip={RENDER_ORDER:"renderOrder"};class bm extends hu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Ip.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new Sm(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Ip.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?Om:e;const t=Yx(e);this.styleFunction_=e===null?void 0:rx(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Yx(r){if(r===void 0)return Om;if(!r)return null;if(typeof r=="function"||r instanceof Mn)return r;if(!Array.isArray(r))return Cp([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof Mn){const s=new Array(e);for(let l=0;l<e;++l){const a=r[l];if(!(a instanceof Mn))throw new Error("Expected a list of style instances");s[l]=a}return s}if("style"in t){const s=new Array(e);for(let l=0;l<e;++l){const a=r[l];if(!("style"in a))throw new Error("Expected a list of rules with a style property");s[l]=a}return Ax(s)}return Cp(r)}class Vx extends ou{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ke()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;yi(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),dm(s,n)}forEachFeatureAtCoordinate(e,t,n,s,l,a,c,h){let g;const _=t.viewState;function m(P,k,W,Z){return l.call(a,k,P?W:null,Z)}const y=_.projection,x=Qp(e.slice(),y),E=[[0,0]];if(y.canWrapX()&&s){const P=y.getExtent(),k=Pe(P);E.push([-k,0],[k,0])}const w=t.layerStatesArray,C=w.length,I=[],R=[];for(let P=0;P<E.length;P++)for(let k=C-1;k>=0;--k){const W=w[k],Z=W.layer;if(Z.hasRenderer()&&Fd(W,_)&&c.call(h,Z)){const j=Z.getRenderer(),b=Z.getSource();if(j&&b){const B=b.getWrapX()?x:e,ie=m.bind(null,W.managed);R[0]=B[0]+E[P][0],R[1]=B[1]+E[P][1],g=j.forEachFeatureAtCoordinate(R,t,n,ie,I)}if(g)return g}}if(I.length===0)return;const D=1/I.length;return I.forEach((P,k)=>P.distanceSq+=k*D),I.sort((P,k)=>P.distanceSq-k.distanceSq),I.some(P=>g=P.callback(P.feature,P.layer,P.geometry)),g}hasFeatureAtCoordinate(e,t,n,s,l,a){return this.forEachFeatureAtCoordinate(e,t,n,s,zs,this,l,a)!==void 0}getMap(){return this.map_}renderFrame(e){ke()}scheduleExpireIconCache(e){dn.canExpireCache()&&e.postRenderFunctions.push(Kx)}}function Kx(r,e){dn.expire()}class Bm extends Kn{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}}class Zx extends Vx{constructor(e){super(e),this.fontChangeListenerKey_=Ie(ui,Ns.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=gu+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new Bm(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){Ue(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(hn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,h)=>c.zIndex-h.zIndex);t.some(c=>c.layer instanceof bm&&c.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const l=[];let a=null;for(let c=0,h=t.length;c<h;++c){const g=t[c];e.layerIndex=c;const _=g.layer,m=_.getSourceState();if(!Fd(g,s)||m!="ready"&&m!="undefined"){_.unrender();continue}const y=_.render(e,a);y&&(y!==a&&(this.children_.push(y),a=y),l.push(g))}this.declutter(e,l),Yv(this.element_,this.children_),this.dispatchRenderEvent(hn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const s=t[n],l=s.layer;l.getDeclutter()&&l.renderDeclutter(e,s)}t.forEach(n=>n.layer.renderDeferred(e))}}}class Hi extends Kn{constructor(e,t){super(e),this.layer=t}}const xh={LAYERS:"layers"};class Bs extends cm{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(xh.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Bn(n.slice(),{unique:!0}):Ae(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Bn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ue),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ie(e,Ut.ADD,this.handleLayersAdd_,this),Ie(e,Ut.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Ue);il(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const l=t[n];this.registerLayerListeners_(l),this.dispatchEvent(new Hi("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[Ie(e,Ns.PROPERTYCHANGE,this.handleLayerChange_,this),Ie(e,ve.CHANGE,this.handleLayerChange_,this)];e instanceof Bs&&t.push(Ie(e,"addlayer",this.handleLayerGroupAdd_,this),Ie(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Fe(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Hi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Hi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Hi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Fe(t);this.listenerKeys_[n].forEach(Ue),delete this.listenerKeys_[n],this.dispatchEvent(new Hi("removelayer",t)),this.changed()}getLayers(){return this.get(xh.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,l=n.length;s<l;++s)this.dispatchEvent(new Hi("removelayer",n[s]))}this.set(xh.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const s=this.getLayerState();let l=s.zIndex;!e&&s.zIndex===void 0&&(l=0);for(let a=n,c=t.length;a<c;a++){const h=t[a];h.opacity*=s.opacity,h.visible=h.visible&&s.visible,h.maxResolution=Math.min(h.maxResolution,s.maxResolution),h.minResolution=Math.max(h.minResolution,s.minResolution),h.minZoom=Math.max(h.minZoom,s.minZoom),h.maxZoom=Math.min(h.maxZoom,s.maxZoom),s.extent!==void 0&&(h.extent!==void 0?h.extent=Pn(h.extent,s.extent):h.extent=s.extent),h.zIndex===void 0&&(h.zIndex=l)}return t}getSourceState(){return"ready"}}class xs extends Kn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class ci extends xs{constructor(e,t,n,s,l,a){super(e,t,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Oe={SINGLECLICK:"singleclick",CLICK:ve.CLICK,DBLCLICK:ve.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Zh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Hx extends lu{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Ie(n,Zh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ie(n,Zh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ve.TOUCHMOVE,this.boundHandleTouchMove_,Mm?{passive:!1}:!1)}emulateClick_(e){let t=new ci(Oe.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new ci(Oe.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new ci(Oe.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Oe.POINTERUP||t.type==Oe.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Oe.POINTERDOWN||t.type==Oe.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new ci(Oe.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ue),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new ci(Oe.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ie(n,Oe.POINTERMOVE,this.handlePointerMove_,this),Ie(n,Oe.POINTERUP,this.handlePointerUp_,this),Ie(this.element_,Oe.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Ie(this.element_.getRootNode(),Oe.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new ci(Oe.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ci(Oe.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ue(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ve.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ue(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ue),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Zi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ct={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ka=1/0;class $x{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,il(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){Ae(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Ka?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,l=t[e],a=n[e],c=e;for(;e<s>>1;){const h=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),_=g<s&&n[g]<n[h]?g:h;t[e]=t[_],n[e]=n[_],e=_}t[e]=l,n[e]=a,this.siftDown_(c,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,l=n[t],a=s[t];for(;t>e;){const c=this.getParentIndex_(t);if(s[c]>a)n[t]=n[c],s[t]=s[c],t=c;else break}n[t]=l,s[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const l=t.length;let a,c,h;for(c=0;c<l;++c)a=t[c],h=e(a),h==Ka?delete this.queuedElements_[this.keyFunction_(a)]:(n[s]=h,t[s++]=a);t.length=s,n.length=s,this.heapify_()}}const oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class qx extends $x{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(ve.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===oe.LOADED||n===oe.ERROR||n===oe.EMPTY){n!==oe.ERROR&&t.removeEventListener(ve.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const s=this.dequeue()[0],l=s.getKey();s.getState()===oe.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,s.load())}}}function Qx(r,e,t,n,s){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return Ka;const l=r.viewState.center,a=n[0]-l[0],c=n[1]-l[1];return 65536*Math.log(s)+Math.sqrt(a*a+c*c)/s}class Yd extends Zn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let n=0,s=this.listenerKeys.length;n<s;++n)Ue(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,e){const n=this.target_??e.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==Gs&&this.listenerKeys.push(Ie(e,Zi.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Jx extends Yd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"›",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=a):this.collapseLabel_=l;const c=e.label!==void 0?e.label:"i";typeof c=="string"?(this.label_=document.createElement("span"),this.label_.textContent=c,this.label_.className=s):this.label_=c;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(ve.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+gu+" "+Xd+(this.collapsed_&&this.collapsible_?" "+_p:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=g,_.appendChild(this.toggleButton_),_.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(s=>s.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!t.some(l=>{var a;return((a=l.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(s=>ZE(()=>s))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!sr(t,this.renderedAttributions_)){Bv(this.ulElement_);for(let s=0,l=t.length;s<l;++s){const a=document.createElement("li");a.innerHTML=t[s],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(_p),this.collapsed_?fp(this.collapseLabel_,this.label_):fp(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class ew extends Yd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const l=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=l,a.appendChild(this.label_),a.addEventListener(ve.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+gu+" "+Xd,h=this.element;h.className=c,h.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ta)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:bs}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(Ta);!l&&n===0?this.element.classList.add(Ta):l&&n!==0&&this.element.classList.remove(Ta)}this.label_.style.transform=s}this.rotation_=n}}class tw extends Yd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",c=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",h=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",_=document.createElement("button");_.className=s,_.setAttribute("type","button"),_.title=h,_.appendChild(typeof a=="string"?document.createTextNode(a):a),_.addEventListener(ve.CLICK,this.handleClick_.bind(this,n),!1);const m=document.createElement("button");m.className=l,m.setAttribute("type","button"),m.title=g,m.appendChild(typeof c=="string"?document.createTextNode(c):c),m.addEventListener(ve.CLICK,this.handleClick_.bind(this,-n),!1);const y=t+" "+gu+" "+Xd,x=this.element;x.className=y,x.appendChild(_),x.appendChild(m),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const l=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:bs})):n.setZoom(l)}}}function nw(r){r=r||{};const e=new Bn;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new tw(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new ew(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new Jx(r.attributionOptions)),e}const Hh={ACTIVE:"active"};class al extends Zn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Hh.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Hh.ACTIVE,e)}setMap(e){this.map_=e}}function iw(r,e,t){const n=r.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:rv,center:r.getConstrainedCenter(s)})}}function Vd(r,e,t,n){const s=r.getZoom();if(s===void 0)return;const l=r.getConstrainedZoom(s+e),a=r.getResolutionForZoom(l);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:bs})}class rw extends al{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Oe.DBLCLICK){const n=e.originalEvent,s=e.map,l=e.coordinate,a=n.shiftKey?-this.delta_:this.delta_,c=s.getView();Vd(c,a,l,this.duration_),n.preventDefault(),t=!0}return!t}}class Ys extends al{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Oe.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Oe.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Oe.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Oe.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Kd(r){const e=r.length;let t=0,n=0;for(let s=0;s<e;s++)t+=r[s].clientX,n+=r[s].clientY;return{clientX:t/e,clientY:n/e}}function $h(r){const e=arguments;return function(t){let n=!0;for(let s=0,l=e.length;s<l&&(n=n&&e[s](t),!!n);++s);return n}}const sw=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ow=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),n=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},Ym=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?ow(r):!0},qh=zs,Vm=function(r){const e=r.originalEvent;return e.button==0&&!(bv&&Im&&e.ctrlKey)},lw=Ws,Zd=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},aw=function(r){const e=r.originalEvent;return Im?e.metaKey:e.ctrlKey},Km=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zm=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},wh=function(r){const e=r.originalEvent;return Ae(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},uw=function(r){const e=r.originalEvent;return Ae(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class cw extends Ys{constructor(e){super({stopDown:Ws}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:$h(Zd,uw);this.condition_=e.onFocusOnly?$h(Ym,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(Kd(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const l=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],c=e.map.getView();X1(l,c.getResolution()),dd(l,c.getRotation()),c.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),a=n.getCenterInternal(),c=t.getPixelFromCoordinateInternal(a),h=t.getCoordinateFromPixelInternal([c[0]-s*Math.cos(l),c[1]-s*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(h),duration:500,easing:bs})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class hw extends Ys{constructor(e){e=e||{},super({stopDown:Ws}),this.condition_=e.condition?e.condition:sw,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!wh(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Cd)return;const s=t.getSize(),l=e.pixel,a=Math.atan2(s[1]/2-l[1],l[0]-s[0]/2);if(this.lastAngle_!==void 0){const c=a-this.lastAngle_;n.adjustRotationInternal(-c)}this.lastAngle_=a}handleUpEvent(e){return wh(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return wh(e)&&Vm(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class dw extends ou{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Ei([s])}getGeometry(){return this.geometry_}}const gs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Fo extends Kn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class fw extends Ys{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new dw(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Vm,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],l=n[1]-t[1];return s*s+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Fo(gs.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Fo(t?gs.BOXEND:gs.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Fo(gs.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fo(gs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fo(gs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class gw extends fw{constructor(e){e=e||{};const t=e.condition?e.condition:Km;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(s),a=n.getResolutionForExtentInternal(l),c=n.getResolution()/a;s=s.clone(),s.scale(c*c)}n.fitInternal(s,{duration:this.duration_,easing:bs})}}const Tr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class _w extends al{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Zd(t)&&Zm(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==ve.KEYDOWN){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==Tr.DOWN||s==Tr.LEFT||s==Tr.RIGHT||s==Tr.UP)){const a=e.map.getView(),c=a.getResolution()*this.pixelDelta_;let h=0,g=0;s==Tr.DOWN?g=-c:s==Tr.LEFT?h=-c:s==Tr.RIGHT?h=c:g=c;const _=[h,g];dd(_,a.getRotation()),iw(a,_,this.duration_),n.preventDefault(),t=!0}}return!t}}class pw extends al{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!aw(t)&&Zm(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==ve.KEYDOWN||e.type==ve.KEYPRESS){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==="+"||s==="-")){const l=e.map,a=s==="+"?this.delta_:-this.delta_,c=l.getView();Vd(c,a,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class mw{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const l=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,l),this.initialVelocity_=Math.sqrt(l*l+a*a)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class yw extends al{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:qh;this.condition_=e.onFocusOnly?$h(Ym,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==ve.WHEEL)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==ve.WHEEL&&(l=s.deltaY,Xv&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=Lm),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const c=n.getView();if(this.mode_==="trackpad"&&!(c.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=l;const h=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),h),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Ze(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Vd(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Ew extends Ys{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ws),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],l=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const h=l-this.lastAngle_;this.rotationDelta_+=h,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=h}this.lastAngle_=l;const a=e.map,c=a.getView();c.getConstraints().rotation!==Cd&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Kd(this.targetPointers))),this.rotating_&&(a.render(),c.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class vw extends Ys{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ws),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],l=n.clientX-s.clientX,a=n.clientY-s.clientY,c=Math.sqrt(l*l+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/c),this.lastDistance_=c;const h=e.map,g=h.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=h.getCoordinateFromPixelInternal(h.getEventPixel(Kd(this.targetPointers))),h.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function xw(r){r=r||{};const e=new Bn,t=new mw(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new hw),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new rw({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new cw({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new Ew),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new vw({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new _w),e.push(new pw({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new yw({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new gw({duration:r.zoomDuration})),e}function Hm(r){if(r instanceof hu){r.setMapInternal(null);return}r instanceof Bs&&r.getLayers().forEach(Hm)}function $m(r,e){if(r instanceof hu){r.setMapInternal(e);return}if(r instanceof Bs){const t=r.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)$m(t[n],e)}}let ww=class extends Zn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=Cw(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Lm,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=kn(),this.pixelToCoordinateTransform_=kn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||nw(),this.interactions=t.interactions||xw({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new qx(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ct.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ct.VIEW,this.handleViewChanged_),this.addChangeListener(Ct.SIZE,this.handleSizeChanged_),this.addChangeListener(Ct.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Wn)&&e.view.then(function(s){n.setView(new Wn(s))}),this.controls.addEventListener(Ut.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Ut.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Ut.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Ut.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Ut.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Ut.REMOVE,s=>{const l=s.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){$m(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,a=n.layerFilter!==void 0?n.layerFilter:zs,c=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,l,c,t,null,a,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(s){s instanceof Bs?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:zs,l=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,a,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),l=n.width/s[0],a=n.height/s[1],c="changedTouches"in e?e.changedTouches[0]:e;return[(c.clientX-n.left)/l,(c.clientY-n.top)/a]}getTarget(){return this.get(Ct.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Xh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ct(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ct.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Bn){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const l=s.layer.getRenderer();if(l&&!l.ready)return!0;const a=s.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Rn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ct(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ct.SIZE)}getView(){return this.get(Ct.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return Qx(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){t=t||e.type;const n=new ci(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Zh.POINTERDOWN||n===ve.WHEEL||n===ve.KEYDOWN){const s=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():s,a=t.target,c=l instanceof ShadowRoot?l.host===a?l.host.ownerDocument:l:l===s?s.documentElement:l;if(this.overlayContainerStopEvent_.contains(a)||!c.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let l=s.length-1;l>=0;l--){const a=s[l];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,l=s;if(e){const a=e.viewHints;if(a[St.ANIMATING]||a[St.INTERACTING]){const c=Date.now()-e.time>8;s=c?0:8,l=c?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(hn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(hn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new xs(Zi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new xs(Zi.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let s=0,l=n.length;s<l;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)Ue(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ve.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ve.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Zx(this)),this.mapBrowserEventHandler_=new Hx(this,this.moveTolerance_);for(const l in Oe)this.mapBrowserEventHandler_.addEventListener(Oe[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ve.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ve.WHEEL,this.boundHandleBrowserEvent_,Mm?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const l=t.getRootNode();n=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[Ie(n,ve.KEYDOWN,this.handleBrowserEvent,this),Ie(n,ve.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ue(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ue(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ie(e,Ns.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ie(e,ve.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ue),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Hi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ie(e,Ns.PROPERTYCHANGE,this.render,this),Ie(e,ve.CHANGE,this.render,this),Ie(e,"addlayer",this.handleLayerAdd_,this),Ie(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Hm(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let l=null;if(t!==void 0&&gp(t)&&n&&n.isDef()){const a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Nh(c.center,c.resolution,c.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:a,wantedTiles:{},mapId:Fe(this),renderTargets:{}},c.nextCenter&&c.nextResolution){const h=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=Nh(c.nextCenter,c.nextResolution,h,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),s&&(!this.previousExtent_||!nu(this.previousExtent_)&&!bo(l.extent,this.previousExtent_))&&(this.dispatchEvent(new xs(Zi.MOVESTART,this,s)),this.previousExtent_=rl(this.previousExtent_)),this.previousExtent_&&!l.viewHints[St.ANIMATING]&&!l.viewHints[St.INTERACTING]&&!bo(l.extent,this.previousExtent_)&&(this.dispatchEvent(new xs(Zi.MOVEEND,this,l)),Vp(l.extent,this.previousExtent_))),this.dispatchEvent(new xs(Zi.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(Zi.LOADSTART)||this.hasListener(Zi.LOADEND)||this.hasListener(hn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Hi("removelayer",t)),this.set(Ct.LAYERGROUP,e)}setSize(e){this.set(Ct.SIZE,e)}setTarget(e){this.set(Ct.TARGET,e)}setView(e){if(!e||e instanceof Wn){this.set(Ct.VIEW,e);return}this.set(Ct.VIEW,new Wn);const t=this;e.then(function(n){t.setView(new Wn(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),l=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),a=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(l)&&!isNaN(a)&&(t=[Math.max(0,l),Math.max(0,a)],!gp(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&rm("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!sr(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function Cw(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Bs({layers:r.layers});t[Ct.LAYERGROUP]=n,t[Ct.TARGET]=r.target,t[Ct.VIEW]=r.view instanceof Wn?r.view:new Wn;let s;r.controls!==void 0&&(Array.isArray(r.controls)?s=new Bn(r.controls.slice()):(Ae(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=r.controls));let l;r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new Bn(r.interactions.slice()):(Ae(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions));let a;return r.overlays!==void 0?Array.isArray(r.overlays)?a=new Bn(r.overlays.slice()):(Ae(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=r.overlays):a=new Bn,{controls:s,interactions:l,keyboardEventTarget:e,overlays:a,values:t}}const Ia={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Sw extends hu{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ia.PRELOAD)}setPreload(e){this.set(Ia.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ia.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ia.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const Tw=5;class Rw extends sl{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Tw}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ke()}getData(e){return null}prepareFrame(e){return ke()}renderFrame(e,t){return ke()}forEachFeatureAtCoordinate(e,t,n,s,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ce.LOADED||t.getState()===Ce.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ce.LOADED&&t!=Ce.ERROR&&e.addEventListener(ve.CHANGE,this.boundHandleImageChange_),t==Ce.IDLE&&(e.load(),t=e.getState()),t==Ce.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class qm{constructor(){k_(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Wa(),{get:(e,t)=>{if(typeof Wa()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,s=t.length;n<s;++n){const l=t[n];if(typeof l=="function"){l(e);continue}const a=t[++n];if(typeof e[l]=="function")e[l](...a);else{if(typeof a=="function"){e[l]=a(e);continue}e[l]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Lp=[];let ws=null;function Iw(){ws=tt(1,1,void 0,{willReadFrequently:!0})}class Qm extends Rw{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=kn(),this.pixelTransform=kn(),this.inversePixelTransform=kn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){ws||Iw(),ws.clearRect(0,0,1,1);let s;try{ws.drawImage(e,t,n,1,1,0,0,1,1),s=ws.getImageData(0,0,1,1).data}catch{return ws=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let l,a;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&sr(js(e.style.backgroundColor),js(n)))){const c=e.firstElementChild;c instanceof HTMLCanvasElement&&(a=c.getContext("2d"))}if(a&&a.canvas.style.transform===t?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=s;let c=l.style;c.position="absolute",c.width="100%",c.height="100%",a=tt();const h=a.canvas;l.appendChild(h),c=h.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=l,this.context=a}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=mi(n),l=tu(n),a=eu(n),c=Ja(n);ct(t.coordinateToPixelTransform,s),ct(t.coordinateToPixelTransform,l),ct(t.coordinateToPixelTransform,a),ct(t.coordinateToPixelTransform,c);const h=this.inversePixelTransform;ct(h,s),ct(h,l),ct(h,a),ct(h,c),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}prepareContainer(e,t){const n=e.extent,s=e.viewState.resolution,l=e.viewState.rotation,a=e.pixelRatio,c=Math.round(Pe(n)/s*a),h=Math.round(ht(n)/s*a);yi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,l,-c/2,-h/2),dm(this.inversePixelTransform,this.pixelTransform);const g=lv(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const _=this.context.canvas;_.width!=c||_.height!=h?(_.width=c,_.height=h):this.context.clearRect(0,0,c,h),g!==_.style.transform&&(_.style.transform=g)}}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const l=new Bm(e,this.inversePixelTransform,n,t);s.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(hn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(hn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new qm),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(hn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(hn.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,s,l,a,c){const h=l/2,g=a/2,_=s/t,m=-_,y=-e[0]+c,x=-e[1];return yi(this.tempTransform,h,g,_,m,-n,y,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Hd extends lu{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(ve.CHANGE)}release(){this.state===oe.ERROR&&this.setState(oe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==oe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ke()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const s=t-n+1e3/60;return s>=this.transition_?1:hm(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Za(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function Lw(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const Pw=new Error("disposed");let _s=null;function Mw(r){_s||(_s=tt(r.width,r.height,void 0,{willReadFrequently:!0}));const e=_s.canvas,t=r.width;e.width!==t&&(e.width=t);const n=r.height;return e.height!==n&&(e.height=n),_s.clearRect(0,0,t,n),_s.drawImage(r,0,0),_s.getImageData(0,0,t,n).data}const kw=[256,256];class Qh extends Hd{constructor(e){const t=oe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Za(this.data_);return e?[e.width,e.height]:kw}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=oe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=oe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Pw),this.controller_=null),super.disposeInternal()}}class Jm extends Hd{constructor(e,t,n,s,l,a){super(e,t,a),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=oe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=oe.ERROR,this.unlistenImage_(),this.image_=Aw(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oe.LOADED:this.state=oe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==oe.ERROR&&(this.state=oe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oe.IDLE&&(this.state=oe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Vv(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Aw(){const r=tt(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class Dw{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof ou&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return Ae(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return Ae(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ae(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}const e0=.5,Fw=10,Pp=.25;class t0{constructor(e,t,n,s,l,a,c){this.sourceProj_=e,this.targetProj_=t;let h={};const g=c?aE(D=>ct(c,Ms(D,this.targetProj_,this.sourceProj_))):za(this.targetProj_,this.sourceProj_);this.transformInv_=function(D){const P=D[0]+"/"+D[1];return h[P]||(h[P]=g(D)),h[P]},this.maxSourceExtent_=s,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Pe(s)>=Pe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Pe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Pe(this.targetProj_.getExtent()):null;const _=mi(n),m=tu(n),y=eu(n),x=Ja(n),E=this.transformInv_(_),w=this.transformInv_(m),C=this.transformInv_(y),I=this.transformInv_(x),R=Fw+(a?Math.max(0,Math.ceil(Math.log2(Bo(n)/(a*a*256*256)))):0);if(this.addQuad_(_,m,y,x,E,w,C,I,R),this.wrapsXInSource_){let D=1/0;this.triangles_.forEach(function(P,k,W){D=Math.min(D,P.source[0][0],P.source[1][0],P.source[2][0])}),this.triangles_.forEach(P=>{if(Math.max(P.source[0][0],P.source[1][0],P.source[2][0])-D>this.sourceWorldWidth_/2){const k=[[P.source[0][0],P.source[0][1]],[P.source[1][0],P.source[1][1]],[P.source[2][0],P.source[2][1]]];k[0][0]-D>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-D>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-D>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);const W=Math.min(k[0][0],k[1][0],k[2][0]);Math.max(k[0][0],k[1][0],k[2][0])-W<this.sourceWorldWidth_/2&&(P.source=k)}})}h={}}addTriangle_(e,t,n,s,l,a){this.triangles_.push({source:[s,l,a],target:[e,t,n]})}addQuad_(e,t,n,s,l,a,c,h,g){const _=Fh([l,a,c,h]),m=this.sourceWorldWidth_?Pe(_)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&m>.5&&m<1;let E=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const C=Fh([e,t,n,s]);E=Pe(C)/this.targetWorldWidth_>Pp||E}!x&&this.sourceProj_.isGlobal()&&m&&(E=m>Pp||E)}if(!E&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3])&&!At(_,this.maxSourceExtent_))return;let w=0;if(!E&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(h[0])||!isFinite(h[1]))){if(g>0)E=!0;else if(w=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!E){const C=[(e[0]+n[0])/2,(e[1]+n[1])/2],I=this.transformInv_(C);let R;x?R=(Ps(l[0],y)+Ps(c[0],y))/2-Ps(I[0],y):R=(l[0]+c[0])/2-I[0];const D=(l[1]+c[1])/2-I[1];E=R*R+D*D>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const C=[(t[0]+n[0])/2,(t[1]+n[1])/2],I=this.transformInv_(C),R=[(s[0]+e[0])/2,(s[1]+e[1])/2],D=this.transformInv_(R);this.addQuad_(e,t,C,R,l,a,I,D,g-1),this.addQuad_(R,C,n,s,D,I,c,h,g-1)}else{const C=[(e[0]+t[0])/2,(e[1]+t[1])/2],I=this.transformInv_(C),R=[(n[0]+s[0])/2,(n[1]+s[1])/2],D=this.transformInv_(R);this.addQuad_(e,C,R,s,l,I,D,h,g-1),this.addQuad_(C,t,n,R,I,a,c,D,g-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(e,n,s,l,c,h),w&14||this.addTriangle_(e,n,t,l,c,a),w&&(w&13||this.addTriangle_(t,s,e,a,h,l),w&7||this.addTriangle_(t,s,n,a,h,c))}calculateSourceExtent(){const e=Qt();return this.triangles_.forEach(function(t,n,s){const l=t.source;Xo(e,l[0]),Xo(e,l[1]),Xo(e,l[2])}),e}getTriangles(){return this.triangles_}}let Ch;const As=[];function Mp(r,e,t,n,s){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,s),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),r.restore()}function Sh(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function Ow(){if(Ch===void 0){const r=tt(6,6,As);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Mp(r,4,5,4,0),Mp(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;Ch=Sh(e,0)||Sh(e,4)||Sh(e,8),du(r),As.push(r.canvas)}return Ch}function kp(r,e,t,n){const s=Ms(t,e,r);let l=H_(e,n,t);const a=e.getMetersPerUnit();a!==void 0&&(l*=a);const c=r.getMetersPerUnit();c!==void 0&&(l/=c);const h=r.getExtent();if(!h||Fs(h,s)){const g=H_(r,l,s)/l;isFinite(g)&&g>0&&(l/=g)}return l}function n0(r,e,t,n){const s=ir(t);let l=kp(r,e,s,n);return(!isFinite(l)||l<=0)&&cd(t,function(a){return l=kp(r,e,a,n),isFinite(l)&&l>0}),l}function Nw(r,e,t,n,s,l,a,c,h,g,_,m,y,x){const E=tt(Math.round(t*r),Math.round(t*e),As);if(m||(E.imageSmoothingEnabled=!1),h.length===0)return E.canvas;E.scale(t,t);function w(k){return Math.round(k*t)/t}E.globalCompositeOperation="lighter";const C=Qt();h.forEach(function(k,W,Z){ud(C,k.extent)});let I;const R=t/n,D=(m?1:1+Math.pow(2,-24))/R;I=tt(Math.round(Pe(C)*R),Math.round(ht(C)*R),As),m||(I.imageSmoothingEnabled=!1),h.forEach(function(k,W,Z){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){I.save();const $=(k.clipExtent[0]-C[0])*R,te=-(k.clipExtent[3]-C[3])*R,J=Pe(k.clipExtent)*R,ee=ht(k.clipExtent)*R;I.rect(m?$:Math.round($),m?te:Math.round(te),m?J:Math.round($+J)-Math.round($),m?ee:Math.round(te+ee)-Math.round(te)),I.clip()}const j=(k.extent[0]-C[0])*R,b=-(k.extent[3]-C[3])*R,B=Pe(k.extent)*R,ie=ht(k.extent)*R;I.drawImage(k.image,g,g,k.image.width-2*g,k.image.height-2*g,m?j:Math.round(j),m?b:Math.round(b),m?B:Math.round(j+B)-Math.round(j),m?ie:Math.round(b+ie)-Math.round(b)),k.clipExtent&&I.restore()}});const P=mi(a);return c.getTriangles().forEach(function(k,W,Z){const j=k.source,b=k.target;let B=j[0][0],ie=j[0][1],$=j[1][0],te=j[1][1],J=j[2][0],ee=j[2][1];const ne=w((b[0][0]-P[0])/l),K=w(-(b[0][1]-P[1])/l),U=w((b[1][0]-P[0])/l),q=w(-(b[1][1]-P[1])/l),G=w((b[2][0]-P[0])/l),T=w(-(b[2][1]-P[1])/l),N=B,re=ie;B=0,ie=0,$-=N,te-=re,J-=N,ee-=re;const z=[[$,te,0,0,U-ne],[J,ee,0,0,G-ne],[0,0,$,te,q-K],[0,0,J,ee,T-K]],ue=j1(z);if(!ue)return;if(E.save(),E.beginPath(),Ow()||!m){E.moveTo(U,q);const me=4,xe=ne-U,Te=K-q;for(let Ge=0;Ge<me;Ge++)E.lineTo(U+w((Ge+1)*xe/me),q+w(Ge*Te/(me-1))),Ge!=me-1&&E.lineTo(U+w((Ge+1)*xe/me),q+w((Ge+1)*Te/(me-1)));E.lineTo(G,T)}else E.moveTo(U,q),E.lineTo(ne,K),E.lineTo(G,T);E.clip(),E.transform(ue[0],ue[2],ue[1],ue[3],ne,K),E.translate(C[0]-N,C[3]-re);let he;if(I)he=I.canvas,E.scale(D,-D);else{const me=h[0],xe=me.extent;he=me.image,E.scale(Pe(xe)/he.width,-ht(xe)/he.height)}E.drawImage(he,0,0),E.restore()}),I&&(du(I),As.push(I.canvas)),_&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,c.getTriangles().forEach(function(k,W,Z){const j=k.target,b=(j[0][0]-P[0])/l,B=-(j[0][1]-P[1])/l,ie=(j[1][0]-P[0])/l,$=-(j[1][1]-P[1])/l,te=(j[2][0]-P[0])/l,J=-(j[2][1]-P[1])/l;E.beginPath(),E.moveTo(ie,$),E.lineTo(b,B),E.lineTo(te,J),E.closePath(),E.stroke()}),E.restore()),E.canvas}function Eu(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Jh(r,e,t,n,s,l,a){a=a??Eu();const c=1/(r-e),h=1/(t-n),g=1/(s-l);return a[0]=-2*c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*g,a[11]=0,a[12]=(r+e)*c,a[13]=(n+t)*h,a[14]=(l+s)*g,a[15]=1,a}function Ap(r,e,t,n,s){return s=s??Eu(),s[0]=r[0]*e,s[1]=r[1]*e,s[2]=r[2]*e,s[3]=r[3]*e,s[4]=r[4]*t,s[5]=r[5]*t,s[6]=r[6]*t,s[7]=r[7]*t,s[8]=r[8]*n,s[9]=r[9]*n,s[10]=r[10]*n,s[11]=r[11]*n,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s}function zw(r,e,t,n,s){s=s??Eu();let l,a,c,h,g,_,m,y,x,E,w,C;return r===s?(s[12]=r[0]*e+r[4]*t+r[8]*n+r[12],s[13]=r[1]*e+r[5]*t+r[9]*n+r[13],s[14]=r[2]*e+r[6]*t+r[10]*n+r[14],s[15]=r[3]*e+r[7]*t+r[11]*n+r[15]):(l=r[0],a=r[1],c=r[2],h=r[3],g=r[4],_=r[5],m=r[6],y=r[7],x=r[8],E=r[9],w=r[10],C=r[11],s[0]=l,s[1]=a,s[2]=c,s[3]=h,s[4]=g,s[5]=_,s[6]=m,s[7]=y,s[8]=x,s[9]=E,s[10]=w,s[11]=C,s[12]=l*e+g*t+x*n+r[12],s[13]=a*e+_*t+E*n+r[13],s[14]=c*e+m*t+w*n+r[14],s[15]=h*e+y*t+C*n+r[15]),s}function Gw(r,e,t,n){return n=n??Eu(),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r,n[13]=e,n[14]=t,n[15]=1,n}const jw=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Uw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Xw{constructor(e){this.gl_=e,this.program_=ed(e,Uw,jw),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,n,s,l,a,c,h,g,_,m,y,x){const E=this.gl_;h===void 0&&(h=s),g===void 0&&(g=l),a===void 0&&(a=t),c===void 0&&(c=n),_===void 0&&(_=a),m===void 0&&(m=c),y===void 0&&(y=E.canvas.width),x===void 0&&(x=E.canvas.height),E.bindTexture(E.TEXTURE_2D,e),E.useProgram(this.program_),E.bindBuffer(E.ARRAY_BUFFER,this.positionBuffer),E.enableVertexAttribArray(this.positionLocation),E.vertexAttribPointer(this.positionLocation,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,this.texcoordBuffer),E.enableVertexAttribArray(this.texcoordLocation),E.vertexAttribPointer(this.texcoordLocation,2,E.FLOAT,!1,0,0);let w=Jh(0,y,0,x,-1,1);w=zw(w,h,g,0),w=Ap(w,_,m,1),E.uniformMatrix4fv(this.matrixLocation,!1,w);let C=Gw(s/t,l/n,0);C=Ap(C,a/t,c/n,1),E.uniformMatrix4fv(this.textureMatrixLocation,!1,C),E.uniform1i(this.textureLocation,0),E.drawArrays(E.TRIANGLES,0,this.positions.length/2)}}function Dp(r,e,t){const n=r.createShader(e);if(n===null)throw new Error("Shader compilation failed");if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){const s=r.getShaderInfoLog(n);throw s===null?new Error("Shader info log creation failed"):new Error(s)}return n}function ed(r,e,t){const n=r.createProgram(),s=Dp(r,r.VERTEX_SHADER,t),l=Dp(r,r.FRAGMENT_SHADER,e);if(n===null)throw new Error("Program creation failed");if(r.attachShader(n,s),r.attachShader(n,l),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw r.getProgramInfoLog(n)===null?new Error("Program info log creation failed"):new Error;return n}const Ww=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,bw=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Bw=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Yw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function Vw(r,e,t,n){let s;return t.length?s=t.shift():jd?s=new OffscreenCanvas(r||300,e||300):s=document.createElement("canvas"),r&&(s.width=r),e&&(s.height=e),s.getContext("webgl",n)}function Kw(r){const e=r.canvas;e.width=1,e.height=1,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)}const Fp=[];function Zw(r,e,t,n,s,l,a,c,h,g,_,m,y,x){const E=Math.round(n*e),w=Math.round(n*t);r.canvas.width=E,r.canvas.height=w;let C,I;if(I=r.createTexture(),r.bindTexture(r.TEXTURE_2D,I),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,E,w,0,r.RGBA,_,null),C=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,C),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,I,0),C===null)throw new Error("Could not create framebuffer");if(I===null)throw new Error("Could not create texture");if(h.length===0)return{width:E,height:w,framebuffer:C,texture:I};const R=Qt();h.forEach(function(B,ie,$){ud(R,B.extent)});let D,P,k;const W=1/s;{if(D=r.createTexture(),I===null)throw new Error("Could not create texture");P=Math.round(Pe(R)*W),k=Math.round(ht(R)*W);const B=r.getParameter(r.MAX_TEXTURE_SIZE),ie=Math.max(P,k),$=ie>B?B/ie:1,te=Math.round(P*$),J=Math.round(k*$);r.bindTexture(r.TEXTURE_2D,D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,te,J,0,r.RGBA,_,null);const ee=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,ee),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,D,0);const ne=new Xw(r);h.forEach(function(K,U,q){const G=(K.extent[0]-R[0])*W*$,T=-(K.extent[3]-R[3])*W*$,N=Pe(K.extent)*W*$,re=ht(K.extent)*W*$;if(r.bindFramebuffer(r.FRAMEBUFFER,ee),r.viewport(0,0,te,J),K.clipExtent){const z=(K.clipExtent[0]-R[0])*W*$,ue=-(K.clipExtent[3]-R[3])*W*$,he=Pe(K.clipExtent)*W*$,me=ht(K.clipExtent)*W*$;r.enable(r.SCISSOR_TEST),r.scissor(y?z:Math.round(z),y?ue:Math.round(ue),y?he:Math.round(z+he)-Math.round(z),y?me:Math.round(ue+me)-Math.round(ue))}ne.drawImage(K.texture,K.width,K.height,g,g,K.width-2*g,K.height-2*g,y?G:Math.round(G),y?T:Math.round(T),y?N:Math.round(G+N)-Math.round(G),y?re:Math.round(T+re)-Math.round(T),te,J),r.disable(r.SCISSOR_TEST)}),r.deleteFramebuffer(ee)}const Z=mi(a),j=mi(R),b=B=>{const ie=(B[0][0]-Z[0])/l*n,$=-(B[0][1]-Z[1])/l*n,te=(B[1][0]-Z[0])/l*n,J=-(B[1][1]-Z[1])/l*n,ee=(B[2][0]-Z[0])/l*n,ne=-(B[2][1]-Z[1])/l*n;return{u1:te,v1:J,u0:ie,v0:$,u2:ee,v2:ne}};r.bindFramebuffer(r.FRAMEBUFFER,C),r.viewport(0,0,E,w);{const B=[],ie=[],$=ed(r,Yw,Bw);r.useProgram($);const te=r.getUniformLocation($,"u_texture");r.bindTexture(r.TEXTURE_2D,D),r.uniform1i(te,0),c.getTriangles().forEach(function(G,T,N){const re=G.source,z=G.target,{u1:ue,v1:he,u0:me,v0:xe,u2:Te,v2:Ge}=b(z),Tt=(re[0][0]-j[0])/s/P,Dn=-(re[0][1]-j[1])/s/k,gn=(re[1][0]-j[0])/s/P,Hn=-(re[1][1]-j[1])/s/k,Fn=(re[2][0]-j[0])/s/P,Jt=-(re[2][1]-j[1])/s/k;B.push(ue,he,me,xe,Te,Ge),ie.push(gn,Hn,Tt,Dn,Fn,Jt)});const J=Jh(0,E,w,0,-1,1),ee=r.getUniformLocation($,"u_matrix");r.uniformMatrix4fv(ee,!1,J);const ne=r.getAttribLocation($,"a_position"),K=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,K),r.bufferData(r.ARRAY_BUFFER,new Float32Array(B),r.STATIC_DRAW),r.vertexAttribPointer(ne,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ne);const U=r.getAttribLocation($,"a_texcoord"),q=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,q),r.bufferData(r.ARRAY_BUFFER,new Float32Array(ie),r.STATIC_DRAW),r.vertexAttribPointer(U,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(U),r.drawArrays(r.TRIANGLES,0,B.length/2)}if(m){const B=ed(r,bw,Ww);r.useProgram(B);const ie=Jh(0,E,w,0,-1,1),$=r.getUniformLocation(B,"u_matrix");r.uniformMatrix4fv($,!1,ie);const te=Array.isArray(m)?m:[0,0,0,255],J=r.getUniformLocation(B,"u_val");r.uniform4fv(J,te);const ee=r.getAttribLocation(B,"a_position"),ne=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,ne),r.vertexAttribPointer(ee,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ee);const K=c.getTriangles().reduce(function(U,q){const G=q.target,{u1:T,v1:N,u0:re,v0:z,u2:ue,v2:he}=b(G);return U.concat([T,N,re,z,re,z,ue,he,ue,he,T,N])},[]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(K),r.STATIC_DRAW),r.drawArrays(r.LINES,0,K.length/2)}return{width:E,height:w,framebuffer:C,texture:I}}class Hw extends Qh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),s=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?s?Pn(n,s):n:s;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let c=this.sourceTileGrid_.getExtent();const h=a?Pn(l,a):l;if(Bo(h)===0){this.state=oe.EMPTY;return}n&&(c?c=Pn(c,n):c=n);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),_=e.targetProj,m=n0(t,_,h,g);if(!isFinite(m)||m<=0){this.state=oe.EMPTY;return}const y=e.errorThreshold!==void 0?e.errorThreshold:e0;if(this.triangulation_=new t0(t,_,h,c,m*y,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(m);let x=this.triangulation_.calculateSourceExtent();if(c&&(t.canWrapX()?(x[1]=Ze(x[1],c[1],c[3]),x[3]=Ze(x[3],c[1],c[3])):x=Pn(x,c)),!Bo(x))this.state=oe.EMPTY;else{let E=0,w=0;t.canWrapX()&&(E=Pe(n),w=Math.floor((x[0]-n[0])/E)),hd(x.slice(),t,!0).forEach(I=>{const R=this.sourceTileGrid_.getTileRangeForExtentAndZ(I,this.sourceZ_),D=e.getTileFunction;for(let P=R.minX;P<=R.maxX;P++)for(let k=R.minY;k<=R.maxY;k++){const W=D(this.sourceZ_,P,k,this.pixelRatio_);if(W){const Z=w*E;this.sourceTiles_.push({tile:W,offset:Z})}}++w}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(P=>{var T;const k=P.tile;if(!k||k.getState()!==oe.LOADED)return;const W=k.getSize(),Z=this.gutter_;let j;const b=Lw(k.getData());b?j=b:(t=!0,j=Mw(Za(k.getData())));const B=[W[0]+2*Z,W[1]+2*Z],ie=j instanceof Float32Array,$=B[0]*B[1],te=ie?Float32Array:Uint8ClampedArray,J=new te(j.buffer),ee=te.BYTES_PER_ELEMENT,ne=ee*J.length/$,K=J.byteLength/B[1],U=Math.floor(K/ee/B[0]),q=this.sourceTileGrid_.getTileCoordExtent(k.tileCoord);q[0]+=P.offset,q[2]+=P.offset;const G=(T=this.clipExtent_)==null?void 0:T.slice();G&&(G[0]+=P.offset,G[2]+=P.offset),e.push({extent:q,clipExtent:G,data:J,dataType:te,bytesPerPixel:ne,pixelSize:B,bandCount:U})}),this.sourceTiles_.length=0,e.length===0){this.state=oe.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(n),l=typeof s=="number"?s:s[0],a=typeof s=="number"?s:s[1],c=l*this.pixelRatio_,h=a*this.pixelRatio_,g=this.targetTileGrid_.getResolution(n),_=this.sourceTileGrid_.getResolution(this.sourceZ_),m=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,x=new e[0].dataType(y*c*h),E=Vw(c,h,Fp,{premultipliedAlpha:!1,antialias:!1});let w;const C=E.RGBA;let I;e[0].dataType==Float32Array?(I=E.FLOAT,E.getExtension("WEBGL_color_buffer_float"),E.getExtension("OES_texture_float"),E.getExtension("EXT_float_blend"),w=E.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(I=E.UNSIGNED_BYTE,w=this.interpolate);const R=4,D=Math.ceil(y/R);for(let P=D-1;P>=0;--P){const k=[];for(let te=0,J=e.length;te<J;++te){const ee=e[te],ne=ee.pixelSize,K=ne[0],U=ne[1],q=new ee.dataType(R*K*U),G=ee.data;let T=P*R;for(let re=0,z=q.length;re<z;re+=R)q[re]=G[T],q[re+1]=G[T+1],q[re+2]=G[T+2],q[re+3]=G[T+3],T+=y;const N=E.createTexture();E.bindTexture(E.TEXTURE_2D,N),w?(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR)):(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST)),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,C,K,U,0,C,I,q),k.push({extent:ee.extent,clipExtent:ee.clipExtent,texture:N,width:K,height:U})}const{framebuffer:W,width:Z,height:j}=Zw(E,l,a,this.pixelRatio_,_,g,m,this.triangulation_,k,this.gutter_,I,this.renderEdges_,w),b=Z,B=j*R,ie=new e[0].dataType(b*B);E.bindFramebuffer(E.FRAMEBUFFER,W),E.readPixels(0,0,Z,j,E.RGBA,I,ie);let $=P*R;for(let te=0,J=ie.length;te<J;te+=R){const ee=(b-1-(te/B|0))*B+te%B;x[$]=ie[ee],x[$+1]=ie[ee+1],x[$+2]=ie[ee+2],x[$+3]=ie[ee+3],$+=y}}if(Kw(E),Fp.push(E.canvas),t){const P=tt(l,a),k=new ImageData(x,l);P.putImageData(k,0,0),this.reprojData_=P.canvas}else this.reprojData_=x;this.reprojSize_=[Math.round(c),Math.round(h)],this.state=oe.LOADED,this.changed()}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==oe.IDLE&&n!==oe.LOADING)return;e++;const s=Ie(t,ve.CHANGE,()=>{const l=t.getState();(l==oe.LOADED||l==oe.ERROR||l==oe.EMPTY)&&(Ue(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==oe.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ue),this.sourcesListenerKeys_=null}}class td extends Hd{constructor(e,t,n,s,l,a,c,h,g,_,m,y){super(l,oe.IDLE,y),this.renderEdges_=m!==void 0?m:!1,this.pixelRatio_=c,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=a||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=s.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const C=E?Pn(x,E):x;if(Bo(C)===0){this.state=oe.EMPTY;return}const I=e.getExtent();I&&(w?w=Pn(w,I):w=I);const R=s.getResolution(this.wrappedTileCoord_[0]),D=n0(e,n,C,R);if(!isFinite(D)||D<=0){this.state=oe.EMPTY;return}const P=_!==void 0?_:e0;if(this.triangulation_=new t0(e,n,C,w,D*P,R),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=t.getZForResolution(D);let k=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(k[1]=Ze(k[1],w[1],w[3]),k[3]=Ze(k[3],w[1],w[3])):k=Pn(k,w)),!Bo(k))this.state=oe.EMPTY;else{let W=0,Z=0;e.canWrapX()&&(W=Pe(I),Z=Math.floor((k[0]-I[0])/W)),hd(k.slice(),e,!0).forEach(b=>{const B=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let ie=B.minX;ie<=B.maxX;ie++)for(let $=B.minY;$<=B.maxY;$++){const te=g(this.sourceZ_,ie,$,c);if(te){const J=Z*W;this.sourceTiles_.push({tile:te,offset:J})}}++Z}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var s;const n=t.tile;if(n&&n.getState()==oe.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const a=(s=this.clipExtent_)==null?void 0:s.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:l,clipExtent:a,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=oe.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],a=this.targetTileGrid_.getResolution(t),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Nw(s,l,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),a,h,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=oe.LOADED}this.changed()}load(){if(this.state==oe.IDLE){this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==oe.IDLE||n==oe.LOADING){e++;const s=Ie(t,ve.CHANGE,l=>{const a=t.getState();(a==oe.LOADED||a==oe.ERROR||a==oe.EMPTY)&&(Ue(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,s){t.getState()==oe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ue),this.sourcesListenerKeys_=null}release(){this.canvas_&&(du(this.canvas_.getContext("2d")),As.push(this.canvas_),this.canvas_=null),super.release()}}class $d{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ps(r,e,t,n,s){return s!==void 0?(s.minX=r,s.maxX=e,s.minY=t,s.maxY=n,s):new $d(r,e,t,n)}function Ha(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function $w(r,e,t){return r+"/"+e+"/"+t}function qw(r){return Qw(r[0],r[1],r[2])}function Qw(r,e,t){return(e<<r)+t}function Jw(r,e){const t=r[0],n=r[1],s=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(n,s):!0}function Th(r,e,t,n){return`${r},${$w(e,t,n)}`}function Rh(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const n=r[t],s=n.has(e);return s||n.add(e),!s}function eC(r,e,t){const n=r[t];return n?n.delete(e):!1}function Op(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=Pn(e,$i(t.extent,r.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(r.viewState.projection).getExtent();s&&(e=Pn(e,s))}return e}class tC extends Qm{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Qt(),this.tempTileRange_=new $d(0,0,0,0),this.tempTileCoord_=Ha(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Dw(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,s){const l=this.tileCache_,c=this.getLayer().getSource(),h=Th(c.getKey(),e,t,n);let g;if(l.containsKey(h))g=l.get(h);else{if(g=c.getTile(e,t,n,s.pixelRatio,s.viewState.projection),!g)return null;l.set(h,g)}return g}getTile(e,t,n,s){const l=this.getOrCreateTile(e,t,n,s);return l||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=ct(t.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!Fs(l,s))return null;const a=t.viewState,c=n.getRenderSource(),h=c.getTileGridForProjection(a.projection),g=c.getTilePixelRatio(t.pixelRatio);for(let _=h.getZForResolution(a.resolution);_>=h.getMinZoom();--_){const m=h.getTileCoordForCoordAndZ(s,_),y=this.getTile(_,m[1],m[2],t);if(!y||y.getState()!==oe.LOADED)continue;const x=h.getOrigin(_),E=Bt(h.getTileSize(_)),w=h.getResolution(_);let C;if(y instanceof Jm||y instanceof td)C=y.getImage();else if(y instanceof Qh){if(C=Za(y.getData()),!C)continue}else continue;const I=Math.floor(g*((s[0]-x[0])/w-m[1]*E[0])),R=Math.floor(g*((x[1]-s[1])/w-m[2]*E[1])),D=Math.round(g*c.getGutterForProjection(a.projection));return this.getImageData(C,I+D,R+D)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,t,n,s,l){const a=e.viewState,c=this.getLayer(),h=c.getRenderSource(),g=h.getTileGridForProjection(a.projection),_=Fe(h);_ in e.wantedTiles||(e.wantedTiles[_]={});const m=e.wantedTiles[_],y=c.getMapInternal(),x=Math.max(n-l,g.getMinZoom(),g.getZForResolution(Math.min(c.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):g.getResolution(0)),h.zDirection));for(let E=n;E>=x;--E){const w=g.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),C=g.getResolution(E);for(let I=w.minX;I<=w.maxX;++I)for(let R=w.minY;R<=w.maxY;++R){const D=this.getTile(E,I,R,e);if(!D||!Rh(s,D,E))continue;const k=D.getKey();if(m[k]=!0,D.getState()===oe.IDLE&&!e.tileQueue.isKeyQueued(k)){const W=Ha(E,I,R,this.tempTileCoord_);e.tileQueue.enqueue([D,_,g.getTileCoordCenter(W),C])}}}}findStaleTile_(e,t){const n=this.tileCache_,s=e[0],l=e[1],a=e[2],c=this.getStaleKeys();for(let h=0;h<c.length;++h){const g=Th(c[h],s,l,a);if(n.containsKey(g)){const _=n.get(g);if(_.getState()===oe.LOADED)return _.endTransition(Fe(this)),Rh(t,_,s),!0}}return!1}findAltTiles_(e,t,n,s){const l=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!l)return!1;let a=!0;const c=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let _=l.minX;_<=l.maxX;++_)for(let m=l.minY;m<=l.maxY;++m){const y=Th(g,n,_,m);let x=!1;if(c.containsKey(y)){const E=c.get(y);E.getState()===oe.LOADED&&(Rh(s,E,n),x=!0)}x||(a=!1)}return a}renderFrame(e,t){let n=!0;this.renderComplete=!0;const s=e.layerStatesArray[e.layerIndex],l=e.viewState,a=l.projection,c=l.resolution,h=l.center,g=e.pixelRatio,_=this.getLayer(),m=_.getSource(),y=m.getRevision(),x=m.getTileGridForProjection(a),E=x.getZForResolution(c,m.zDirection),w=x.getResolution(E),C=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==C&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=C):this.renderedSourceKey_=C;let I=e.extent;const R=m.getTilePixelRatio(g);this.prepareContainer(e,t);const D=this.context.canvas.width,P=this.context.canvas.height,k=s.extent&&$i(s.extent);k&&(I=Pn(I,$i(s.extent)));const W=w*D/2/R,Z=w*P/2/R,j=[h[0]-W,h[1]-Z,h[0]+W,h[1]+Z],b={};this.renderedTiles.length=0;const B=_.getPreload();if(e.nextExtent){const G=x.getZForResolution(l.nextResolution,m.zDirection),T=Op(e,e.nextExtent);this.enqueueTiles(e,T,G,b,B)}const ie=Op(e,I);if(this.enqueueTiles(e,ie,E,b,0),B>0&&setTimeout(()=>{this.enqueueTiles(e,ie,E-1,b,B-1)},0),!(E in b))return this.container;const $=Fe(this),te=e.time;for(const G of b[E]){const T=G.getState();if((G instanceof td||G instanceof Hw)&&T===oe.EMPTY)continue;const N=G.tileCoord;if(T===oe.LOADED&&G.getAlpha($,te)===1){G.endTransition($);continue}if(T!==oe.IDLE&&(n=!1),T!==oe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(N,b)){eC(b,G,E),e.animate=!0;continue}if(this.findAltTiles_(x,N,E+1,b))continue;const ue=x.getMinZoom();for(let he=E-1;he>=ue&&!this.findAltTiles_(x,N,he,b);--he);}const J=w/c*g/R,ee=this.getRenderContext(e);yi(this.tempTransform,D/2,P/2,J,J,0,-D/2,-P/2),s.extent&&this.clipUnrotated(ee,e,k),m.getInterpolate()||(ee.imageSmoothingEnabled=!1),this.preRender(ee,e);const ne=Object.keys(b).map(Number);ne.sort(er);let K;const U=[],q=[];for(let G=ne.length-1;G>=0;--G){const T=ne[G],N=m.getTilePixelSize(T,g,a),z=x.getResolution(T)/w,ue=N[0]*z*J,he=N[1]*z*J,me=x.getTileCoordForCoordAndZ(mi(j),T),xe=x.getTileCoordExtent(me),Te=ct(this.tempTransform,[R*(xe[0]-j[0])/w,R*(j[3]-xe[3])/w]),Ge=R*m.getGutterForProjection(a);for(const Tt of b[T]){if(Tt.getState()!==oe.LOADED)continue;const Dn=Tt.tileCoord,gn=me[1]-Dn[1],Hn=Math.round(Te[0]-(gn-1)*ue),Fn=me[2]-Dn[2],Jt=Math.round(Te[1]-(Fn-1)*he),pt=Math.round(Te[0]-gn*ue),Vt=Math.round(Te[1]-Fn*he),On=Hn-pt,en=Jt-Vt,tn=ne.length===1;let _n=!1;K=[pt,Vt,pt+On,Vt,pt+On,Vt+en,pt,Vt+en];for(let $n=0,qn=U.length;$n<qn;++$n)if(!tn&&T<q[$n]){const $e=U[$n];At([pt,Vt,pt+On,Vt+en],[$e[0],$e[3],$e[4],$e[7]])&&(_n||(ee.save(),_n=!0),ee.beginPath(),ee.moveTo(K[0],K[1]),ee.lineTo(K[2],K[3]),ee.lineTo(K[4],K[5]),ee.lineTo(K[6],K[7]),ee.moveTo($e[6],$e[7]),ee.lineTo($e[4],$e[5]),ee.lineTo($e[2],$e[3]),ee.lineTo($e[0],$e[1]),ee.clip())}U.push(K),q.push(T),this.drawTile(Tt,e,pt,Vt,On,en,Ge,tn),_n&&ee.restore(),this.renderedTiles.unshift(Tt),this.updateUsedTiles(e.usedTiles,m,Tt)}}if(this.renderedRevision=y,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!bo(this.renderedExtent_,j),this.renderedExtent_=j,this.renderedPixelRatio=g,this.postRender(this.context,e),s.extent&&ee.restore(),ee.imageSmoothingEnabled=!0,this.renderComplete){const G=(T,N)=>{const re=Fe(m),z=N.wantedTiles[re],ue=z?Object.keys(z).length:0;this.updateCacheSize(ue),this.tileCache_.expireCache()};e.postRenderFunctions.push(G)}return!this.renderComplete&&!n&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,s,l,a,c,h){let g;if(e instanceof Qh){if(g=Za(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const _=this.getRenderContext(t),m=Fe(this),y=t.layerStatesArray[t.layerIndex],x=y.opacity*(h?e.getAlpha(m,t.time):1),E=x!==_.globalAlpha;E&&(_.save(),_.globalAlpha=x),_.drawImage(g,c,c,g.width-2*c,g.height-2*c,n,s,l,a),E&&_.restore(),x!==y.opacity?t.animate=!0:h&&e.endTransition(m)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const s=Fe(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}}class nC extends Sw{constructor(e){super(e)}createRenderer(){return new tC(this,{cacheSize:this.getCacheSize()})}}const ge={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},La=[ge.FILL],Qi=[ge.STROKE],kr=[ge.BEGIN_PATH],Np=[ge.CLOSE_PATH];class i0{drawCustom(e,t,n,s,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class ul extends i0{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,l=this.coordinates;let a=l.length;for(let c=0,h=e.length;c<h;c+=t)s[0]=e[c],s[1]=e[c+1],Fs(n,s)&&(l[a++]=s[0],l[a++]=s[1]);return a}appendFlatLineCoordinates(e,t,n,s,l,a){const c=this.coordinates;let h=c.length;const g=this.getBufferedMaxExtent();a&&(t+=s);let _=e[t],m=e[t+1];const y=this.tmpCoordinate_;let x=!0,E,w,C;for(E=t+s;E<n;E+=s)y[0]=e[E],y[1]=e[E+1],C=Oh(g,y),C!==w?(x&&(c[h++]=_,c[h++]=m,x=!1),c[h++]=y[0],c[h++]=y[1]):C===ut.INTERSECTING?(c[h++]=y[0],c[h++]=y[1],x=!1):x=!0,_=y[0],m=y[1],w=C;return(l&&x||E===t+s)&&(c[h++]=_,c[h++]=m),h}drawCustomCoordinates_(e,t,n,s,l){for(let a=0,c=n.length;a<c;++a){const h=n[a],g=this.appendFlatLineCoordinates(e,t,h,s,!1,!1);l.push(g),t=h}return t}drawCustom(e,t,n,s,l){this.beginGeometry(e,t,l);const a=e.getType(),c=e.getStride(),h=this.coordinates.length;let g,_,m,y,x;switch(a){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),y=[];const E=e.getEndss();x=0;for(let w=0,C=E.length;w<C;++w){const I=[];x=this.drawCustomCoordinates_(g,x,E[w],c,I),y.push(I)}this.instructions.push([ge.CUSTOM,h,y,e,n,Wh,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,y,e,s||n,Wh,l]);break;case"Polygon":case"MultiLineString":m=[],g=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(g,0,e.getEnds(),c,m),this.instructions.push([ge.CUSTOM,h,m,e,n,Yo,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,m,e,s||n,Yo,l]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),_=this.appendFlatLineCoordinates(g,0,g.length,c,!1,!1),this.instructions.push([ge.CUSTOM,h,_,e,n,qi,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,_,e,s||n,qi,l]);break;case"MultiPoint":g=e.getFlatCoordinates(),_=this.appendFlatPointCoordinates(g,c),_>h&&(this.instructions.push([ge.CUSTOM,h,_,e,n,qi,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,_,e,s||n,qi,l]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),_=this.coordinates.length,this.instructions.push([ge.CUSTOM,h,_,e,n,void 0,l]),this.hitDetectionInstructions.push([ge.CUSTOM,h,_,e,s||n,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[ge.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ge.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let s,l,a=-1;for(t=0;t<n;++t)s=e[t],l=s[0],l==ge.END_GEOMETRY?a=t:l==ge.BEGIN_GEOMETRY&&(s[2]=t,VE(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const s=e.getColor();n.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,n.fillStyle=Yn(s||Xt)}else n.fillStyle=void 0;if(t){const s=t.getColor();n.strokeStyle=Yn(s||Ho);const l=t.getLineCap();n.lineCap=l!==void 0?l:Us;const a=t.getLineDash();n.lineDash=a?a.slice():fi;const c=t.getLineDashOffset();n.lineDashOffset=c||gi;const h=t.getLineJoin();n.lineJoin=h!==void 0?h:Xs;const g=t.getWidth();n.lineWidth=g!==void 0?g:qo;const _=t.getMiterLimit();n.miterLimit=_!==void 0?_:Zo,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[ge.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ge.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,l=e.lineDash,a=e.lineDashOffset,c=e.lineJoin,h=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||l!=e.currentLineDash&&!sr(e.currentLineDash,l)||e.currentLineDashOffset!=a||e.currentLineJoin!=c||e.currentLineWidth!=h||e.currentMiterLimit!=g)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=l,e.currentLineDashOffset=a,e.currentLineJoin=c,e.currentLineWidth=h,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[ge.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Vp(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;od(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class iC extends ul{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Fs(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),l=e.getStride(),a=this.coordinates.length,c=this.appendFlatPointCoordinates(s,l);this.instructions.push([ge.DRAW_IMAGE,a,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ge.DRAW_IMAGE,a,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),l=[];for(let h=0,g=s.length;h<g;h+=e.getStride())(!this.maxExtent||Fs(this.maxExtent,s.slice(h,h+2)))&&l.push(s[h],s[h+1]);const a=this.coordinates.length,c=this.appendFlatPointCoordinates(l,2);this.instructions.push([ge.DRAW_IMAGE,a,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ge.DRAW_IMAGE,a,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class rC extends ul{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const l=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),c=[ge.MOVE_TO_LINE_TO,l,a];return this.instructions.push(c),this.hitDetectionInstructions.push(c),n}drawLineString(e,t,n){const s=this.state,l=s.strokeStyle,a=s.lineWidth;if(l===void 0||a===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,fi,gi],kr);const c=e.getFlatCoordinates(),h=e.getStride();this.drawFlatCoordinates_(c,0,c.length,h),this.hitDetectionInstructions.push(Qi),this.endGeometry(t)}drawMultiLineString(e,t,n){const s=this.state,l=s.strokeStyle,a=s.lineWidth;if(l===void 0||a===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,fi,gi],kr);const c=e.getEnds(),h=e.getFlatCoordinates(),g=e.getStride();let _=0;for(let m=0,y=c.length;m<y;++m)_=this.drawFlatCoordinates_(h,_,c[m],g);this.hitDetectionInstructions.push(Qi),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Qi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Qi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(kr)}}class zp extends ul{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const l=this.state,a=l.fillStyle!==void 0,c=l.strokeStyle!==void 0,h=n.length;this.instructions.push(kr),this.hitDetectionInstructions.push(kr);for(let g=0;g<h;++g){const _=n[g],m=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,_,s,!0,!c),x=[ge.MOVE_TO_LINE_TO,m,y];this.instructions.push(x),this.hitDetectionInstructions.push(x),c&&(this.instructions.push(Np),this.hitDetectionInstructions.push(Np)),t=_}return a&&(this.instructions.push(La),this.hitDetectionInstructions.push(La)),c&&(this.instructions.push(Qi),this.hitDetectionInstructions.push(Qi)),t}drawCircle(e,t,n){const s=this.state,l=s.fillStyle,a=s.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Xt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,fi,gi]);const c=e.getFlatCoordinates(),h=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,h,!1,!1);const _=[ge.CIRCLE,g];this.instructions.push(kr,_),this.hitDetectionInstructions.push(kr,_),s.fillStyle!==void 0&&(this.instructions.push(La),this.hitDetectionInstructions.push(La)),s.strokeStyle!==void 0&&(this.instructions.push(Qi),this.hitDetectionInstructions.push(Qi)),this.endGeometry(t)}drawPolygon(e,t,n){const s=this.state,l=s.fillStyle,a=s.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Xt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,fi,gi]);const c=e.getEnds(),h=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(h,0,c,g),this.endGeometry(t)}drawMultiPolygon(e,t,n){const s=this.state,l=s.fillStyle,a=s.strokeStyle;if(l===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_FILL_STYLE,Xt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ge.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,fi,gi]);const c=e.getEndss(),h=e.getOrientedFlatCoordinates(),g=e.getStride();let _=0;for(let m=0,y=c.length;m<y;++m)_=this.drawFlatCoordinatess_(h,_,c[m],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=Rr(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function sC(r,e,t,n,s){const l=[];let a=t,c=0,h=e.slice(t,2);for(;c<r&&a+s<n;){const[g,_]=h.slice(-2),m=e[a+s],y=e[a+s+1],x=Math.sqrt((m-g)*(m-g)+(y-_)*(y-_));if(c+=x,c>=r){const E=(r-c+x)/x,w=qt(g,m,E),C=qt(_,y,E);h.push(w,C),l.push(h),h=[w,C],c==r&&(a+=s),c=0}else if(c<r)h.push(e[a+s],e[a+s+1]),a+=s;else{const E=x-c,w=qt(g,m,E/x),C=qt(_,y,E/x);h.push(w,C),l.push(h),h=[w,C],c=0,a+=s}}return c>0&&l.push(h),l}function oC(r,e,t,n,s){let l=t,a=t,c=0,h=0,g=t,_,m,y,x,E,w,C,I,R,D;for(m=t;m<n;m+=s){const P=e[m],k=e[m+1];E!==void 0&&(R=P-E,D=k-w,x=Math.sqrt(R*R+D*D),C!==void 0&&(h+=y,_=Math.acos((C*R+I*D)/(y*x)),_>r&&(h>c&&(c=h,l=g,a=m),h=0,g=m-s)),y=x,C=R,I=D),E=P,w=k}return h+=x,h>c?[g,m]:[l,a]}const $a={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class lC extends ul{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Xt]={fillStyle:Xt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const s=this.textFillState_,l=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!s&&!l)return;const c=this.coordinates;let h=c.length;const g=e.getType();let _=null,m=e.getStride();if(a.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!At(this.maxExtent,e.getExtent()))return;let y;if(_=e.getFlatCoordinates(),g=="LineString")y=[_.length];else if(g=="MultiLineString")y=e.getEnds();else if(g=="Polygon")y=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const C=e.getEndss();y=[];for(let I=0,R=C.length;I<R;++I)y.push(C[I][0])}this.beginGeometry(e,t,n);const x=a.repeat,E=x?void 0:a.textAlign;let w=0;for(let C=0,I=y.length;C<I;++C){let R;x?R=sC(x*this.resolution,_,w,y[C],m):R=[_.slice(w,y[C])];for(let D=0,P=R.length;D<P;++D){const k=R[D];let W=0,Z=k.length;if(E==null){const b=oC(a.maxAngle,k,0,k.length,2);W=b[0],Z=b[1]}for(let b=W;b<Z;b+=m)c.push(k[b],k[b+1]);const j=c.length;w=y[C],this.drawChars_(h,j),h=j}}this.endGeometry(t)}else{let y=a.overflow?null:[];switch(g){case"Point":case"MultiPoint":_=e.getFlatCoordinates();break;case"LineString":_=e.getFlatMidpoint();break;case"Circle":_=e.getCenter();break;case"MultiLineString":_=e.getFlatMidpoints(),m=2;break;case"Polygon":_=e.getFlatInteriorPoint(),a.overflow||y.push(_[2]/this.resolution),m=3;break;case"MultiPolygon":const R=e.getFlatInteriorPoints();_=[];for(let D=0,P=R.length;D<P;D+=3)a.overflow||y.push(R[D+2]/this.resolution),_.push(R[D],R[D+1]);if(_.length===0)return;m=2;break}const x=this.appendFlatPointCoordinates(_,m);if(x===h)return;if(y&&(x-h)/2!==_.length/m){let R=h/2;y=y.filter((D,P)=>{const k=c[(R+P)*2]===_[P*m]&&c[(R+P)*2+1]===_[P*m+1];return k||--R,k})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&this.updateFillStyle(this.state,this.createFill),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let E=a.padding;if(E!=Mr&&(a.scale[0]<0||a.scale[1]<0)){let R=a.padding[0],D=a.padding[1],P=a.padding[2],k=a.padding[3];a.scale[0]<0&&(D=-D,k=-k),a.scale[1]<0&&(R=-R,P=-P),E=[R,D,P,k]}const w=this.pixelRatio;this.instructions.push([ge.DRAW_IMAGE,h,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,E==Mr?Mr:E.map(function(R){return R*w}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const C=1/w,I=this.state.fillStyle;a.backgroundFill&&(this.state.fillStyle=Xt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([ge.DRAW_IMAGE,h,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,this.declutterMode_,this.declutterImageWithText_,E,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Xt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),a.backgroundFill&&(this.state.fillStyle=I,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||$o,justify:t.justify,textBaseline:t.textBaseline||ba,scale:t.scale});const a=this.fillKey_;n&&(a in this.fillStates||(this.fillStates[a]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,l=this.strokeKey_,a=this.textKey_,c=this.fillKey_;this.saveTextStates_();const h=this.pixelRatio,g=$a[s.textBaseline],_=this.textOffsetY_*h,m=this.text_,y=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([ge.DRAW_CHARS,e,t,g,s.overflow,c,s.maxAngle,h,_,l,y*h,m,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([ge.DRAW_CHARS,e,t,g,s.overflow,c&&Xt,s.maxAngle,h,_,l,y*h,m,a,1/h,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,s,l;if(!e)this.text_="";else{const a=e.getFill();a?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Yn(a.getColor()||Xt)):(s=null,this.textFillState_=s);const c=e.getStroke();if(!c)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const w=c.getLineDash(),C=c.getLineDashOffset(),I=c.getWidth(),R=c.getMiterLimit();l.lineCap=c.getLineCap()||Us,l.lineDash=w?w.slice():fi,l.lineDashOffset=C===void 0?gi:C,l.lineJoin=c.getLineJoin()||Xs,l.lineWidth=I===void 0?qo:I,l.miterLimit=R===void 0?Zo:R,l.strokeStyle=Yn(c.getColor()||Ho)}n=this.textState_;const h=e.getFont()||Dm;Jv(h);const g=e.getScaleArray();n.overflow=e.getOverflow(),n.font=h,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||ba,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Mr,n.scale=g===void 0?[1,1]:g;const _=e.getOffsetX(),m=e.getOffsetY(),y=e.getRotateWithView(),x=e.getKeepUpright(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=_===void 0?0:_,this.textOffsetY_=m===void 0?0:m,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=E===void 0?0:E,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Fe(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+Fe(s.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const aC={Circle:zp,Default:ul,Image:iC,LineString:rC,Polygon:zp,Text:lC};class uC{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const l=n[s].finish();e[t][s]=l}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let l=s[t];if(l===void 0){const a=aC[t];l=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=l}return l}}function cC(r,e,t,n,s,l,a,c,h,g,_,m,y=!0){let x=r[e],E=r[e+1],w=0,C=0,I=0,R=0;function D(){w=x,C=E,e+=n,x=r[e],E=r[e+1],R+=I,I=Math.sqrt((x-w)*(x-w)+(E-C)*(E-C))}do D();while(e<t-n&&R+I<l);let P=I===0?0:(l-R)/I;const k=qt(w,x,P),W=qt(C,E,P),Z=e-n,j=R,b=l+c*h(g,s,_);for(;e<t-n&&R+I<b;)D();P=I===0?0:(b-R)/I;const B=qt(w,x,P),ie=qt(C,E,P);let $=!1;if(y)if(m){const K=[k,W,B,ie];Sd(K,0,4,2,m,K,K),$=K[0]>K[2]}else $=k>B;const te=Math.PI,J=[],ee=Z+n===e;e=Z,I=0,R=j,x=r[e],E=r[e+1];let ne;if(ee){D(),ne=Math.atan2(E-C,x-w),$&&(ne+=ne>0?-te:te);const K=(B+k)/2,U=(ie+W)/2;return J[0]=[K,U,(b-l)/2,ne,s],J}s=s.replace(/\n/g," ");for(let K=0,U=s.length;K<U;){D();let q=Math.atan2(E-C,x-w);if($&&(q+=q>0?-te:te),ne!==void 0){let ue=q-ne;if(ue+=ue>te?-2*te:ue<-te?2*te:0,Math.abs(ue)>a)return null}ne=q;const G=K;let T=0;for(;K<U;++K){const ue=$?U-K-1:K,he=c*h(g,s[ue],_);if(e+n<t&&R+I<l+T+he/2)break;T+=he}if(K===G)continue;const N=$?s.substring(U-G,U-K):s.substring(G,K);P=I===0?0:(l+T/2-R)/I;const re=qt(w,x,P),z=qt(C,E,P);J.push([re,z,T/2,q,N]),l+=T}return J}function r0(r,e,t,n){let s=r[e],l=r[e+1],a=0;for(let c=e+n;c<t;c+=n){const h=r[c],g=r[c+1];a+=Math.sqrt((h-s)*(h-s)+(g-l)*(g-l)),s=h,l=g}return a}const ms=Qt(),Bi=[],li=[],ai=[],Yi=[];function Gp(r){return r[3].declutterBox}const jp=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Ih(r,e){return e==="start"?e=jp.test(r)?"right":"left":e==="end"&&(e=jp.test(r)?"left":"right"),$a[e]}function hC(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class dC{constructor(e,t,n,s,l){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=kn(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new qm:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,s){const l=e+t+n+s;if(this.labels_[l])return this.labels_[l];const a=s?this.strokeStates[s]:null,c=n?this.fillStates[n]:null,h=this.textStates[t],g=this.pixelRatio,_=[h.scale[0]*g,h.scale[1]*g],m=h.justify?$a[h.justify]:Ih(Array.isArray(e)?e[0]:e,h.textAlign||$o),y=s&&a.lineWidth?a.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(hC,[]),{width:E,height:w,widths:C,heights:I,lineWidths:R}=tx(h,x),D=E+y,P=[],k=(D+2)*_[0],W=(w+y)*_[1],Z={width:k<0?Math.floor(k):Math.ceil(k),height:W<0?Math.floor(W):Math.ceil(W),contextInstructions:P};(_[0]!=1||_[1]!=1)&&P.push("scale",_),s&&(P.push("strokeStyle",a.strokeStyle),P.push("lineWidth",y),P.push("lineCap",a.lineCap),P.push("lineJoin",a.lineJoin),P.push("miterLimit",a.miterLimit),P.push("setLineDash",[a.lineDash]),P.push("lineDashOffset",a.lineDashOffset)),n&&P.push("fillStyle",c.fillStyle),P.push("textBaseline","middle"),P.push("textAlign","center");const j=.5-m;let b=m*D+j*y;const B=[],ie=[];let $=0,te=0,J=0,ee=0,ne;for(let K=0,U=x.length;K<U;K+=2){const q=x[K];if(q===`
`){te+=$,$=0,b=m*D+j*y,++ee;continue}const G=x[K+1]||h.font;G!==ne&&(s&&B.push("font",G),n&&ie.push("font",G),ne=G),$=Math.max($,I[J]);const T=[q,b+j*C[J]+m*(C[J]-R[ee]),.5*(y+$)+te];b+=C[J],s&&B.push("strokeText",T),n&&ie.push("fillText",T),++J}return Array.prototype.push.apply(P,B),Array.prototype.push.apply(P,ie),this.labels_[l]=Z,Z}replayTextBackground_(e,t,n,s,l,a,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,l),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,l,a,c,h,g,_,m,y,x,E,w,C){c*=y[0],h*=y[1];let I=n-c,R=s-h;const D=l+g>e?e-g:l,P=a+_>t?t-_:a,k=E[3]+D*y[0]+E[1],W=E[0]+P*y[1]+E[2],Z=I-E[3],j=R-E[0];(w||m!==0)&&(Bi[0]=Z,Yi[0]=Z,Bi[1]=j,li[1]=j,li[0]=Z+k,ai[0]=li[0],ai[1]=j+W,Yi[1]=ai[1]);let b;return m!==0?(b=yi(kn(),n,s,1,1,m,-n,-s),ct(b,Bi),ct(b,li),ct(b,ai),ct(b,Yi),pi(Math.min(Bi[0],li[0],ai[0],Yi[0]),Math.min(Bi[1],li[1],ai[1],Yi[1]),Math.max(Bi[0],li[0],ai[0],Yi[0]),Math.max(Bi[1],li[1],ai[1],Yi[1]),ms)):pi(Math.min(Z,Z+k),Math.min(j,j+W),Math.max(Z,Z+k),Math.max(j,j+W),ms),x&&(I=Math.round(I),R=Math.round(R)),{drawImageX:I,drawImageY:R,drawImageW:D,drawImageH:P,originX:g,originY:_,declutterBox:{minX:ms[0],minY:ms[1],maxX:ms[2],maxY:ms[3],value:C},canvasTransform:b,scale:y}}replayImageOrLabel_(e,t,n,s,l,a,c){const h=!!(a||c),g=s.declutterBox,_=c?c[2]*s.scale[0]/2:0;return g.minX-_<=t[0]&&g.maxX+_>=0&&g.minY-_<=t[1]&&g.maxY+_>=0&&(h&&this.replayTextBackground_(e,Bi,li,ai,Yi,a,c),nx(e,s.canvasTransform,l,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=ct(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(n[0]%s,n[1]%s),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,s){const l=this.textStates[t],a=this.createLabel(e,t,s,n),c=this.strokeStates[n],h=this.pixelRatio,g=Ih(Array.isArray(e)?e[0]:e,l.textAlign||$o),_=$a[l.textBaseline||ba],m=c&&c.lineWidth?c.lineWidth:0,y=a.width/h-2*l.scale[0],x=g*y+2*(.5-g)*m,E=_*a.height/h+2*(.5-_)*m;return{label:a,anchorX:x,anchorY:E}}execute_(e,t,n,s,l,a,c,h){const g=this.zIndexContext_;let _;this.pixelCoordinates_&&sr(n,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=tr(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),sv(this.renderedTransform_,n));let m=0;const y=s.length;let x=0,E,w,C,I,R,D,P,k,W,Z,j,b,B,ie=0,$=0,te=null,J=null;const ee=this.coordinateCache_,ne=this.viewRotation_,K=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,U={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ne},q=this.instructions!=s||this.overlaps?0:200;let G,T,N,re;for(;m<y;){const z=s[m];switch(z[0]){case ge.BEGIN_GEOMETRY:G=z[1],re=z[3],G.getGeometry()?c!==void 0&&!At(c,re.getExtent())?m=z[2]+1:++m:m=z[2],g&&(g.zIndex=z[4]);break;case ge.BEGIN_PATH:ie>q&&(this.fill_(e),ie=0),$>q&&(e.stroke(),$=0),!ie&&!$&&(e.beginPath(),R=NaN,D=NaN),++m;break;case ge.CIRCLE:x=z[1];const he=_[x],me=_[x+1],xe=_[x+2],Te=_[x+3],Ge=xe-he,Tt=Te-me,Dn=Math.sqrt(Ge*Ge+Tt*Tt);e.moveTo(he+Dn,me),e.arc(he,me,Dn,0,2*Math.PI,!0),++m;break;case ge.CLOSE_PATH:e.closePath(),++m;break;case ge.CUSTOM:x=z[1],E=z[2];const gn=z[3],Hn=z[4],Fn=z[5];U.geometry=gn,U.feature=G,m in ee||(ee[m]=[]);const Jt=ee[m];Fn?Fn(_,x,E,2,Jt):(Jt[0]=_[x],Jt[1]=_[x+1],Jt.length=2),g&&(g.zIndex=z[6]),Hn(Jt,U),++m;break;case ge.DRAW_IMAGE:x=z[1],E=z[2],W=z[3],w=z[4],C=z[5];let pt=z[6];const Vt=z[7],On=z[8],en=z[9],tn=z[10];let _n=z[11];const $n=z[12];let qn=z[13];I=z[14]||"declutter";const $e=z[15];if(!W&&z.length>=20){Z=z[19],j=z[20],b=z[21],B=z[22];const Rt=this.drawLabelWithPointPlacement_(Z,j,b,B);W=Rt.label,z[3]=W;const pn=z[23];w=(Rt.anchorX-pn)*this.pixelRatio,z[4]=w;const It=z[24];C=(Rt.anchorY-It)*this.pixelRatio,z[5]=C,pt=W.height,z[6]=pt,qn=W.width,z[13]=qn}let Gr;z.length>25&&(Gr=z[25]);let lr,Qn,ar;z.length>17?(lr=z[16],Qn=z[17],ar=z[18]):(lr=Mr,Qn=!1,ar=!1),tn&&K?_n+=ne:!tn&&!K&&(_n-=ne);let ur=0;for(;x<E;x+=2){if(Gr&&Gr[ur++]<qn/this.pixelRatio)continue;const Rt=this.calculateImageOrLabelDimensions_(W.width,W.height,_[x],_[x+1],qn,pt,w,C,On,en,_n,$n,l,lr,Qn||ar,G),pn=[e,t,W,Rt,Vt,Qn?te:null,ar?J:null];if(h){let It,mt,yt;if($e){const je=E-x;if(!$e[je]){$e[je]={args:pn,declutterMode:I};continue}const Je=$e[je];It=Je.args,mt=Je.declutterMode,delete $e[je],yt=Gp(It)}let Lt,mn;if(It&&(mt!=="declutter"||!h.collides(yt))&&(Lt=!0),(I!=="declutter"||!h.collides(Rt.declutterBox))&&(mn=!0),mt==="declutter"&&I==="declutter"){const je=Lt&&mn;Lt=je,mn=je}Lt&&(mt!=="none"&&h.insert(yt),this.replayImageOrLabel_.apply(this,It)),mn&&(I!=="none"&&h.insert(Rt.declutterBox),this.replayImageOrLabel_.apply(this,pn))}else this.replayImageOrLabel_.apply(this,pn)}++m;break;case ge.DRAW_CHARS:const xi=z[1],cl=z[2],jr=z[3],hl=z[4];B=z[5];const wu=z[6],Ur=z[7],Xr=z[8];b=z[9];const cr=z[10];Z=z[11],j=z[12];const Wr=[z[13],z[13]];I=z[14]||"declutter";const Vs=z[15],Nn=this.textStates[j],nn=Nn.font,wi=[Nn.scale[0]*Ur,Nn.scale[1]*Ur];let Ci;nn in this.widths_?Ci=this.widths_[nn]:(Ci={},this.widths_[nn]=Ci);const Ks=r0(_,xi,cl,2),Zs=Math.abs(wi[0])*mp(nn,Z,Ci);if(hl||Zs<=Ks){const Rt=this.textStates[j].textAlign,pn=(Ks-Zs)*Ih(Z,Rt),It=cC(_,xi,cl,2,Z,pn,wu,Math.abs(wi[0]),mp,nn,Ci,K?0:this.viewRotation_,Vs);e:if(It){const mt=[];let yt,Lt,mn,je,Je;if(b)for(yt=0,Lt=It.length;yt<Lt;++yt){Je=It[yt],mn=Je[4],je=this.createLabel(mn,j,"",b),w=Je[2]+(wi[0]<0?-cr:cr),C=jr*je.height+(.5-jr)*2*cr*wi[1]/wi[0]-Xr;const Dt=this.calculateImageOrLabelDimensions_(je.width,je.height,Je[0],Je[1],je.width,je.height,w,C,0,0,Je[3],Wr,!1,Mr,!1,G);if(h&&I==="declutter"&&h.collides(Dt.declutterBox))break e;mt.push([e,t,je,Dt,1,null,null])}if(B)for(yt=0,Lt=It.length;yt<Lt;++yt){Je=It[yt],mn=Je[4],je=this.createLabel(mn,j,B,""),w=Je[2],C=jr*je.height-Xr;const Dt=this.calculateImageOrLabelDimensions_(je.width,je.height,Je[0],Je[1],je.width,je.height,w,C,0,0,Je[3],Wr,!1,Mr,!1,G);if(h&&I==="declutter"&&h.collides(Dt.declutterBox))break e;mt.push([e,t,je,Dt,1,null,null])}h&&I!=="none"&&h.load(mt.map(Gp));for(let Dt=0,Hs=mt.length;Dt<Hs;++Dt)this.replayImageOrLabel_.apply(this,mt[Dt])}}++m;break;case ge.END_GEOMETRY:if(a!==void 0){G=z[1];const Rt=a(G,re,I);if(Rt)return Rt}++m;break;case ge.FILL:q?ie++:this.fill_(e),++m;break;case ge.MOVE_TO_LINE_TO:for(x=z[1],E=z[2],T=_[x],N=_[x+1],e.moveTo(T,N),R=T+.5|0,D=N+.5|0,x+=2;x<E;x+=2)T=_[x],N=_[x+1],P=T+.5|0,k=N+.5|0,(x==E-2||P!==R||k!==D)&&(e.lineTo(T,N),R=P,D=k);++m;break;case ge.SET_FILL_STYLE:te=z,this.alignAndScaleFill_=z[2],ie&&(this.fill_(e),ie=0,$&&(e.stroke(),$=0)),e.fillStyle=z[1],++m;break;case ge.SET_STROKE_STYLE:J=z,$&&(e.stroke(),$=0),this.setStrokeStyle_(e,z),++m;break;case ge.STROKE:q?$++:e.stroke(),++m;break;default:++m;break}}ie&&this.fill_(e),$&&e.stroke()}execute(e,t,n,s,l,a){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,l,void 0,void 0,a)}executeHitDetection(e,t,n,s,l){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,s,l)}}const Ts=["Polygon","Circle","LineString","Image","Text","Default"],s0=["Image","Text"],fC=Ts.filter(r=>!s0.includes(r));class gC{constructor(e,t,n,s,l,a,c){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=kn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,c)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let s=this.executorsByZIndex_[n];s===void 0&&(s={},this.executorsByZIndex_[n]=s);const l=e[n];for(const a in l){const c=l[a];s[a]=new dC(this.resolution_,this.pixelRatio_,this.overlaps_,c,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,l=e.length;s<l;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,l,a){s=Math.round(s);const c=s*2+1,h=yi(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=tt(c,c,void 0,{willReadFrequently:!0}));const _=this.hitDetectionContext_;_.canvas.width!==c||_.canvas.height!==c?(_.canvas.width=c,_.canvas.height=c):g||_.clearRect(0,0,c,c);let m;this.renderBuffer_!==void 0&&(m=Qt(),Xo(m,e),od(m,t*(this.renderBuffer_+s),m));const y=_C(s);let x;function E(k,W,Z){const j=_.getImageData(0,0,c,c).data;for(let b=0,B=y.length;b<B;b++)if(j[y[b]]>0){if(!a||Z==="none"||x!=="Image"&&x!=="Text"||a.includes(k)){const ie=(y[b]-3)/4,$=s-ie%c,te=s-(ie/c|0),J=l(k,W,$*$+te*te);if(J)return J}_.clearRect(0,0,c,c);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(er);let C,I,R,D,P;for(C=w.length-1;C>=0;--C){const k=w[C].toString();for(R=this.executorsByZIndex_[k],I=Ts.length-1;I>=0;--I)if(x=Ts[I],D=R[x],D!==void 0&&(P=D.executeHitDetection(_,h,n,E,m),P))return P}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],l=t[2],a=t[3],c=[n,s,n,a,l,a,l,s];return tr(c,0,8,2,e,c),c}isEmpty(){return Ds(this.executorsByZIndex_)}execute(e,t,n,s,l,a,c){const h=Object.keys(this.executorsByZIndex_).map(Number);h.sort(c?YE:er),a=a||Ts;const g=Ts.length;for(let _=0,m=h.length;_<m;++_){const y=h[_].toString(),x=this.executorsByZIndex_[y];for(let E=0,w=a.length;E<w;++E){const C=a[E],I=x[C];if(I!==void 0){const R=c===null?void 0:I.getZIndexContext(),D=R?R.getContext():e,P=this.maxExtent_&&C!=="Image"&&C!=="Text";if(P&&(D.save(),this.clip(D,n)),!R||C==="Text"||C==="Image"?I.execute(D,t,n,s,l,c):R.pushFunction(k=>I.execute(k,t,n,s,l,c)),P&&D.restore(),R){R.offset();const k=h[_]*g+E;this.deferredZIndexContexts_[k]||(this.deferredZIndexContexts_[k]=[]),this.deferredZIndexContexts_[k].push(R)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(er);for(let n=0,s=t.length;n<s;++n)e[t[n]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[n]].length=0}}const Lh={};function _C(r){if(Lh[r]!==void 0)return Lh[r];const e=r*2+1,t=r*r,n=new Array(t+1);for(let l=0;l<=r;++l)for(let a=0;a<=r;++a){const c=l*l+a*a;if(c>t)break;let h=n[c];h||(h=[],n[c]=h),h.push(((r+l)*e+(r+a))*4+3),l>0&&h.push(((r-l)*e+(r+a))*4+3),a>0&&(h.push(((r+l)*e+(r-a))*4+3),l>0&&h.push(((r-l)*e+(r-a))*4+3))}const s=[];for(let l=0,a=n.length;l<a;++l)n[l]&&s.push(...n[l]);return Lh[r]=s,s}class pC extends i0{constructor(e,t,n,s,l,a,c){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?iu(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=a,this.userTransform_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=kn()}drawImages_(e,t,n,s){if(!this.image_)return;const l=tr(e,t,n,s,this.transform_,this.pixelCoordinates_),a=this.context_,c=this.tmpLocalTransform_,h=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=h*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let _=0,m=l.length;_<m;_+=2){const y=l[_]-this.imageAnchorX_,x=l[_+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=y+this.imageAnchorX_,w=x+this.imageAnchorY_;yi(c,E,w,1,1,g,-E,-w),a.save(),a.transform.apply(a,c),a.translate(E,w),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=h)}drawText_(e,t,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=tr(e,t,n,s,this.transform_,this.pixelCoordinates_),a=this.context_;let c=this.textRotation_;for(this.transformRotation_===0&&(c-=this.viewRotation_),this.textRotateWithView_&&(c+=this.viewRotation_);t<n;t+=s){const h=l[t]+this.textOffsetX_,g=l[t+1]+this.textOffsetY_;c!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(h-this.textOffsetX_,g-this.textOffsetY_),a.rotate(c),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,h,g),this.textFillState_&&a.fillText(this.text_,h,g))}}moveToLineTo_(e,t,n,s,l){const a=this.context_,c=tr(e,t,n,s,this.transform_,this.pixelCoordinates_);a.moveTo(c[0],c[1]);let h=c.length;l&&(h-=2);for(let g=2;g<h;g+=2)a.lineTo(c[g],c[g+1]);return l&&a.closePath(),n}drawRings_(e,t,n,s){for(let l=0,a=n.length;l<a;++l)t=this.moveToLineTo_(e,t,n[l],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!At(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=hv(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],l=Math.sqrt(n*n+s*s),a=this.context_;a.beginPath(),a.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!At(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(At(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let l=0;const a=e.getEnds(),c=e.getStride();n.beginPath();for(let h=0,g=a.length;h<g;++h)l=this.moveToLineTo_(s,l,a[h],c,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!At(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!At(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const l=e.getEndss(),a=e.getStride();t.beginPath();for(let c=0,h=l.length;c<h;++c){const g=l[c];s=this.drawRings_(n,s,g,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),sr(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:$o;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Yn(n||Xt)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),s=t.getLineCap(),l=t.getLineDash(),a=t.getLineDashOffset(),c=t.getLineJoin(),h=t.getWidth(),g=t.getMiterLimit(),_=l||fi;this.strokeState_={lineCap:s!==void 0?s:Us,lineDash:this.pixelRatio_===1?_:_.map(m=>m*this.pixelRatio_),lineDashOffset:(a||gi)*this.pixelRatio_,lineJoin:c!==void 0?c:Xs,lineWidth:(h!==void 0?h:qo)*this.pixelRatio_,miterLimit:g!==void 0?g:Zo,strokeStyle:Yn(n||Ho)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/n,a[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:Yn(x||Xt)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const x=n.getColor(),E=n.getLineCap(),w=n.getLineDash(),C=n.getLineDashOffset(),I=n.getLineJoin(),R=n.getWidth(),D=n.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:Us,lineDash:w||fi,lineDashOffset:C||gi,lineJoin:I!==void 0?I:Xs,lineWidth:R!==void 0?R:qo,miterLimit:D!==void 0?D:Zo,strokeStyle:Yn(x||Ho)}}const s=e.getFont(),l=e.getOffsetX(),a=e.getOffsetY(),c=e.getRotateWithView(),h=e.getRotation(),g=e.getScaleArray(),_=e.getText(),m=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:s!==void 0?s:Dm,textAlign:m!==void 0?m:$o,textBaseline:y!==void 0?y:ba},this.text_=_!==void 0?Array.isArray(_)?_.reduce((x,E,w)=>x+=w%2?" ":E,""):_:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=c!==void 0?c:!1,this.textRotation_=h!==void 0?h:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const bn=.5;function mC(r,e,t,n,s,l,a,c,h){const g=s,_=r[0]*bn,m=r[1]*bn,y=tt(_,m);y.imageSmoothingEnabled=!1;const x=y.canvas,E=new pC(y,bn,s,null,a,c,null),w=t.length,C=Math.floor((256*256*256-1)/w),I={};for(let D=1;D<=w;++D){const P=t[D-1],k=P.getStyleFunction()||n;if(!k)continue;let W=k(P,l);if(!W)continue;Array.isArray(W)||(W=[W]);const j=(D*C).toString(16).padStart(7,"#00000");for(let b=0,B=W.length;b<B;++b){const ie=W[b],$=ie.getGeometryFunction()(P);if(!$||!At(g,$.getExtent()))continue;const te=ie.clone(),J=te.getFill();J&&J.setColor(j);const ee=te.getStroke();ee&&(ee.setColor(j),ee.setLineDash(null)),te.setText(void 0);const ne=ie.getImage();if(ne){const G=ne.getImageSize();if(!G)continue;const T=tt(G[0],G[1],void 0,{alpha:!1}),N=T.canvas;T.fillStyle=j,T.fillRect(0,0,N.width,N.height),te.setImage(new pu({img:N,anchor:ne.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ne.getOrigin(),opacity:1,size:ne.getSize(),scale:ne.getScale(),rotation:ne.getRotation(),rotateWithView:ne.getRotateWithView()}))}const K=te.getZIndex()||0;let U=I[K];U||(U={},I[K]=U,U.Polygon=[],U.Circle=[],U.LineString=[],U.Point=[]);const q=$.getType();if(q==="GeometryCollection"){const G=$.getGeometriesArrayRecursive();for(let T=0,N=G.length;T<N;++T){const re=G[T];U[re.getType().replace("Multi","")].push(re,te)}}else U[q.replace("Multi","")].push($,te)}}const R=Object.keys(I).map(Number).sort(er);for(let D=0,P=R.length;D<P;++D){const k=I[R[D]];for(const W in k){const Z=k[W];for(let j=0,b=Z.length;j<b;j+=2){E.setStyle(Z[j+1]);for(let B=0,ie=e.length;B<ie;++B)E.setTransform(e[B]),E.drawGeometry(Z[j])}}}return y.getImageData(0,0,x.width,x.height)}function yC(r,e,t){const n=[];if(t){const s=Math.floor(Math.round(r[0])*bn),l=Math.floor(Math.round(r[1])*bn),a=(Ze(s,0,t.width-1)+Ze(l,0,t.height-1)*t.width)*4,c=t.data[a],h=t.data[a+1],_=t.data[a+2]+256*(h+256*c),m=Math.floor((256*256*256-1)/e.length);_&&_%m===0&&n.push(e[_/m-1])}return n}const EC=.5,o0={Point:IC,LineString:SC,Polygon:PC,MultiPoint:LC,MultiLineString:TC,MultiPolygon:RC,GeometryCollection:CC,Circle:xC};function vC(r,e){return parseInt(Fe(r),10)-parseInt(Fe(e),10)}function Up(r,e){const t=l0(r,e);return t*t}function l0(r,e){return EC*r/e}function xC(r,e,t,n,s){const l=t.getFill(),a=t.getStroke();if(l||a){const h=r.getBuilder(t.getZIndex(),"Circle");h.setFillStrokeStyle(l,a),h.drawCircle(e,n,s)}const c=t.getText();if(c&&c.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,n)}}function Xp(r,e,t,n,s,l,a,c){const h=[],g=t.getImage();if(g){let y=!0;const x=g.getImageState();x==Ce.LOADED||x==Ce.ERROR?y=!1:x==Ce.IDLE&&g.load(),y&&h.push(g.ready())}const _=t.getFill();_&&_.loading()&&h.push(_.ready());const m=h.length>0;return m&&Promise.all(h).then(()=>s(null)),wC(r,e,t,n,l,a,c),m}function wC(r,e,t,n,s,l,a){const c=t.getGeometryFunction()(e);if(!c)return;const h=c.simplifyTransformed(n,s);if(t.getRenderer())a0(r,h,t,e,a);else{const _=o0[h.getType()];_(r,h,t,e,a,l)}}function a0(r,e,t,n,s){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let c=0,h=a.length;c<h;++c)a0(r,a[c],t,n,s);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),s)}function CC(r,e,t,n,s,l){const a=e.getGeometriesArray();let c,h;for(c=0,h=a.length;c<h;++c){const g=o0[a[c].getType()];g(r,a[c],t,n,s,l)}}function SC(r,e,t,n,s){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawLineString(e,n,s)}const a=t.getText();if(a&&a.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,n,s)}}function TC(r,e,t,n,s){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawMultiLineString(e,n,s)}const a=t.getText();if(a&&a.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a),c.drawText(e,n,s)}}function RC(r,e,t,n,s){const l=t.getFill(),a=t.getStroke();if(a||l){const h=r.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(l,a),h.drawMultiPolygon(e,n,s)}const c=t.getText();if(c&&c.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,n,s)}}function IC(r,e,t,n,s,l){const a=t.getImage(),c=t.getText(),h=c&&c.getText(),g=l&&a&&h?{}:void 0;if(a){if(a.getImageState()!=Ce.LOADED)return;const _=r.getBuilder(t.getZIndex(),"Image");_.setImageStyle(a,g),_.drawPoint(e,n,s)}if(h){const _=r.getBuilder(t.getZIndex(),"Text");_.setTextStyle(c,g),_.drawText(e,n,s)}}function LC(r,e,t,n,s,l){const a=t.getImage(),c=a&&a.getOpacity()!==0,h=t.getText(),g=h&&h.getText(),_=l&&c&&g?{}:void 0;if(c){if(a.getImageState()!=Ce.LOADED)return;const m=r.getBuilder(t.getZIndex(),"Image");m.setImageStyle(a,_),m.drawMultiPoint(e,n,s)}if(g){const m=r.getBuilder(t.getZIndex(),"Text");m.setTextStyle(h,_),m.drawText(e,n,s)}}function PC(r,e,t,n,s){const l=t.getFill(),a=t.getStroke();if(l||a){const h=r.getBuilder(t.getZIndex(),"Polygon");h.setFillStrokeStyle(l,a),h.drawPolygon(e,n,s)}const c=t.getText();if(c&&c.getText()){const h=r.getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(e,n,s)}}class MC extends Qm{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Qt(),this.wrappedRenderedExtent_=Qt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,l=t.viewState,a=l.center,c=l.resolution,h=l.projection,g=l.rotation,_=h.getExtent(),m=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),x=t.pixelRatio,E=t.viewHints,w=!(E[St.ANIMATING]||E[St.INTERACTING]),C=this.context,I=Math.round(Pe(s)/c*x),R=Math.round(ht(s)/c*x),D=m.getWrapX()&&h.canWrapX(),P=D?Pe(_):null,k=D?Math.ceil((s[2]-_[2])/P)+1:1;let W=D?Math.floor((s[0]-_[0])/P):0;do{let Z=this.getRenderTransform(a,c,0,x,I,R,W*P);t.declutter&&(Z=Z.slice(0)),e.execute(C,[C.canvas.width,C.canvas.height],Z,g,w,n===void 0?Ts:n?s0:fC,n?y&&t.declutter[y]:void 0)}while(++W<k)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=tt(this.context.canvas.width,this.context.canvas.height,Lp))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,du(this.context),Lp.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const s=e.viewState;this.prepareContainer(e,t);const l=this.context,a=this.replayGroup_;let c=a&&!a.isEmpty();if(!c&&!(this.getLayer().hasListener(hn.PRERENDER)||this.getLayer().hasListener(hn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(l,e),s.projection,this.clipped_=!1,c&&n.extent&&this.clipping){const h=$i(n.extent);c=At(h,e.extent),this.clipped_=c&&!Ss(h,e.extent),this.clipped_&&this.clipUnrotated(l,e,h)}return c&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),s=this.renderedCenter_,l=this.renderedResolution_,a=this.renderedRotation_,c=this.renderedProjection_,h=this.wrappedRenderedExtent_,g=this.getLayer(),_=[],m=n[0]*bn,y=n[1]*bn;_.push(this.getRenderTransform(s,l,a,bn,m,y,0).slice());const x=g.getSource(),E=c.getExtent();if(x.getWrapX()&&c.canWrapX()&&!Ss(E,h)){let w=h[0];const C=Pe(E);let I=0,R;for(;w<E[0];)--I,R=C*I,_.push(this.getRenderTransform(s,l,a,bn,m,y,R).slice()),w+=C;for(I=0,w=h[2];w>E[2];)++I,R=C*I,_.push(this.getRenderTransform(s,l,a,bn,m,y,R).slice()),w-=C}this.hitDetectionImageData_=mC(n,_,this.renderedFeatures_,g.getStyleFunction(),h,l,a,Up(l,this.renderedPixelRatio_))}t(yC(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,l){if(!this.replayGroup_)return;const a=t.viewState.resolution,c=t.viewState.rotation,h=this.getLayer(),g={},_=function(y,x,E){const w=Fe(y),C=g[w];if(C){if(C!==!0&&E<C.distanceSq){if(E===0)return g[w]=!0,l.splice(l.lastIndexOf(C),1),s(y,h,x);C.geometry=x,C.distanceSq=E}}else{if(E===0)return g[w]=!0,s(y,h,x);l.push(g[w]={feature:y,layer:h,geometry:x,distanceSq:E,callback:s})}},m=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,c,n,_,m?t.declutter[m].all().map(y=>y.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[St.ANIMATING],l=e.viewHints[St.INTERACTING],a=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!a&&s||!c&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const h=e.extent,g=e.viewState,_=g.projection,m=g.resolution,y=e.pixelRatio,x=t.getRevision(),E=t.getRenderBuffer();let w=t.getRenderOrder();w===void 0&&(w=vC);const C=g.center.slice(),I=od(h,E*m),R=I.slice(),D=[I.slice()],P=_.getExtent();if(n.getWrapX()&&_.canWrapX()&&!Ss(P,e.extent)){const J=Pe(P),ee=Math.max(Pe(I)/2,J);I[0]=P[0]-ee,I[2]=P[2]+ee,Qp(C,_);const ne=Hp(D[0],_);ne[0]<P[0]&&ne[2]<P[2]?D.push([ne[0]+J,ne[1],ne[2]+J,ne[3]]):ne[0]>P[0]&&ne[2]>P[2]&&D.push([ne[0]-J,ne[1],ne[2]-J,ne[3]])}if(this.ready&&this.renderedResolution_==m&&this.renderedRevision_==x&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&Ss(this.wrappedRenderedExtent_,I))return sr(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new uC(l0(m,y),I,m,y);let W;for(let J=0,ee=D.length;J<ee;++J)n.loadFeatures(D[J],m,_);const Z=Up(m,y);let j=!0;const b=(J,ee)=>{let ne;const K=J.getStyleFunction()||t.getStyleFunction();if(K&&(ne=K(J,m)),ne){const U=this.renderFeature(J,Z,ne,k,W,this.getLayer().getDeclutter(),ee);j=j&&!U}},B=om(I),ie=n.getFeaturesInExtent(B);w&&ie.sort(w);for(let J=0,ee=ie.length;J<ee;++J)b(ie[J],J);this.renderedFeatures_=ie,this.ready=j;const $=k.finish(),te=new gC(I,m,y,n.getOverlaps(),$,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=m,this.renderedRevision_=x,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=I,this.renderedCenter_=C,this.renderedProjection_=_,this.renderedPixelRatio_=y,this.replayGroup_=te,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,l,a,c){if(!n)return!1;let h=!1;if(Array.isArray(n))for(let g=0,_=n.length;g<_;++g)h=Xp(s,e,n[g],t,this.boundHandleStyleImageChange_,l,a,c)||h;else h=Xp(s,e,n,t,this.boundHandleStyleImageChange_,l,a,c);return h}}class u0 extends bm{constructor(e){super(e)}createRenderer(){return new MC(this)}}class Wp{constructor(e){this.rbush_=new Sm(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Fe(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,l=t.length;s<l;s++){const a=e[s],c=t[s],h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:c};n[s]=h,this.items_[Fe(c)]=h}this.rbush_.load(n)}remove(e){const t=Fe(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Fe(t)],s=[n.minX,n.minY,n.maxX,n.maxY];bo(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,l=e.length;s<l;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return Ds(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return pi(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ir extends Zn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ir(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ue(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ie(e,ve.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?kC(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function kC(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(Ae(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}class vu extends or{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new vu(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const l=this.flatCoordinates,a=e-l[0],c=t-l[1],h=a*a+c*c;if(h<s){if(h===0)for(let g=0;g<this.stride;++g)n[g]=l[g];else{const g=this.getRadius()/Math.sqrt(h);n[0]=l[0]+g*a,n[1]=l[1]+g*c;for(let _=2;_<this.stride;++_)n[_]=l[_]}return n.length=this.stride,h}return s}containsXY(e,t){const n=this.flatCoordinates,s=e-n[0],l=t-n[1];return s*s+l*l<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return pi(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(At(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:cd(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],s=e.slice();s[t]=s[0]+n;for(let l=1;l<t;++l)s[t+l]=e[l];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let l=gm(s,0,e,this.stride);s[l++]=s[0]+t;for(let a=1,c=this.stride;a<c;++a)s[l++]=s[a];s.length=l,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),s=this.getStride();this.setCenter(Sd(n,0,n.length,s,e,t,n)),this.changed()}}vu.prototype.transform;class qa extends fm{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ue),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Ie(e[t],ve.CHANGE,this.changed,this))}clone(){const e=new qa(Ph(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Nr(this.getExtent(),e,t))return s;const l=this.geometries_;for(let a=0,c=l.length;a<c;++a)s=l[a].closestPointXY(e,t,n,s);return s}containsXY(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)if(n[s].containsXY(e,t))return!0;return!1}computeExtent(e){rl(e);const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)ud(e,t[n].getExtent());return e}getGeometries(){return Ph(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let s=!1;for(let l=0,a=n.length;l<a;++l){const c=n[l],h=c.getSimplifiedGeometry(e);t.push(h),h!==c&&(s=!0)}return s?new qa(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)n[s].rotate(e,t);this.changed()}scale(e,t,n){n||(n=ir(this.getExtent()));const s=this.geometries_;for(let l=0,a=s.length;l<a;++l)s[l].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(Ph(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)n[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ph(r){return r.map(e=>e.clone())}function Qa(r,e,t,n,s,l,a){let c,h;const g=(t-e)/n;if(g===1)c=e;else if(g===2)c=e,h=s;else if(g!==0){let _=r[e],m=r[e+1],y=0;const x=[0];for(let C=e+n;C<t;C+=n){const I=r[C],R=r[C+1];y+=Math.sqrt((I-_)*(I-_)+(R-m)*(R-m)),x.push(y),_=I,m=R}const E=s*y,w=BE(x,E);w<0?(h=(E-x[-w-2])/(x[-w-1]-x[-w-2]),c=e+(-w-2)*n):c=e+w*n}a=a>1?a:2,l=l||new Array(a);for(let _=0;_<a;++_)l[_]=c===void 0?NaN:h===void 0?r[c+_]:qt(r[c+_],r[c+n+_],h);return l}function nd(r,e,t,n,s,l){if(t==e)return null;let a;if(s<r[e+n-1])return l?(a=r.slice(e,e+n),a[n-1]=s,a):null;if(r[t-1]<s)return l?(a=r.slice(t-n,t),a[n-1]=s,a):null;if(s==r[e+n-1])return r.slice(e,e+n);let c=e/n,h=t/n;for(;c<h;){const y=c+h>>1;s<r[(y+1)*n-1]?h=y:c=y+1}const g=r[c*n-1];if(s==g)return r.slice((c-1)*n,(c-1)*n+n);const _=r[(c+1)*n-1],m=(s-g)/(_-g);a=[];for(let y=0;y<n-1;++y)a.push(qt(r[(c-1)*n+y],r[c*n+y],m));return a.push(s),a}function AC(r,e,t,n,s,l,a){if(a)return nd(r,e,t[t.length-1],n,s,l);let c;if(s<r[n-1])return l?(c=r.slice(0,n),c[n-1]=s,c):null;if(r[r.length-1]<s)return l?(c=r.slice(r.length-n),c[n-1]=s,c):null;for(let h=0,g=t.length;h<g;++h){const _=t[h];if(e!=_){if(s<r[e+n-1])return null;if(s<=r[_-1])return nd(r,e,_,n,s,!1);e=_}}return null}class _i extends or{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Vn(this.flatCoordinates,e),this.changed()}clone(){const e=new _i(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Nr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Td(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Id(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,s))}forEachSegment(e){return Em(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,nd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Qa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return r0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=uu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new _i(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return cu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=au(this.flatCoordinates,0,e,this.stride),this.changed()}}class el extends or{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const s=e,l=[],a=[];for(let h=0,g=s.length;h<g;++h){const _=s[h];Vn(l,_.getFlatCoordinates()),a.push(l.length)}const c=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(c,l),this.ends_=a}}appendLineString(e){Vn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new el(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Nr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ld(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,s))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,AC(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Yo(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new _i(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,s=[];let l=0;for(let a=0,c=t.length;a<c;++a){const h=t[a],g=new _i(e.slice(l,h),n);s.push(g),l=h}return s}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const s=this.ends_,l=this.stride;for(let a=0,c=s.length;a<c;++a){const h=s[a],g=Qa(t,n,h,l,.5);Vn(e,g),n=h}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=_m(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new el(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return vv(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Pd(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class xu extends or{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Vn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new xu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Nr(this.getExtent(),e,t))return s;const l=this.flatCoordinates,a=this.stride;for(let c=0,h=l.length;c<h;c+=a){const g=di(e,t,l[c],l[c+1]);if(g<s){s=g;for(let _=0;_<a;++_)n[_]=l[c+_];n.length=a}}return s}getCoordinates(){return qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new nr(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,s=[];for(let l=0,a=e.length;l<a;l+=n){const c=new nr(e.slice(l,l+n),t);s.push(c)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let s=0,l=t.length;s<l;s+=n){const a=t[s],c=t[s+1];if(ld(e,a,c))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=au(this.flatCoordinates,0,e,this.stride),this.changed()}}function c0(r,e,t,n){const s=[];let l=Qt();for(let a=0,c=t.length;a<c;++a){const h=t[a];l=ad(r,e,h[0],n),s.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=h[h.length-1]}return s}class tl extends or{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const s=e,l=[],a=[];for(let c=0,h=s.length;c<h;++c){const g=s[c],_=l.length,m=g.getEnds();for(let y=0,x=m.length;y<x;++y)m[y]+=_;Vn(l,g.getFlatCoordinates()),a.push(m)}t=s.length===0?this.getLayout():s[0].getLayout(),e=l,n=a}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Vn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,l=t.length;s<l;++s)t[s]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const n=new tl(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,s){return s<Nr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dv(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return Ev(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return mv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),lp(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Wh(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=c0(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ym(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new xu(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Cv(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=lp(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=pv(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new tl(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const l=this.endss_[e-1];t=l[l.length-1]}const n=this.endss_[e].slice(),s=n[n.length-1];if(t!==0)for(let l=0,a=n.length;l<a;++l)n[l]-=t;return new Ei(this.flatCoordinates.slice(t,s),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,s=[];let l=0;for(let a=0,c=n.length;a<c;++a){const h=n[a].slice(),g=h[h.length-1];if(l!==0)for(let m=0,y=h.length;m<y;++m)h[m]-=l;const _=new Ei(t.slice(l,g),e,h);s.push(_),l=g}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return xv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=gv(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const bp=kn();class In{constructor(e,t,n,s,l,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Kp(this.flatCoordinates_):ad(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=ir(this.getExtent());this.flatInteriorPoints_=Ad(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Sv(this.flatCoordinates_,this.ends_),t=c0(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=ym(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Qa(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let s=0,l=n.length;s<l;++s){const a=n[s],c=Qa(e,t,a,2,.5);Vn(this.flatMidpoints_,c),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Yt(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const s=ht(n)/ht(t);yi(bp,n[0],n[3],s,-s,0,0,0),tr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,bp,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new In(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=um((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":n.length=uu(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),s=[n.length];break;case"MultiLineString":s=[],n.length=_m(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,s);break;case"Polygon":s=[],n.length=Md(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,s);break}return s&&(this.simplifiedGeometry_=new In(this.type_,n,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}In.prototype.getFlatCoordinates=In.prototype.getOrientedFlatCoordinates;class h0 extends Zn{constructor(e){super(),this.projection=Yt(e.projection),this.attributions_=Bp(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Bp(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Bp(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const cn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function DC(r,e){return[[-1/0,-1/0,1/0,1/0]]}let FC=!1;function OC(r,e,t,n,s,l,a){const c=new XMLHttpRequest;c.open("GET",typeof r=="function"?r(t,n,s):r,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=FC,c.onload=function(h){if(!c.status||c.status>=200&&c.status<300){const g=e.getType();try{let _;g=="text"||g=="json"?_=c.responseText:g=="xml"?_=c.responseXML||c.responseText:g=="arraybuffer"&&(_=c.response),_?l(e.readFeatures(_,{extent:t,featureProjection:s}),e.readProjection(_)):a()}catch{a()}}else a()},c.onerror=a,c.send()}function Yp(r,e){return function(t,n,s,l,a){const c=this;OC(r,e,t,n,s,function(h,g){c.addFeatures(h),l!==void 0&&l(h)},a||Gs)}}class Vi extends Kn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class d0 extends h0{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Gs,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ae(this.format_,"`format` must be set when `url` is set"),this.loader_=Yp(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:DC;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Wp:null,this.loadedExtentsRtree_=new Wp,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&n===void 0&&(n=new Bn(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Fe(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Vi(cn.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof In||(this.featureChangeKeys_[e]=[Ie(t,ve.CHANGE,this.handleFeatureChange_,this),Ie(t,Ns.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const s=String(t.getId());if(!(s in this.idIndex_))this.idIndex_[s]=t;else if(t instanceof In){const l=this.idIndex_[s];l instanceof In?Array.isArray(l)?l.push(t):this.idIndex_[s]=[l,t]:n=!1}else n=!1}return n&&(Ae(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let l=0,a=e.length;l<a;l++){const c=e[l],h=Fe(c);this.addToIndex_(h,c)&&n.push(c)}for(let l=0,a=n.length;l<a;l++){const c=n[l],h=Fe(c);this.setupChangeEvents_(h,c);const g=c.getGeometry();if(g){const _=g.getExtent();t.push(_),s.push(c)}else this.nullGeometryFeatures_[h]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(cn.ADDFEATURE))for(let l=0,a=n.length;l<a;l++)this.dispatchEvent(new Vi(cn.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(cn.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(cn.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Ut.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Ut.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Ue);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Vi(cn.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(s){const l=s.getGeometry();if(l instanceof In||l.intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const s=n.getGeometry();if(s instanceof In||s.intersectsExtent(e)){const l=t(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ds(this.nullGeometryFeatures_)||Vn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=hd(e,t);return[].concat(...s.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let l=null;const a=[NaN,NaN];let c=1/0;const h=[-1/0,-1/0,1/0,1/0];return t=t||zs,this.featuresRtree_.forEachInExtent(h,function(g){if(t(g)){const _=g.getGeometry(),m=c;if(c=_ instanceof In?0:_.closestPointXY(n,s,a,c),c<m){l=g;const y=Math.sqrt(c);h[0]=n-y,h[1]=s-y,h[2]=n+y,h[3]=s+y}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Fe(t),s=t.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const a=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const l=t.getId();if(l!==void 0){const a=l.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Vi(cn.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Fe(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ds(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,l=this.strategy_(e,t,n);for(let a=0,c=l.length;a<c;++a){const h=l[a];s.forEachInExtent(h,function(_){return Ss(_.extent,h)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Vi(cn.FEATURESLOADSTART)),this.loader_.call(this,h,t,n,_=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vi(cn.FEATURESLOADEND,void 0,_))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vi(cn.FEATURESLOADERROR))}),s.insert(h,{extent:h.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(s){if(bo(s.extent,e))return s});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,s=e.length;n<s;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Fe(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(Ue),delete this.featureChangeKeys_[t];const s=e.getId();if(s!==void 0){const l=s.toString(),a=this.idIndex_[l];a===e?delete this.idIndex_[l]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[l]=a[0]))}return delete this.uidIndex_[t],this.hasListener(cn.REMOVEFEATURE)&&this.dispatchEvent(new Vi(cn.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Ae(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Yp(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Mh={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},ys=[0,0,0],Ki=5;class f0{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ae(KE(this.resolutions_,(s,l)=>l-s),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let s=0,l=this.resolutions_.length-1;s<l;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ae(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=mi(n)),Ae(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ae(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:vd,Ae(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,l)=>{const a=new $d(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const c=this.getTileRangeForExtentAndZ(n,l);a.minX=Math.max(c.minX,a.minX),a.maxX=Math.min(c.maxX,a.maxX),a.minY=Math.max(c.minY,a.minY),a.maxY=Math.min(c.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let l=s.minX,a=s.maxX;l<=a;++l)for(let c=s.minY,h=s.maxY;c<=h;++c)n([t,l,c])}forEachTileCoordParentTileRange(e,t,n,s){let l,a,c,h=null,g=e[0]-1;for(this.zoomFactor_===2?(a=e[1],c=e[2]):h=this.getTileCoordExtent(e,s);g>=this.minZoom;){if(a!==void 0&&c!==void 0?(a=Math.floor(a/2),c=Math.floor(c/2),l=ps(a,a,c,c,n)):l=this.getTileRangeForExtentAndZ(h,g,n),t(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,a=e[2]*2;return ps(l,l+1,a,a+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],l=e[1],a=e[2];if(t===s)return ps(l,a,l,a,n);if(this.zoomFactor_){const h=Math.pow(this.zoomFactor_,t-s),g=Math.floor(l*h),_=Math.floor(a*h);if(t<s)return ps(g,g,_,_,n);const m=Math.floor(h*(l+1))-1,y=Math.floor(h*(a+1))-1;return ps(g,m,_,y,n)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,ys);const s=ys[1],l=ys[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,ys);const a=ys[1],c=ys[2];return ps(s,a,l,c,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=Bt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),l=Bt(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*l[0]*s,c=n[1]-(e[2]+1)*l[1]*s,h=a+l[0]*s,g=c+l[1]*s;return pi(a,c,h,g,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,l){const a=this.getZForResolution(n),c=n/this.getResolution(a),h=this.getOrigin(a),g=Bt(this.getTileSize(a),this.tmpSize_);let _=c*(e-h[0])/n/g[0],m=c*(h[1]-t)/n/g[1];return s?(_=va(_,Ki)-1,m=va(m,Ki)-1):(_=Ea(_,Ki),m=Ea(m,Ki)),Ha(a,_,m,l)}getTileCoordForXYAndZ_(e,t,n,s,l){const a=this.getOrigin(n),c=this.getResolution(n),h=Bt(this.getTileSize(n),this.tmpSize_);let g=(e-a[0])/c/h[0],_=(a[1]-t)/c/h[1];return s?(g=va(g,Ki)-1,_=va(_,Ki)-1):(g=Ea(g,Ki),_=Ea(_,Ki)),Ha(n,g,_,l)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Ed(this.resolutions_,e,t||0);return Ze(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return vm(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}}function g0(r){let e=r.getDefaultTileGrid();return e||(e=jC(r),r.setDefaultTileGrid(e)),e}function NC(r,e,t){const n=e[0],s=r.getTileCoordCenter(e),l=qd(t);if(!Fs(l,s)){const a=Pe(l),c=Math.ceil((l[0]-s[0])/a);return s[0]+=a*c,r.getTileCoordForCoordAndZ(s,n)}return e}function zC(r,e,t,n){n=n!==void 0?n:"top-left";const s=_0(r,e,t);return new f0({extent:r,origin:F1(r,n),resolutions:s,tileSize:t})}function GC(r){const e=r,t=e.extent||Yt("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:_0(t,e.maxZoom,e.tileSize,e.maxResolution)};return new f0(n)}function _0(r,e,t,n){e=e!==void 0?e:qE,t=Bt(t!==void 0?t:vd);const s=ht(r),l=Pe(r);n=n>0?n:Math.max(l/t[0],s/t[1]);const a=e+1,c=new Array(a);for(let h=0;h<a;++h)c[h]=n/Math.pow(2,h);return c}function jC(r,e,t,n){const s=qd(r);return zC(s,e,t,n)}function qd(r){r=Yt(r);let e=r.getExtent();if(!e){const t=180*rd.degrees/r.getMetersPerUnit();e=pi(-t,-t,t,t)}return e}class UC extends h0{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Bt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Fe(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,l){return ke()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:g0(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),l=this.getTilePixelRatio(t),a=Bt(s.getTileSize(e),this.tmpSize);return l==1?a:$v(a,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const n=t!==void 0?t:this.getProjection(),s=t!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=NC(s,e,n)),Jw(e,s)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class XC extends Kn{constructor(e,t){super(e),this.tile=t}}const WC=/\{z\}/g,bC=/\{x\}/g,BC=/\{y\}/g,YC=/\{-y\}/g;function VC(r,e,t,n,s){return r.replace(WC,e.toString()).replace(bC,t.toString()).replace(BC,n.toString()).replace(YC,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}function KC(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let l;for(l=n;l<=s;++l)e.push(r.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(r.replace(t[0],s.toString()));return e}return e.push(r),e}function ZC(r,e){return function(t,n,s){if(!t)return;let l;const a=t[0];if(e){const c=e.getFullTileRange(a);c&&(l=c.getHeight()-1)}return VC(r,a,t[1],t[2],l)}}function HC(r,e){const t=r.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=ZC(r[s],e);return $C(n)}function $C(r){return r.length===1?r[0]:function(e,t,n){if(!e)return;const s=qw(e),l=Ps(s,r.length);return r[l](e,t,n)}}class Qd extends UC{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Qd.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Fe(t),s=t.getState();let l;s==oe.LOADING?(this.tileLoadingKeys_[n]=!0,l=Mh.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=s==oe.ERROR?Mh.TILELOADERROR:s==oe.LOADED?Mh.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new XC(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=KC(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(HC(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class qC extends Qd{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:QC,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Jm,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!uh(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||uh(t,e)))return this.tileGrid;const n=Fe(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=g0(e)),this.tileGridForProjection[n]}createTile_(e,t,n,s,l,a){const c=[e,t,n],h=this.getTileCoordForTileUrlFunction(c,l),g=h?this.tileUrlFunction(h,s,l):void 0,_=new this.tileClass(c,g!==void 0?oe.IDLE:oe.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return _.key=a,_.addEventListener(ve.CHANGE,this.handleTileChange.bind(this)),_}getTile(e,t,n,s,l){const a=this.getProjection();if(!a||!l||uh(a,l))return this.getTileInternal(e,t,n,s,a||l);const c=[e,t,n],h=this.getKey(),g=this.getTileGridForProjection(a),_=this.getTileGridForProjection(l),m=this.getTileCoordForTileUrlFunction(c,l),y=new td(a,g,l,_,c,m,this.getTilePixelRatio(s),this.getGutter(),(x,E,w,C)=>this.getTileInternal(x,E,w,C,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=h,y}getTileInternal(e,t,n,s,l){const a=this.getKey();return this.createTile_(e,t,n,s,l,a)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=Yt(e);if(n){const s=Fe(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}}function QC(r,e){r.getImage().src=e}class JC extends qC{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:GC({extent:qd(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const eS='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class tS extends JC{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[eS];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const Pa={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Ma extends Kn{constructor(e,t){super(e),this.feature=t}}function nS(r,e){const t=[];for(let n=0;n<e.length;++n){const l=e[n].getGeometry();p0(r,l,t)}return t}function ka(r,e){return di(r[0],r[1],e[0],e[1])}function Rs(r,e){const t=r.length;return e<0?r[e+t]:e>=t?r[e-t]:r[e]}function Aa(r,e,t){let n,s;e<t?(n=e,s=t):(n=t,s=e);const l=Math.ceil(n),a=Math.floor(s);if(l>a){const h=Is(r,n),g=Is(r,s);return ka(h,g)}let c=0;if(n<l){const h=Is(r,n),g=Rs(r,l);c+=ka(h,g)}if(a<s){const h=Rs(r,a),g=Is(r,s);c+=ka(h,g)}for(let h=l;h<a-1;++h){const g=Rs(r,h),_=Rs(r,h+1);c+=ka(g,_)}return c}function p0(r,e,t){if(e instanceof _i){Da(r,e.getCoordinates(),!1,t);return}if(e instanceof el){const n=e.getCoordinates();for(let s=0,l=n.length;s<l;++s)Da(r,n[s],!1,t);return}if(e instanceof Ei){const n=e.getCoordinates();for(let s=0,l=n.length;s<l;++s)Da(r,n[s],!0,t);return}if(e instanceof tl){const n=e.getCoordinates();for(let s=0,l=n.length;s<l;++s){const a=n[s];for(let c=0,h=a.length;c<h;++c)Da(r,a[c],!0,t)}return}if(e instanceof qa){const n=e.getGeometries();for(let s=0;s<n.length;++s)p0(r,n[s],t);return}}const kh={index:-1,endIndex:NaN};function iS(r,e,t,n){const s=r[0],l=r[1];let a=1/0,c=-1,h=NaN;for(let m=0;m<e.targets.length;++m){const y=e.targets[m],x=y.coordinates;let E=1/0,w;for(let C=0;C<x.length-1;++C){const I=x[C],R=x[C+1],D=m0(s,l,I,R);D.squaredDistance<E&&(E=D.squaredDistance,w=C+D.along)}E<a&&(a=E,y.ring&&e.targetIndex===m&&(y.endIndex>y.startIndex?w<y.startIndex&&(w+=x.length):y.endIndex<y.startIndex&&w>y.startIndex&&(w-=x.length)),h=w,c=m)}const g=e.targets[c];let _=g.ring;if(e.targetIndex===c&&_){const m=Is(g.coordinates,h),y=t.getPixelFromCoordinate(m);qp(y,e.startPx)>n&&(_=!1)}if(_){const m=g.coordinates,y=m.length,x=g.startIndex,E=h;if(x<E){const w=Aa(m,x,E);Aa(m,x,E-y)<w&&(h-=y)}else{const w=Aa(m,x,E);Aa(m,x,E+y)<w&&(h+=y)}}return kh.index=c,kh.endIndex=h,kh}function Da(r,e,t,n){const s=r[0],l=r[1];for(let a=0,c=e.length-1;a<c;++a){const h=e[a],g=e[a+1],_=m0(s,l,h,g);if(_.squaredDistance===0){const m=a+_.along;n.push({coordinates:e,ring:t,startIndex:m,endIndex:m});return}}}const Ah={along:0,squaredDistance:0};function m0(r,e,t,n){const s=t[0],l=t[1],a=n[0],c=n[1],h=a-s,g=c-l;let _=0,m=s,y=l;return(h!==0||g!==0)&&(_=Ze(((r-s)*h+(e-l)*g)/(h*h+g*g),0,1),m+=h*_,y+=g*_),Ah.along=_,Ah.squaredDistance=iu(di(r,e,m,y),10),Ah}function Is(r,e){const t=r.length;let n=Math.floor(e);const s=e-n;n>=t?n-=t:n<0&&(n+=t);let l=n+1;l>=t&&(l-=t);const a=r[n],c=a[0],h=a[1],g=r[l],_=g[0]-c,m=g[1]-h;return[c+_*s,h+m*s]}class rS extends Ys{constructor(e){const t=e;t.stopDown||(t.stopDown=Ws),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=oS(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:zs,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const s=this.mode_;if(s==="Circle")n=(l,a,c)=>{const h=a||new vu([NaN,NaN]),g=Rn(l[0]),_=$p(g,Rn(l[l.length-1]));return h.setCenterAndRadius(g,Math.sqrt(_),this.geometryLayout_),h};else{let l;s==="Point"?l=nr:s==="LineString"?l=_i:s==="Polygon"&&(l=Ei),n=(a,c,h)=>(c?s==="Polygon"?a[0].length?c.setCoordinates([a[0].concat([a[0][0]])],this.geometryLayout_):c.setCoordinates([],this.geometryLayout_):c.setCoordinates(a,this.geometryLayout_):c=new l(a,this.geometryLayout_),c)}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new u0({source:new d0({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:sS(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Zd,this.freehandCondition_,e.freehand?this.freehandCondition_=qh:this.freehandCondition_=e.freehandCondition?e.freehandCondition:Km,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(Hh.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=qh:t=e:t=lw,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===ve.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Oe.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Oe.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Oe.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Oe.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===Oe.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Oe.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Oe.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new ci(Oe.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),s=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),l=Fh([n,s]),a=this.traceSource_.getFeaturesInExtent(l);if(a.length===0)return;const c=nS(e.coordinate,a);c.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:c,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,s=e.startIndex<=t;n===s?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const s=Math.ceil(e);let l=Math.floor(t);l===t&&(l-=1),n=l-s+1}else{const s=Math.floor(e);let l=Math.ceil(t);l===t&&(l+=1),n=s-l+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const s=[];if(t<n){const l=Math.ceil(t);let a=Math.floor(n);a===n&&(a-=1);for(let c=l;c<=a;++c)s.push(Rs(e.coordinates,c))}else{const l=Math.floor(t);let a=Math.ceil(n);a===n&&(a+=1);for(let c=l;c>=a;--c)s.push(Rs(e.coordinates,c))}s.length&&this.appendCoordinates(s)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&qp(t.startPx,e.pixel)<this.snapTolerance_)return;const n=iS(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const h=t.targets[t.targetIndex];this.removeTracedCoordinates_(h.startIndex,h.endIndex)}const c=t.targets[n.index];this.addTracedCoordinates_(c,c.startIndex,n.endIndex)}else{const c=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(c,n.endIndex)}t.targetIndex=n.index;const s=t.targets[t.targetIndex];s.endIndex=n.endIndex;const l=Is(s.coordinates,s.endIndex),a=this.getMap().getPixelFromCoordinate(l);e.coordinate=l,e.pixel=[Math.round(a[0]),Math.round(a[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(e.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,s=t[0]-n[0],l=t[1]-n[1],a=s*s+l*l;if(this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let s=!1,l=[this.finishCoordinate_];const a=this.mode_;if(a==="Point")n=!0;else if(a==="Circle")n=this.sketchCoords_.length===2;else if(a==="LineString")s=!t&&this.sketchCoords_.length>this.minPoints_;else if(a==="Polygon"){const c=this.sketchCoords_;s=c[0].length>this.minPoints_,l=[c[0][0],c[0][c[0].length-2]],t?l=[c[0][0]]:l=[c[0][0],c[0][c[0].length-2]]}if(s){const c=this.getMap();for(let h=0,g=l.length;h<g;h++){const _=l[h],m=c.getPixelFromCoordinate(_),y=e[0]-m[0],x=e[1]-m[1],E=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(y*y+x*x)<=E,n){this.finishCoordinate_=_;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Ir(new nr(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Ir);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new _i(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=Xa(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ir(new _i(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Ir,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new Ma(Pa.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),s=t.getView().getProjection(),l=Xa(this.geometryLayout_);let a,c;for(;e.length<l;)e.push(0);this.mode_==="Point"?c=this.sketchCoords_:this.mode_==="Polygon"?(a=this.sketchCoords_[0],c=a[a.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(a=this.sketchCoords_,c=a[a.length-1]),c[0]=e[0],c[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let s,l;const a=this.mode_;return a==="LineString"||a==="Circle"?(this.finishCoordinate_=e.slice(),l=this.sketchCoords_,l.length>=this.maxPoints_&&(this.freehand_?l.pop():s=!0),l.push(e.slice()),this.geometryFunction_(l,t,n)):a==="Polygon"&&(l=this.sketchCoords_[0],l.length>=this.maxPoints_&&(this.freehand_?l.pop():s=!0),l.push(e.slice()),s&&(this.finishCoordinate_=l[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),s?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),s=this.mode_;for(let l=0;l<e;++l){let a;if(s==="LineString"||s==="Circle"){if(a=this.sketchCoords_,a.splice(-2,1),a.length>=2){this.finishCoordinate_=a[a.length-2].slice();const c=this.finishCoordinate_.slice();a[a.length-1]=c,this.createOrUpdateSketchPoint_(c)}this.geometryFunction_(a,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(s==="Polygon"){a=this.sketchCoords_[0],a.splice(-2,1);const c=this.sketchLine_.getGeometry();if(a.length>=2){const h=a[a.length-2].slice();a[a.length-1]=h,this.createOrUpdateSketchPoint_(h)}c.setCoordinates(a),this.geometryFunction_(this.sketchCoords_,t,n)}if(a.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const n=e.getGeometry(),s=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,s)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,s),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new xu([t])):this.type_==="MultiLineString"?e.setGeometry(new el([t])):this.type_==="MultiPolygon"&&e.setGeometry(new tl([t])),this.dispatchEvent(new Ma(Pa.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new Ma(Pa.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let s;if(t==="LineString"||t==="Circle")s=this.sketchCoords_;else if(t==="Polygon")s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&s.shift(),s.pop();for(let a=0;a<e.length;a++)this.addToDrawing_(e[a]);const l=e[e.length-1];this.sketchFeature_=this.addToDrawing_(l),this.modifyDrawing_(l)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new Ir(new nr(s)),this.updateSketchFeatures_(),this.dispatchEvent(new Ma(Pa.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function sS(){const r=sx();return function(e,t){return r[e.getGeometry().getType()]}}function oS(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}const lS=({isDrawingMode:r,drawingType:e="LineString",onCoordinatesUpdate:t})=>{const n=Ye.useRef(),s=Ye.useRef(null),l=Ye.useRef(new d0),a=Ye.useRef(null);return Ye.useEffect(()=>{const c=new u0({source:l.current}),h=new ww({target:n.current,layers:[new nC({source:new tS}),c],view:new Wn({center:uE([0,0]),zoom:2})});return s.current=h,()=>{s.current&&s.current.setTarget(void 0)}},[]),Ye.useEffect(()=>{if(s.current)if(r){const c=new rS({source:l.current,type:e});c.on("drawend",g=>{const _=g.feature.getGeometry().getCoordinates();t(_)});const h=g=>{g.key==="Enter"&&c&&c.finishDrawing()};return document.addEventListener("keydown",h),s.current.addInteraction(c),a.current=c,()=>{document.removeEventListener("keydown",h),s.current&&s.current.removeInteraction(c)}}else a.current&&(s.current.removeInteraction(a.current),a.current=null)},[r,e,t]),fe.jsx("div",{ref:n,style:{width:"100%",height:"90vh"}})};function aS(){const[r,e]=Ye.useState(!1),[t,n]=Ye.useState("LineString"),[s,l]=Ye.useState([]),[a,c]=Ye.useState([]),[h,g]=Ye.useState(!1),[_,m]=Ye.useState(null),[y,x]=Ye.useState(!1),E=()=>{e(!0)},w=(R,D)=>{n("Polygon"),g(!0),e(!0),m({index:R,position:D})},C=R=>{t==="LineString"?l(R):c(R[0]),e(!1)},I=()=>{const R=[...s],D=_.position==="after"?_.index+1:_.index;R.splice(D,0,...a,a[0]),l(R),c([]),g(!1),n("LineString"),m(null)};return fe.jsxs("div",{className:"app",children:[fe.jsx(S1,{onClick:()=>x(!0)}),y&&fe.jsx(bE,{onStartDrawing:E,onStartPolygon:w,coordinates:s,polygonCoordinates:a,isPolygonMode:h,onImportPolygon:I,onClose:()=>x(!1)}),fe.jsx(lS,{isDrawingMode:r,drawingType:t,onCoordinatesUpdate:C})]})}x1.createRoot(document.getElementById("root")).render(fe.jsx(Ye.StrictMode,{children:fe.jsx(aS,{})}));
